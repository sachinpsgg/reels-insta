(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var Fc={exports:{}},jo={},Uc={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd;function Fy(){if(Zd)return Te;Zd=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),k=Symbol.iterator;function F(N){return N===null||typeof N!="object"?null:(N=k&&N[k]||N["@@iterator"],typeof N=="function"?N:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,X={};function q(N,b,oe){this.props=N,this.context=b,this.refs=X,this.updater=oe||B}q.prototype.isReactComponent={},q.prototype.setState=function(N,b){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,b,"setState")},q.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ge(){}ge.prototype=q.prototype;function fe(N,b,oe){this.props=N,this.context=b,this.refs=X,this.updater=oe||B}var ve=fe.prototype=new ge;ve.constructor=fe,G(ve,q.prototype),ve.isPureReactComponent=!0;var Ie=Array.isArray,He=Object.prototype.hasOwnProperty,Ae={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function T(N,b,oe){var Ee,we={},Pe=null,Le=null;if(b!=null)for(Ee in b.ref!==void 0&&(Le=b.ref),b.key!==void 0&&(Pe=""+b.key),b)He.call(b,Ee)&&!V.hasOwnProperty(Ee)&&(we[Ee]=b[Ee]);var Me=arguments.length-2;if(Me===1)we.children=oe;else if(1<Me){for(var Be=Array(Me),pt=0;pt<Me;pt++)Be[pt]=arguments[pt+2];we.children=Be}if(N&&N.defaultProps)for(Ee in Me=N.defaultProps,Me)we[Ee]===void 0&&(we[Ee]=Me[Ee]);return{$$typeof:i,type:N,key:Pe,ref:Le,props:we,_owner:Ae.current}}function A(N,b){return{$$typeof:i,type:N.type,key:b,ref:N.ref,props:N.props,_owner:N._owner}}function P(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function x(N){var b={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(oe){return b[oe]})}var D=/\/+/g;function S(N,b){return typeof N=="object"&&N!==null&&N.key!=null?x(""+N.key):b.toString(36)}function Ze(N,b,oe,Ee,we){var Pe=typeof N;(Pe==="undefined"||Pe==="boolean")&&(N=null);var Le=!1;if(N===null)Le=!0;else switch(Pe){case"string":case"number":Le=!0;break;case"object":switch(N.$$typeof){case i:case e:Le=!0}}if(Le)return Le=N,we=we(Le),N=Ee===""?"."+S(Le,0):Ee,Ie(we)?(oe="",N!=null&&(oe=N.replace(D,"$&/")+"/"),Ze(we,b,oe,"",function(pt){return pt})):we!=null&&(P(we)&&(we=A(we,oe+(!we.key||Le&&Le.key===we.key?"":(""+we.key).replace(D,"$&/")+"/")+N)),b.push(we)),1;if(Le=0,Ee=Ee===""?".":Ee+":",Ie(N))for(var Me=0;Me<N.length;Me++){Pe=N[Me];var Be=Ee+S(Pe,Me);Le+=Ze(Pe,b,oe,Be,we)}else if(Be=F(N),typeof Be=="function")for(N=Be.call(N),Me=0;!(Pe=N.next()).done;)Pe=Pe.value,Be=Ee+S(Pe,Me++),Le+=Ze(Pe,b,oe,Be,we);else if(Pe==="object")throw b=String(N),Error("Objects are not valid as a React child (found: "+(b==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return Le}function Ct(N,b,oe){if(N==null)return N;var Ee=[],we=0;return Ze(N,Ee,"","",function(Pe){return b.call(oe,Pe,we++)}),Ee}function Pt(N){if(N._status===-1){var b=N._result;b=b(),b.then(function(oe){(N._status===0||N._status===-1)&&(N._status=1,N._result=oe)},function(oe){(N._status===0||N._status===-1)&&(N._status=2,N._result=oe)}),N._status===-1&&(N._status=0,N._result=b)}if(N._status===1)return N._result.default;throw N._result}var Ue={current:null},J={transition:null},ae={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:J,ReactCurrentOwner:Ae};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:Ct,forEach:function(N,b,oe){Ct(N,function(){b.apply(this,arguments)},oe)},count:function(N){var b=0;return Ct(N,function(){b++}),b},toArray:function(N){return Ct(N,function(b){return b})||[]},only:function(N){if(!P(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Te.Component=q,Te.Fragment=n,Te.Profiler=a,Te.PureComponent=fe,Te.StrictMode=s,Te.Suspense=_,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Te.act=ee,Te.cloneElement=function(N,b,oe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Ee=G({},N.props),we=N.key,Pe=N.ref,Le=N._owner;if(b!=null){if(b.ref!==void 0&&(Pe=b.ref,Le=Ae.current),b.key!==void 0&&(we=""+b.key),N.type&&N.type.defaultProps)var Me=N.type.defaultProps;for(Be in b)He.call(b,Be)&&!V.hasOwnProperty(Be)&&(Ee[Be]=b[Be]===void 0&&Me!==void 0?Me[Be]:b[Be])}var Be=arguments.length-2;if(Be===1)Ee.children=oe;else if(1<Be){Me=Array(Be);for(var pt=0;pt<Be;pt++)Me[pt]=arguments[pt+2];Ee.children=Me}return{$$typeof:i,type:N.type,key:we,ref:Pe,props:Ee,_owner:Le}},Te.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},Te.createElement=T,Te.createFactory=function(N){var b=T.bind(null,N);return b.type=N,b},Te.createRef=function(){return{current:null}},Te.forwardRef=function(N){return{$$typeof:m,render:N}},Te.isValidElement=P,Te.lazy=function(N){return{$$typeof:I,_payload:{_status:-1,_result:N},_init:Pt}},Te.memo=function(N,b){return{$$typeof:E,type:N,compare:b===void 0?null:b}},Te.startTransition=function(N){var b=J.transition;J.transition={};try{N()}finally{J.transition=b}},Te.unstable_act=ee,Te.useCallback=function(N,b){return Ue.current.useCallback(N,b)},Te.useContext=function(N){return Ue.current.useContext(N)},Te.useDebugValue=function(){},Te.useDeferredValue=function(N){return Ue.current.useDeferredValue(N)},Te.useEffect=function(N,b){return Ue.current.useEffect(N,b)},Te.useId=function(){return Ue.current.useId()},Te.useImperativeHandle=function(N,b,oe){return Ue.current.useImperativeHandle(N,b,oe)},Te.useInsertionEffect=function(N,b){return Ue.current.useInsertionEffect(N,b)},Te.useLayoutEffect=function(N,b){return Ue.current.useLayoutEffect(N,b)},Te.useMemo=function(N,b){return Ue.current.useMemo(N,b)},Te.useReducer=function(N,b,oe){return Ue.current.useReducer(N,b,oe)},Te.useRef=function(N){return Ue.current.useRef(N)},Te.useState=function(N){return Ue.current.useState(N)},Te.useSyncExternalStore=function(N,b,oe){return Ue.current.useSyncExternalStore(N,b,oe)},Te.useTransition=function(){return Ue.current.useTransition()},Te.version="18.3.1",Te}var ep;function gh(){return ep||(ep=1,Uc.exports=Fy()),Uc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function Uy(){if(tp)return jo;tp=1;var i=gh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,_,E){var I,k={},F=null,B=null;E!==void 0&&(F=""+E),_.key!==void 0&&(F=""+_.key),_.ref!==void 0&&(B=_.ref);for(I in _)s.call(_,I)&&!c.hasOwnProperty(I)&&(k[I]=_[I]);if(m&&m.defaultProps)for(I in _=m.defaultProps,_)k[I]===void 0&&(k[I]=_[I]);return{$$typeof:e,type:m,key:F,ref:B,props:k,_owner:a.current}}return jo.Fragment=n,jo.jsx=f,jo.jsxs=f,jo}var np;function zy(){return np||(np=1,Fc.exports=Uy()),Fc.exports}var _e=zy(),mn=gh(),wl={},zc={exports:{}},Qt={},Bc={exports:{}},jc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function By(){return rp||(rp=1,function(i){function e(J,ae){var ee=J.length;J.push(ae);e:for(;0<ee;){var N=ee-1>>>1,b=J[N];if(0<a(b,ae))J[N]=ae,J[ee]=b,ee=N;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ae=J[0],ee=J.pop();if(ee!==ae){J[0]=ee;e:for(var N=0,b=J.length,oe=b>>>1;N<oe;){var Ee=2*(N+1)-1,we=J[Ee],Pe=Ee+1,Le=J[Pe];if(0>a(we,ee))Pe<b&&0>a(Le,we)?(J[N]=Le,J[Pe]=ee,N=Pe):(J[N]=we,J[Ee]=ee,N=Ee);else if(Pe<b&&0>a(Le,ee))J[N]=Le,J[Pe]=ee,N=Pe;else break e}}return ae}function a(J,ae){var ee=J.sortIndex-ae.sortIndex;return ee!==0?ee:J.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var _=[],E=[],I=1,k=null,F=3,B=!1,G=!1,X=!1,q=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ve(J){for(var ae=n(E);ae!==null;){if(ae.callback===null)s(E);else if(ae.startTime<=J)s(E),ae.sortIndex=ae.expirationTime,e(_,ae);else break;ae=n(E)}}function Ie(J){if(X=!1,ve(J),!G)if(n(_)!==null)G=!0,Pt(He);else{var ae=n(E);ae!==null&&Ue(Ie,ae.startTime-J)}}function He(J,ae){G=!1,X&&(X=!1,ge(T),T=-1),B=!0;var ee=F;try{for(ve(ae),k=n(_);k!==null&&(!(k.expirationTime>ae)||J&&!x());){var N=k.callback;if(typeof N=="function"){k.callback=null,F=k.priorityLevel;var b=N(k.expirationTime<=ae);ae=i.unstable_now(),typeof b=="function"?k.callback=b:k===n(_)&&s(_),ve(ae)}else s(_);k=n(_)}if(k!==null)var oe=!0;else{var Ee=n(E);Ee!==null&&Ue(Ie,Ee.startTime-ae),oe=!1}return oe}finally{k=null,F=ee,B=!1}}var Ae=!1,V=null,T=-1,A=5,P=-1;function x(){return!(i.unstable_now()-P<A)}function D(){if(V!==null){var J=i.unstable_now();P=J;var ae=!0;try{ae=V(!0,J)}finally{ae?S():(Ae=!1,V=null)}}else Ae=!1}var S;if(typeof fe=="function")S=function(){fe(D)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Ct=Ze.port2;Ze.port1.onmessage=D,S=function(){Ct.postMessage(null)}}else S=function(){q(D,0)};function Pt(J){V=J,Ae||(Ae=!0,S())}function Ue(J,ae){T=q(function(){J(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){G||B||(G=!0,Pt(He))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return F},i.unstable_getFirstCallbackNode=function(){return n(_)},i.unstable_next=function(J){switch(F){case 1:case 2:case 3:var ae=3;break;default:ae=F}var ee=F;F=ae;try{return J()}finally{F=ee}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ee=F;F=J;try{return ae()}finally{F=ee}},i.unstable_scheduleCallback=function(J,ae,ee){var N=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?N+ee:N):ee=N,J){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=ee+b,J={id:I++,callback:ae,priorityLevel:J,startTime:ee,expirationTime:b,sortIndex:-1},ee>N?(J.sortIndex=ee,e(E,J),n(_)===null&&J===n(E)&&(X?(ge(T),T=-1):X=!0,Ue(Ie,ee-N))):(J.sortIndex=b,e(_,J),G||B||(G=!0,Pt(He))),J},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(J){var ae=F;return function(){var ee=F;F=ae;try{return J.apply(this,arguments)}finally{F=ee}}}}(jc)),jc}var ip;function jy(){return ip||(ip=1,Bc.exports=By()),Bc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function by(){if(sp)return Qt;sp=1;var i=gh(),e=jy();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},k={};function F(t){return _.call(k,t)?!0:_.call(I,t)?!1:E.test(t)?k[t]=!0:(I[t]=!0,!1)}function B(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G(t,r,o,u){if(r===null||typeof r>"u"||B(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function X(t,r,o,u,h,p,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=y}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){q[t]=new X(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];q[r]=new X(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){q[t]=new X(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){q[t]=new X(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){q[t]=new X(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){q[t]=new X(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){q[t]=new X(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){q[t]=new X(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){q[t]=new X(t,5,!1,t.toLowerCase(),null,!1,!1)});var ge=/[\-:]([a-z])/g;function fe(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(ge,fe);q[r]=new X(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(ge,fe);q[r]=new X(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(ge,fe);q[r]=new X(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){q[t]=new X(t,1,!1,t.toLowerCase(),null,!1,!1)}),q.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){q[t]=new X(t,1,!1,t.toLowerCase(),null,!0,!0)});function ve(t,r,o,u){var h=q.hasOwnProperty(r)?q[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(G(r,o,h,u)&&(o=null),u||h===null?F(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var Ie=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,He=Symbol.for("react.element"),Ae=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),x=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),Ct=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),J=Symbol.iterator;function ae(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,N;function b(t){if(N===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+t}var oe=!1;function Ee(t,r){if(!t||oe)return"";oe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,w=p.length-1;1<=y&&0<=w&&h[y]!==p[w];)w--;for(;1<=y&&0<=w;y--,w--)if(h[y]!==p[w]){if(y!==1||w!==1)do if(y--,w--,0>w||h[y]!==p[w]){var R=`
`+h[y].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=y&&0<=w);break}}}finally{oe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?b(t):""}function we(t){switch(t.tag){case 5:return b(t.type);case 16:return b("Lazy");case 13:return b("Suspense");case 19:return b("SuspenseList");case 0:case 2:case 15:return t=Ee(t.type,!1),t;case 11:return t=Ee(t.type.render,!1),t;case 1:return t=Ee(t.type,!0),t;default:return""}}function Pe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case Ae:return"Portal";case A:return"Profiler";case T:return"StrictMode";case S:return"Suspense";case Ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x:return(t.displayName||"Context")+".Consumer";case P:return(t._context.displayName||"Context")+".Provider";case D:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ct:return r=t.displayName||null,r!==null?r:Pe(t.type)||"Memo";case Pt:r=t._payload,t=t._init;try{return Pe(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(r);case 8:return r===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Me(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Be(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pt(t){var r=Be(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Kn(t){t._valueTracker||(t._valueTracker=pt(t))}function Mi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Be(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function _r(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ei(t,r){var o=r.checked;return ee({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Oi(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Me(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ws(t,r){r=r.checked,r!=null&&ve(t,"checked",r,!1)}function Qs(t,r){Ws(t,r);var o=Me(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Fi(t,r.type,o):r.hasOwnProperty("defaultValue")&&Fi(t,r.type,Me(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function oa(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Fi(t,r,o){(r!=="number"||_r(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Gn=Array.isArray;function Xn(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Me(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Ks(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ui(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Gn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Me(o)}}function zi(t,r){var o=Me(r.value),u=Me(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Gs(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ot(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yn,Xs=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Yn=Yn||document.createElement("div"),Yn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Yn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function vr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ni=["Webkit","ms","Moz","O"];Object.keys(ti).forEach(function(t){ni.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ti[r]=ti[t]})});function Ys(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ti.hasOwnProperty(t)&&ti[t]?(""+r).trim():r+"px"}function Js(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=Ys(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var Zs=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eo(t,r){if(r){if(Zs[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function to(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ri=null;function Bi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ji=null,sn=null,Nn=null;function bi(t){if(t=Ro(t)){if(typeof ji!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Oa(r),ji(t.stateNode,t.type,r))}}function Dn(t){sn?Nn?Nn.push(t):Nn=[t]:sn=t}function no(){if(sn){var t=sn,r=Nn;if(Nn=sn=null,bi(t),r)for(t=0;t<r.length;t++)bi(r[t])}}function ii(t,r){return t(r)}function ro(){}var Jn=!1;function io(t,r,o){if(Jn)return t(r,o);Jn=!0;try{return ii(t,r,o)}finally{Jn=!1,(sn!==null||Nn!==null)&&(ro(),no())}}function et(t,r){var o=t.stateNode;if(o===null)return null;var u=Oa(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var $i=!1;if(m)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){$i=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{$i=!1}function si(t,r,o,u,h,p,y,w,R){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(H){this.onError(H)}}var oi=!1,qi=null,yn=!1,so=null,hu={onError:function(t){oi=!0,qi=t}};function Hi(t,r,o,u,h,p,y,w,R){oi=!1,qi=null,si.apply(hu,arguments)}function aa(t,r,o,u,h,p,y,w,R){if(Hi.apply(this,arguments),oi){if(oi){var U=qi;oi=!1,qi=null}else throw Error(n(198));yn||(yn=!0,so=U)}}function _n(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function ai(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function vn(t){if(_n(t)!==t)throw Error(n(188))}function la(t){var r=t.alternate;if(!r){if(r=_n(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return vn(h),t;if(p===u)return vn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var y=!1,w=h.child;w;){if(w===o){y=!0,o=h,u=p;break}if(w===u){y=!0,u=h,o=p;break}w=w.sibling}if(!y){for(w=p.child;w;){if(w===o){y=!0,o=p,u=h;break}if(w===u){y=!0,u=p,o=h;break}w=w.sibling}if(!y)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function oo(t){return t=la(t),t!==null?Wi(t):null}function Wi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Wi(t);if(r!==null)return r;t=t.sibling}return null}var Qi=e.unstable_scheduleCallback,ao=e.unstable_cancelCallback,ua=e.unstable_shouldYield,fu=e.unstable_requestPaint,je=e.unstable_now,ca=e.unstable_getCurrentPriorityLevel,li=e.unstable_ImmediatePriority,Er=e.unstable_UserBlockingPriority,on=e.unstable_NormalPriority,lo=e.unstable_LowPriority,ha=e.unstable_IdlePriority,ui=null,Gt=null;function fa(t){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ui,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:pa,uo=Math.log,da=Math.LN2;function pa(t){return t>>>=0,t===0?32:31-(uo(t)/da|0)|0}var Ki=64,Gi=4194304;function wr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ci(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,y=o&268435455;if(y!==0){var w=y&~h;w!==0?u=wr(w):(p&=y,p!==0&&(u=wr(p)))}else y=o&~h,y!==0?u=wr(y):p!==0&&(u=wr(p));if(u===0)return 0;if(r!==0&&r!==u&&!(r&h)&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if(u&4&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Ot(r),h=1<<o,u|=t[o],r&=~h;return u}function du(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zn(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-Ot(p),w=1<<y,R=h[y];R===-1?(!(w&o)||w&u)&&(h[y]=du(w,r)):R<=r&&(t.expiredLanes|=w),p&=~w}}function Xt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hi(){var t=Ki;return Ki<<=1,!(Ki&4194240)&&(Ki=64),t}function Tr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Ir(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ot(r),t[r]=o}function ze(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Ot(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Sr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Ot(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Re=0;function Ar(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ma,Xi,ga,ya,_a,co=!1,Ln=[],Et=null,En=null,wn=null,Rr=new Map,an=new Map,Mn=[],pu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function va(t,r){switch(t){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Rr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":an.delete(r.pointerId)}}function Bt(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Ro(r),r!==null&&Xi(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function mu(t,r,o,u,h){switch(r){case"focusin":return Et=Bt(Et,t,r,o,u,h),!0;case"dragenter":return En=Bt(En,t,r,o,u,h),!0;case"mouseover":return wn=Bt(wn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Rr.set(p,Bt(Rr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,an.set(p,Bt(an.get(p)||null,t,r,o,u,h)),!0}return!1}function Ea(t){var r=gi(t.target);if(r!==null){var o=_n(r);if(o!==null){if(r=o.tag,r===13){if(r=ai(o),r!==null){t.blockedOn=r,_a(t.priority,function(){ga(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function er(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=Yi(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);ri=u,o.target.dispatchEvent(u),ri=null}else return r=Ro(o),r!==null&&Xi(r),t.blockedOn=o,!1;r.shift()}return!0}function fi(t,r,o){er(t)&&o.delete(r)}function wa(){co=!1,Et!==null&&er(Et)&&(Et=null),En!==null&&er(En)&&(En=null),wn!==null&&er(wn)&&(wn=null),Rr.forEach(fi),an.forEach(fi)}function Tn(t,r){t.blockedOn===r&&(t.blockedOn=null,co||(co=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wa)))}function In(t){function r(h){return Tn(h,t)}if(0<Ln.length){Tn(Ln[0],t);for(var o=1;o<Ln.length;o++){var u=Ln[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Et!==null&&Tn(Et,t),En!==null&&Tn(En,t),wn!==null&&Tn(wn,t),Rr.forEach(r),an.forEach(r),o=0;o<Mn.length;o++)u=Mn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Mn.length&&(o=Mn[0],o.blockedOn===null);)Ea(o),o.blockedOn===null&&Mn.shift()}var tr=Ie.ReactCurrentBatchConfig,Cr=!0;function We(t,r,o,u){var h=Re,p=tr.transition;tr.transition=null;try{Re=1,ho(t,r,o,u)}finally{Re=h,tr.transition=p}}function gu(t,r,o,u){var h=Re,p=tr.transition;tr.transition=null;try{Re=4,ho(t,r,o,u)}finally{Re=h,tr.transition=p}}function ho(t,r,o,u){if(Cr){var h=Yi(t,r,o,u);if(h===null)Cu(t,r,u,di,o),va(t,u);else if(mu(h,t,r,o,u))u.stopPropagation();else if(va(t,u),r&4&&-1<pu.indexOf(t)){for(;h!==null;){var p=Ro(h);if(p!==null&&ma(p),p=Yi(t,r,o,u),p===null&&Cu(t,r,u,di,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Cu(t,r,u,null,o)}}var di=null;function Yi(t,r,o,u){if(di=null,t=Bi(u),t=gi(t),t!==null)if(r=_n(t),r===null)t=null;else if(o=r.tag,o===13){if(t=ai(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return di=t,null}function fo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ca()){case li:return 1;case Er:return 4;case on:case lo:return 16;case ha:return 536870912;default:return 16}default:return 16}}var Yt=null,Ji=null,jt=null;function po(){if(jt)return jt;var t,r=Ji,o=r.length,u,h="value"in Yt?Yt.value:Yt.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var y=o-t;for(u=1;u<=y&&r[o-u]===h[p-u];u++);return jt=h.slice(t,1<u?1-u:void 0)}function Zi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function On(){return!0}function mo(){return!1}function wt(t){function r(o,u,h,p,y){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(o=t[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?On:mo,this.isPropagationStopped=mo,this}return ee(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=On)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=On)},persist:function(){},isPersistent:On}),r}var Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},es=wt(Sn),Fn=ee({},Sn,{view:0,detail:0}),yu=wt(Fn),ts,nr,Pr,pi=ee({},Fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Un,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pr&&(Pr&&t.type==="mousemove"?(ts=t.screenX-Pr.screenX,nr=t.screenY-Pr.screenY):nr=ts=0,Pr=t),ts)},movementY:function(t){return"movementY"in t?t.movementY:nr}}),ns=wt(pi),go=ee({},pi,{dataTransfer:0}),Ta=wt(go),rs=ee({},Fn,{relatedTarget:0}),is=wt(rs),Ia=ee({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0}),rr=wt(Ia),Sa=ee({},Sn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Aa=wt(Sa),Ra=ee({},Sn,{data:0}),yo=wt(Ra),ss={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ft={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ca={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pa(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ca[t])?!!r[t]:!1}function Un(){return Pa}var l=ee({},Fn,{key:function(t){if(t.key){var r=ss[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Zi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ft[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Un,charCode:function(t){return t.type==="keypress"?Zi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=wt(l),g=ee({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v=wt(g),L=ee({},Fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Un}),z=wt(L),Y=ee({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fe=wt(Y),lt=ee({},pi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ke=wt(lt),mt=[9,13,27,32],rt=m&&"CompositionEvent"in window,ln=null;m&&"documentMode"in document&&(ln=document.documentMode);var Jt=m&&"TextEvent"in window&&!ln,mi=m&&(!rt||ln&&8<ln&&11>=ln),os=" ",Wh=!1;function Qh(t,r){switch(t){case"keyup":return mt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var as=!1;function Mg(t,r){switch(t){case"compositionend":return Kh(r);case"keypress":return r.which!==32?null:(Wh=!0,os);case"textInput":return t=r.data,t===os&&Wh?null:t;default:return null}}function Og(t,r){if(as)return t==="compositionend"||!rt&&Qh(t,r)?(t=po(),jt=Ji=Yt=null,as=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return mi&&r.locale!=="ko"?null:r.data;default:return null}}var Fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Fg[t.type]:r==="textarea"}function Xh(t,r,o,u){Dn(u),r=Da(r,"onChange"),0<r.length&&(o=new es("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var _o=null,vo=null;function Ug(t){mf(t,0)}function ka(t){var r=fs(t);if(Mi(r))return t}function zg(t,r){if(t==="change")return r}var Yh=!1;if(m){var _u;if(m){var vu="oninput"in document;if(!vu){var Jh=document.createElement("div");Jh.setAttribute("oninput","return;"),vu=typeof Jh.oninput=="function"}_u=vu}else _u=!1;Yh=_u&&(!document.documentMode||9<document.documentMode)}function Zh(){_o&&(_o.detachEvent("onpropertychange",ef),vo=_o=null)}function ef(t){if(t.propertyName==="value"&&ka(vo)){var r=[];Xh(r,vo,t,Bi(t)),io(Ug,r)}}function Bg(t,r,o){t==="focusin"?(Zh(),_o=r,vo=o,_o.attachEvent("onpropertychange",ef)):t==="focusout"&&Zh()}function jg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ka(vo)}function bg(t,r){if(t==="click")return ka(r)}function $g(t,r){if(t==="input"||t==="change")return ka(r)}function qg(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var An=typeof Object.is=="function"?Object.is:qg;function Eo(t,r){if(An(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!_.call(r,h)||!An(t[h],r[h]))return!1}return!0}function tf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nf(t,r){var o=tf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=tf(o)}}function rf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?rf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function sf(){for(var t=window,r=_r();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=_r(t.document)}return r}function Eu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Hg(t){var r=sf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&rf(o.ownerDocument.documentElement,o)){if(u!==null&&Eu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=nf(o,p);var y=nf(o,u);h&&y&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Wg=m&&"documentMode"in document&&11>=document.documentMode,ls=null,wu=null,wo=null,Tu=!1;function of(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Tu||ls==null||ls!==_r(u)||(u=ls,"selectionStart"in u&&Eu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),wo&&Eo(wo,u)||(wo=u,u=Da(wu,"onSelect"),0<u.length&&(r=new es("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=ls)))}function Va(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var us={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},Iu={},af={};m&&(af=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);function xa(t){if(Iu[t])return Iu[t];if(!us[t])return t;var r=us[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in af)return Iu[t]=r[o];return t}var lf=xa("animationend"),uf=xa("animationiteration"),cf=xa("animationstart"),hf=xa("transitionend"),ff=new Map,df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(t,r){ff.set(t,r),c(r,[t])}for(var Su=0;Su<df.length;Su++){var Au=df[Su],Qg=Au.toLowerCase(),Kg=Au[0].toUpperCase()+Au.slice(1);kr(Qg,"on"+Kg)}kr(lf,"onAnimationEnd"),kr(uf,"onAnimationIteration"),kr(cf,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(hf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gg=new Set("cancel close invalid load scroll toggle".split(" ").concat(To));function pf(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,aa(u,r,void 0,t),t.currentTarget=null}function mf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var y=u.length-1;0<=y;y--){var w=u[y],R=w.instance,U=w.currentTarget;if(w=w.listener,R!==p&&h.isPropagationStopped())break e;pf(h,w,U),p=R}else for(y=0;y<u.length;y++){if(w=u[y],R=w.instance,U=w.currentTarget,w=w.listener,R!==p&&h.isPropagationStopped())break e;pf(h,w,U),p=R}}}if(yn)throw t=so,yn=!1,so=null,t}function $e(t,r){var o=r[Du];o===void 0&&(o=r[Du]=new Set);var u=t+"__bubble";o.has(u)||(gf(r,t,2,!1),o.add(u))}function Ru(t,r,o){var u=0;r&&(u|=4),gf(o,t,u,r)}var Na="_reactListening"+Math.random().toString(36).slice(2);function Io(t){if(!t[Na]){t[Na]=!0,s.forEach(function(o){o!=="selectionchange"&&(Gg.has(o)||Ru(o,!1,t),Ru(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Na]||(r[Na]=!0,Ru("selectionchange",!1,r))}}function gf(t,r,o,u){switch(fo(r)){case 1:var h=We;break;case 4:h=gu;break;default:h=ho}o=h.bind(null,r,o,t),h=void 0,!$i||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Cu(t,r,o,u,h){var p=u;if(!(r&1)&&!(r&2)&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var w=u.stateNode.containerInfo;if(w===h||w.nodeType===8&&w.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var R=y.tag;if((R===3||R===4)&&(R=y.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;y=y.return}for(;w!==null;){if(y=gi(w),y===null)return;if(R=y.tag,R===5||R===6){u=p=y;continue e}w=w.parentNode}}u=u.return}io(function(){var U=p,H=Bi(o),W=[];e:{var $=ff.get(t);if($!==void 0){var Z=es,re=t;switch(t){case"keypress":if(Zi(o)===0)break e;case"keydown":case"keyup":Z=d;break;case"focusin":re="focus",Z=is;break;case"focusout":re="blur",Z=is;break;case"beforeblur":case"afterblur":Z=is;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ns;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Ta;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=z;break;case lf:case uf:case cf:Z=rr;break;case hf:Z=Fe;break;case"scroll":Z=yu;break;case"wheel":Z=ke;break;case"copy":case"cut":case"paste":Z=Aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=v}var ie=(r&4)!==0,tt=!ie&&t==="scroll",M=ie?$!==null?$+"Capture":null:$;ie=[];for(var C=U,O;C!==null;){O=C;var K=O.stateNode;if(O.tag===5&&K!==null&&(O=K,M!==null&&(K=et(C,M),K!=null&&ie.push(So(C,K,O)))),tt)break;C=C.return}0<ie.length&&($=new Z($,re,null,o,H),W.push({event:$,listeners:ie}))}}if(!(r&7)){e:{if($=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",$&&o!==ri&&(re=o.relatedTarget||o.fromElement)&&(gi(re)||re[ir]))break e;if((Z||$)&&($=H.window===H?H:($=H.ownerDocument)?$.defaultView||$.parentWindow:window,Z?(re=o.relatedTarget||o.toElement,Z=U,re=re?gi(re):null,re!==null&&(tt=_n(re),re!==tt||re.tag!==5&&re.tag!==6)&&(re=null)):(Z=null,re=U),Z!==re)){if(ie=ns,K="onMouseLeave",M="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(ie=v,K="onPointerLeave",M="onPointerEnter",C="pointer"),tt=Z==null?$:fs(Z),O=re==null?$:fs(re),$=new ie(K,C+"leave",Z,o,H),$.target=tt,$.relatedTarget=O,K=null,gi(H)===U&&(ie=new ie(M,C+"enter",re,o,H),ie.target=O,ie.relatedTarget=tt,K=ie),tt=K,Z&&re)t:{for(ie=Z,M=re,C=0,O=ie;O;O=cs(O))C++;for(O=0,K=M;K;K=cs(K))O++;for(;0<C-O;)ie=cs(ie),C--;for(;0<O-C;)M=cs(M),O--;for(;C--;){if(ie===M||M!==null&&ie===M.alternate)break t;ie=cs(ie),M=cs(M)}ie=null}else ie=null;Z!==null&&yf(W,$,Z,ie,!1),re!==null&&tt!==null&&yf(W,tt,re,ie,!0)}}e:{if($=U?fs(U):window,Z=$.nodeName&&$.nodeName.toLowerCase(),Z==="select"||Z==="input"&&$.type==="file")var se=zg;else if(Gh($))if(Yh)se=$g;else{se=jg;var ue=Bg}else(Z=$.nodeName)&&Z.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(se=bg);if(se&&(se=se(t,U))){Xh(W,se,o,H);break e}ue&&ue(t,$,U),t==="focusout"&&(ue=$._wrapperState)&&ue.controlled&&$.type==="number"&&Fi($,"number",$.value)}switch(ue=U?fs(U):window,t){case"focusin":(Gh(ue)||ue.contentEditable==="true")&&(ls=ue,wu=U,wo=null);break;case"focusout":wo=wu=ls=null;break;case"mousedown":Tu=!0;break;case"contextmenu":case"mouseup":case"dragend":Tu=!1,of(W,o,H);break;case"selectionchange":if(Wg)break;case"keydown":case"keyup":of(W,o,H)}var ce;if(rt)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else as?Qh(t,o)&&(de="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(de="onCompositionStart");de&&(mi&&o.locale!=="ko"&&(as||de!=="onCompositionStart"?de==="onCompositionEnd"&&as&&(ce=po()):(Yt=H,Ji="value"in Yt?Yt.value:Yt.textContent,as=!0)),ue=Da(U,de),0<ue.length&&(de=new yo(de,t,null,o,H),W.push({event:de,listeners:ue}),ce?de.data=ce:(ce=Kh(o),ce!==null&&(de.data=ce)))),(ce=Jt?Mg(t,o):Og(t,o))&&(U=Da(U,"onBeforeInput"),0<U.length&&(H=new yo("onBeforeInput","beforeinput",null,o,H),W.push({event:H,listeners:U}),H.data=ce))}mf(W,r)})}function So(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Da(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=et(t,o),p!=null&&u.unshift(So(t,p,h)),p=et(t,r),p!=null&&u.push(So(t,p,h))),t=t.return}return u}function cs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yf(t,r,o,u,h){for(var p=r._reactName,y=[];o!==null&&o!==u;){var w=o,R=w.alternate,U=w.stateNode;if(R!==null&&R===u)break;w.tag===5&&U!==null&&(w=U,h?(R=et(o,p),R!=null&&y.unshift(So(o,R,w))):h||(R=et(o,p),R!=null&&y.push(So(o,R,w)))),o=o.return}y.length!==0&&t.push({event:r,listeners:y})}var Xg=/\r\n?/g,Yg=/\u0000|\uFFFD/g;function _f(t){return(typeof t=="string"?t:""+t).replace(Xg,`
`).replace(Yg,"")}function La(t,r,o){if(r=_f(r),_f(t)!==r&&o)throw Error(n(425))}function Ma(){}var Pu=null,ku=null;function Vu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var xu=typeof setTimeout=="function"?setTimeout:void 0,Jg=typeof clearTimeout=="function"?clearTimeout:void 0,vf=typeof Promise=="function"?Promise:void 0,Zg=typeof queueMicrotask=="function"?queueMicrotask:typeof vf<"u"?function(t){return vf.resolve(null).then(t).catch(ey)}:xu;function ey(t){setTimeout(function(){throw t})}function Nu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),In(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);In(r)}function Vr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Ef(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var hs=Math.random().toString(36).slice(2),zn="__reactFiber$"+hs,Ao="__reactProps$"+hs,ir="__reactContainer$"+hs,Du="__reactEvents$"+hs,ty="__reactListeners$"+hs,ny="__reactHandles$"+hs;function gi(t){var r=t[zn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[ir]||o[zn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Ef(t);t!==null;){if(o=t[zn])return o;t=Ef(t)}return r}t=o,o=t.parentNode}return null}function Ro(t){return t=t[zn]||t[ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Oa(t){return t[Ao]||null}var Lu=[],ds=-1;function xr(t){return{current:t}}function qe(t){0>ds||(t.current=Lu[ds],Lu[ds]=null,ds--)}function be(t,r){ds++,Lu[ds]=t.current,t.current=r}var Nr={},kt=xr(Nr),bt=xr(!1),yi=Nr;function ps(t,r){var o=t.type.contextTypes;if(!o)return Nr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function $t(t){return t=t.childContextTypes,t!=null}function Fa(){qe(bt),qe(kt)}function wf(t,r,o){if(kt.current!==Nr)throw Error(n(168));be(kt,r),be(bt,o)}function Tf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Le(t)||"Unknown",h));return ee({},o,u)}function Ua(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,yi=kt.current,be(kt,t),be(bt,bt.current),!0}function If(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Tf(t,r,yi),u.__reactInternalMemoizedMergedChildContext=t,qe(bt),qe(kt),be(kt,t)):qe(bt),be(bt,o)}var sr=null,za=!1,Mu=!1;function Sf(t){sr===null?sr=[t]:sr.push(t)}function ry(t){za=!0,Sf(t)}function Dr(){if(!Mu&&sr!==null){Mu=!0;var t=0,r=Re;try{var o=sr;for(Re=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}sr=null,za=!1}catch(h){throw sr!==null&&(sr=sr.slice(t+1)),Qi(li,Dr),h}finally{Re=r,Mu=!1}}return null}var ms=[],gs=0,Ba=null,ja=0,un=[],cn=0,_i=null,or=1,ar="";function vi(t,r){ms[gs++]=ja,ms[gs++]=Ba,Ba=t,ja=r}function Af(t,r,o){un[cn++]=or,un[cn++]=ar,un[cn++]=_i,_i=t;var u=or;t=ar;var h=32-Ot(u)-1;u&=~(1<<h),o+=1;var p=32-Ot(r)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,or=1<<32-Ot(r)+h|o<<h|u,ar=p+t}else or=1<<p|o<<h|u,ar=t}function Ou(t){t.return!==null&&(vi(t,1),Af(t,1,0))}function Fu(t){for(;t===Ba;)Ba=ms[--gs],ms[gs]=null,ja=ms[--gs],ms[gs]=null;for(;t===_i;)_i=un[--cn],un[cn]=null,ar=un[--cn],un[cn]=null,or=un[--cn],un[cn]=null}var Zt=null,en=null,Qe=!1,Rn=null;function Rf(t,r){var o=pn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Cf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Zt=t,en=Vr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Zt=t,en=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=_i!==null?{id:or,overflow:ar}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=pn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,Zt=t,en=null,!0):!1;default:return!1}}function Uu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zu(t){if(Qe){var r=en;if(r){var o=r;if(!Cf(t,r)){if(Uu(t))throw Error(n(418));r=Vr(o.nextSibling);var u=Zt;r&&Cf(t,r)?Rf(u,o):(t.flags=t.flags&-4097|2,Qe=!1,Zt=t)}}else{if(Uu(t))throw Error(n(418));t.flags=t.flags&-4097|2,Qe=!1,Zt=t}}}function Pf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function ba(t){if(t!==Zt)return!1;if(!Qe)return Pf(t),Qe=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Vu(t.type,t.memoizedProps)),r&&(r=en)){if(Uu(t))throw kf(),Error(n(418));for(;r;)Rf(t,r),r=Vr(r.nextSibling)}if(Pf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){en=Vr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}en=null}}else en=Zt?Vr(t.stateNode.nextSibling):null;return!0}function kf(){for(var t=en;t;)t=Vr(t.nextSibling)}function ys(){en=Zt=null,Qe=!1}function Bu(t){Rn===null?Rn=[t]:Rn.push(t)}var iy=Ie.ReactCurrentBatchConfig;function Co(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(y){var w=h.refs;y===null?delete w[p]:w[p]=y},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function $a(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Vf(t){var r=t._init;return r(t._payload)}function xf(t){function r(M,C){if(t){var O=M.deletions;O===null?(M.deletions=[C],M.flags|=16):O.push(C)}}function o(M,C){if(!t)return null;for(;C!==null;)r(M,C),C=C.sibling;return null}function u(M,C){for(M=new Map;C!==null;)C.key!==null?M.set(C.key,C):M.set(C.index,C),C=C.sibling;return M}function h(M,C){return M=jr(M,C),M.index=0,M.sibling=null,M}function p(M,C,O){return M.index=O,t?(O=M.alternate,O!==null?(O=O.index,O<C?(M.flags|=2,C):O):(M.flags|=2,C)):(M.flags|=1048576,C)}function y(M){return t&&M.alternate===null&&(M.flags|=2),M}function w(M,C,O,K){return C===null||C.tag!==6?(C=xc(O,M.mode,K),C.return=M,C):(C=h(C,O),C.return=M,C)}function R(M,C,O,K){var se=O.type;return se===V?H(M,C,O.props.children,K,O.key):C!==null&&(C.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Pt&&Vf(se)===C.type)?(K=h(C,O.props),K.ref=Co(M,C,O),K.return=M,K):(K=dl(O.type,O.key,O.props,null,M.mode,K),K.ref=Co(M,C,O),K.return=M,K)}function U(M,C,O,K){return C===null||C.tag!==4||C.stateNode.containerInfo!==O.containerInfo||C.stateNode.implementation!==O.implementation?(C=Nc(O,M.mode,K),C.return=M,C):(C=h(C,O.children||[]),C.return=M,C)}function H(M,C,O,K,se){return C===null||C.tag!==7?(C=Ci(O,M.mode,K,se),C.return=M,C):(C=h(C,O),C.return=M,C)}function W(M,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return C=xc(""+C,M.mode,O),C.return=M,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case He:return O=dl(C.type,C.key,C.props,null,M.mode,O),O.ref=Co(M,null,C),O.return=M,O;case Ae:return C=Nc(C,M.mode,O),C.return=M,C;case Pt:var K=C._init;return W(M,K(C._payload),O)}if(Gn(C)||ae(C))return C=Ci(C,M.mode,O,null),C.return=M,C;$a(M,C)}return null}function $(M,C,O,K){var se=C!==null?C.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return se!==null?null:w(M,C,""+O,K);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case He:return O.key===se?R(M,C,O,K):null;case Ae:return O.key===se?U(M,C,O,K):null;case Pt:return se=O._init,$(M,C,se(O._payload),K)}if(Gn(O)||ae(O))return se!==null?null:H(M,C,O,K,null);$a(M,O)}return null}function Z(M,C,O,K,se){if(typeof K=="string"&&K!==""||typeof K=="number")return M=M.get(O)||null,w(C,M,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case He:return M=M.get(K.key===null?O:K.key)||null,R(C,M,K,se);case Ae:return M=M.get(K.key===null?O:K.key)||null,U(C,M,K,se);case Pt:var ue=K._init;return Z(M,C,O,ue(K._payload),se)}if(Gn(K)||ae(K))return M=M.get(O)||null,H(C,M,K,se,null);$a(C,K)}return null}function re(M,C,O,K){for(var se=null,ue=null,ce=C,de=C=0,_t=null;ce!==null&&de<O.length;de++){ce.index>de?(_t=ce,ce=null):_t=ce.sibling;var De=$(M,ce,O[de],K);if(De===null){ce===null&&(ce=_t);break}t&&ce&&De.alternate===null&&r(M,ce),C=p(De,C,de),ue===null?se=De:ue.sibling=De,ue=De,ce=_t}if(de===O.length)return o(M,ce),Qe&&vi(M,de),se;if(ce===null){for(;de<O.length;de++)ce=W(M,O[de],K),ce!==null&&(C=p(ce,C,de),ue===null?se=ce:ue.sibling=ce,ue=ce);return Qe&&vi(M,de),se}for(ce=u(M,ce);de<O.length;de++)_t=Z(ce,M,de,O[de],K),_t!==null&&(t&&_t.alternate!==null&&ce.delete(_t.key===null?de:_t.key),C=p(_t,C,de),ue===null?se=_t:ue.sibling=_t,ue=_t);return t&&ce.forEach(function(br){return r(M,br)}),Qe&&vi(M,de),se}function ie(M,C,O,K){var se=ae(O);if(typeof se!="function")throw Error(n(150));if(O=se.call(O),O==null)throw Error(n(151));for(var ue=se=null,ce=C,de=C=0,_t=null,De=O.next();ce!==null&&!De.done;de++,De=O.next()){ce.index>de?(_t=ce,ce=null):_t=ce.sibling;var br=$(M,ce,De.value,K);if(br===null){ce===null&&(ce=_t);break}t&&ce&&br.alternate===null&&r(M,ce),C=p(br,C,de),ue===null?se=br:ue.sibling=br,ue=br,ce=_t}if(De.done)return o(M,ce),Qe&&vi(M,de),se;if(ce===null){for(;!De.done;de++,De=O.next())De=W(M,De.value,K),De!==null&&(C=p(De,C,de),ue===null?se=De:ue.sibling=De,ue=De);return Qe&&vi(M,de),se}for(ce=u(M,ce);!De.done;de++,De=O.next())De=Z(ce,M,de,De.value,K),De!==null&&(t&&De.alternate!==null&&ce.delete(De.key===null?de:De.key),C=p(De,C,de),ue===null?se=De:ue.sibling=De,ue=De);return t&&ce.forEach(function(Oy){return r(M,Oy)}),Qe&&vi(M,de),se}function tt(M,C,O,K){if(typeof O=="object"&&O!==null&&O.type===V&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case He:e:{for(var se=O.key,ue=C;ue!==null;){if(ue.key===se){if(se=O.type,se===V){if(ue.tag===7){o(M,ue.sibling),C=h(ue,O.props.children),C.return=M,M=C;break e}}else if(ue.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Pt&&Vf(se)===ue.type){o(M,ue.sibling),C=h(ue,O.props),C.ref=Co(M,ue,O),C.return=M,M=C;break e}o(M,ue);break}else r(M,ue);ue=ue.sibling}O.type===V?(C=Ci(O.props.children,M.mode,K,O.key),C.return=M,M=C):(K=dl(O.type,O.key,O.props,null,M.mode,K),K.ref=Co(M,C,O),K.return=M,M=K)}return y(M);case Ae:e:{for(ue=O.key;C!==null;){if(C.key===ue)if(C.tag===4&&C.stateNode.containerInfo===O.containerInfo&&C.stateNode.implementation===O.implementation){o(M,C.sibling),C=h(C,O.children||[]),C.return=M,M=C;break e}else{o(M,C);break}else r(M,C);C=C.sibling}C=Nc(O,M.mode,K),C.return=M,M=C}return y(M);case Pt:return ue=O._init,tt(M,C,ue(O._payload),K)}if(Gn(O))return re(M,C,O,K);if(ae(O))return ie(M,C,O,K);$a(M,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,C!==null&&C.tag===6?(o(M,C.sibling),C=h(C,O),C.return=M,M=C):(o(M,C),C=xc(O,M.mode,K),C.return=M,M=C),y(M)):o(M,C)}return tt}var _s=xf(!0),Nf=xf(!1),qa=xr(null),Ha=null,vs=null,ju=null;function bu(){ju=vs=Ha=null}function $u(t){var r=qa.current;qe(qa),t._currentValue=r}function qu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Es(t,r){Ha=t,ju=vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(qt=!0),t.firstContext=null)}function hn(t){var r=t._currentValue;if(ju!==t)if(t={context:t,memoizedValue:r,next:null},vs===null){if(Ha===null)throw Error(n(308));vs=t,Ha.dependencies={lanes:0,firstContext:t}}else vs=vs.next=t;return r}var Ei=null;function Hu(t){Ei===null?Ei=[t]:Ei.push(t)}function Df(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,Hu(r)):(o.next=h.next,h.next=o),r.interleaved=o,lr(t,u)}function lr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Lr=!1;function Wu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Mr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,Ne&2){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,lr(t,o)}return h=u.interleaved,h===null?(r.next=r,Hu(u)):(r.next=h.next,h.next=r),u.interleaved=r,lr(t,o)}function Wa(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Sr(t,o)}}function Mf(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var y={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=y:p=p.next=y,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Qa(t,r,o,u){var h=t.updateQueue;Lr=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var R=w,U=R.next;R.next=null,y===null?p=U:y.next=U,y=R;var H=t.alternate;H!==null&&(H=H.updateQueue,w=H.lastBaseUpdate,w!==y&&(w===null?H.firstBaseUpdate=U:w.next=U,H.lastBaseUpdate=R))}if(p!==null){var W=h.baseState;y=0,H=U=R=null,w=p;do{var $=w.lane,Z=w.eventTime;if((u&$)===$){H!==null&&(H=H.next={eventTime:Z,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var re=t,ie=w;switch($=r,Z=o,ie.tag){case 1:if(re=ie.payload,typeof re=="function"){W=re.call(Z,W,$);break e}W=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ie.payload,$=typeof re=="function"?re.call(Z,W,$):re,$==null)break e;W=ee({},W,$);break e;case 2:Lr=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,$=h.effects,$===null?h.effects=[w]:$.push(w))}else Z={eventTime:Z,lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},H===null?(U=H=Z,R=W):H=H.next=Z,y|=$;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;$=w,w=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);if(H===null&&(R=W),h.baseState=R,h.firstBaseUpdate=U,h.lastBaseUpdate=H,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Ii|=y,t.lanes=y,t.memoizedState=W}}function Of(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Po={},Bn=xr(Po),ko=xr(Po),Vo=xr(Po);function wi(t){if(t===Po)throw Error(n(174));return t}function Qu(t,r){switch(be(Vo,r),be(ko,t),be(Bn,Po),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:at(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=at(r,t)}qe(Bn),be(Bn,r)}function ws(){qe(Bn),qe(ko),qe(Vo)}function Ff(t){wi(Vo.current);var r=wi(Bn.current),o=at(r,t.type);r!==o&&(be(ko,t),be(Bn,o))}function Ku(t){ko.current===t&&(qe(Bn),qe(ko))}var Ge=xr(0);function Ka(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Gu=[];function Xu(){for(var t=0;t<Gu.length;t++)Gu[t]._workInProgressVersionPrimary=null;Gu.length=0}var Ga=Ie.ReactCurrentDispatcher,Yu=Ie.ReactCurrentBatchConfig,Ti=0,Xe=null,ut=null,gt=null,Xa=!1,xo=!1,No=0,sy=0;function Vt(){throw Error(n(321))}function Ju(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!An(t[o],r[o]))return!1;return!0}function Zu(t,r,o,u,h,p){if(Ti=p,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ga.current=t===null||t.memoizedState===null?uy:cy,t=o(u,h),xo){p=0;do{if(xo=!1,No=0,25<=p)throw Error(n(301));p+=1,gt=ut=null,r.updateQueue=null,Ga.current=hy,t=o(u,h)}while(xo)}if(Ga.current=Za,r=ut!==null&&ut.next!==null,Ti=0,gt=ut=Xe=null,Xa=!1,r)throw Error(n(300));return t}function ec(){var t=No!==0;return No=0,t}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Xe.memoizedState=gt=t:gt=gt.next=t,gt}function fn(){if(ut===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var r=gt===null?Xe.memoizedState:gt.next;if(r!==null)gt=r,ut=t;else{if(t===null)throw Error(n(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},gt===null?Xe.memoizedState=gt=t:gt=gt.next=t}return gt}function Do(t,r){return typeof r=="function"?r(t):r}function tc(t){var r=fn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=ut,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var w=y=null,R=null,U=p;do{var H=U.lane;if((Ti&H)===H)R!==null&&(R=R.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var W={lane:H,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};R===null?(w=R=W,y=u):R=R.next=W,Xe.lanes|=H,Ii|=H}U=U.next}while(U!==null&&U!==p);R===null?y=u:R.next=w,An(u,r.memoizedState)||(qt=!0),r.memoizedState=u,r.baseState=y,r.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Xe.lanes|=p,Ii|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function nc(t){var r=fn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var y=h=h.next;do p=t(p,y.action),y=y.next;while(y!==h);An(p,r.memoizedState)||(qt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Uf(){}function zf(t,r){var o=Xe,u=fn(),h=r(),p=!An(u.memoizedState,h);if(p&&(u.memoizedState=h,qt=!0),u=u.queue,rc(bf.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||gt!==null&&gt.memoizedState.tag&1){if(o.flags|=2048,Lo(9,jf.bind(null,o,u,h,r),void 0,null),yt===null)throw Error(n(349));Ti&30||Bf(o,r,h)}return h}function Bf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function jf(t,r,o,u){r.value=o,r.getSnapshot=u,$f(r)&&qf(t)}function bf(t,r,o){return o(function(){$f(r)&&qf(t)})}function $f(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!An(t,o)}catch{return!0}}function qf(t){var r=lr(t,1);r!==null&&Vn(r,t,1,-1)}function Hf(t){var r=jn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:t},r.queue=t,t=t.dispatch=ly.bind(null,Xe,t),[r.memoizedState,t]}function Lo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Wf(){return fn().memoizedState}function Ya(t,r,o,u){var h=jn();Xe.flags|=t,h.memoizedState=Lo(1|r,o,void 0,u===void 0?null:u)}function Ja(t,r,o,u){var h=fn();u=u===void 0?null:u;var p=void 0;if(ut!==null){var y=ut.memoizedState;if(p=y.destroy,u!==null&&Ju(u,y.deps)){h.memoizedState=Lo(r,o,p,u);return}}Xe.flags|=t,h.memoizedState=Lo(1|r,o,p,u)}function Qf(t,r){return Ya(8390656,8,t,r)}function rc(t,r){return Ja(2048,8,t,r)}function Kf(t,r){return Ja(4,2,t,r)}function Gf(t,r){return Ja(4,4,t,r)}function Xf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Yf(t,r,o){return o=o!=null?o.concat([t]):null,Ja(4,4,Xf.bind(null,r,t),o)}function ic(){}function Jf(t,r){var o=fn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Ju(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Zf(t,r){var o=fn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Ju(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function ed(t,r,o){return Ti&21?(An(o,r)||(o=hi(),Xe.lanes|=o,Ii|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=o)}function oy(t,r){var o=Re;Re=o!==0&&4>o?o:4,t(!0);var u=Yu.transition;Yu.transition={};try{t(!1),r()}finally{Re=o,Yu.transition=u}}function td(){return fn().memoizedState}function ay(t,r,o){var u=zr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},nd(t))rd(r,o);else if(o=Df(t,r,o,u),o!==null){var h=zt();Vn(o,t,u,h),id(o,r,u)}}function ly(t,r,o){var u=zr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(nd(t))rd(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var y=r.lastRenderedState,w=p(y,o);if(h.hasEagerState=!0,h.eagerState=w,An(w,y)){var R=r.interleaved;R===null?(h.next=h,Hu(r)):(h.next=R.next,R.next=h),r.interleaved=h;return}}catch{}finally{}o=Df(t,r,h,u),o!==null&&(h=zt(),Vn(o,t,u,h),id(o,r,u))}}function nd(t){var r=t.alternate;return t===Xe||r!==null&&r===Xe}function rd(t,r){xo=Xa=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function id(t,r,o){if(o&4194240){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Sr(t,o)}}var Za={readContext:hn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},uy={readContext:hn,useCallback:function(t,r){return jn().memoizedState=[t,r===void 0?null:r],t},useContext:hn,useEffect:Qf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,Ya(4194308,4,Xf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return Ya(4194308,4,t,r)},useInsertionEffect:function(t,r){return Ya(4,2,t,r)},useMemo:function(t,r){var o=jn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=jn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=ay.bind(null,Xe,t),[u.memoizedState,t]},useRef:function(t){var r=jn();return t={current:t},r.memoizedState=t},useState:Hf,useDebugValue:ic,useDeferredValue:function(t){return jn().memoizedState=t},useTransition:function(){var t=Hf(!1),r=t[0];return t=oy.bind(null,t[1]),jn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Xe,h=jn();if(Qe){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),yt===null)throw Error(n(349));Ti&30||Bf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,Qf(bf.bind(null,u,p,t),[t]),u.flags|=2048,Lo(9,jf.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=jn(),r=yt.identifierPrefix;if(Qe){var o=ar,u=or;o=(u&~(1<<32-Ot(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=No++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=sy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},cy={readContext:hn,useCallback:Jf,useContext:hn,useEffect:rc,useImperativeHandle:Yf,useInsertionEffect:Kf,useLayoutEffect:Gf,useMemo:Zf,useReducer:tc,useRef:Wf,useState:function(){return tc(Do)},useDebugValue:ic,useDeferredValue:function(t){var r=fn();return ed(r,ut.memoizedState,t)},useTransition:function(){var t=tc(Do)[0],r=fn().memoizedState;return[t,r]},useMutableSource:Uf,useSyncExternalStore:zf,useId:td,unstable_isNewReconciler:!1},hy={readContext:hn,useCallback:Jf,useContext:hn,useEffect:rc,useImperativeHandle:Yf,useInsertionEffect:Kf,useLayoutEffect:Gf,useMemo:Zf,useReducer:nc,useRef:Wf,useState:function(){return nc(Do)},useDebugValue:ic,useDeferredValue:function(t){var r=fn();return ut===null?r.memoizedState=t:ed(r,ut.memoizedState,t)},useTransition:function(){var t=nc(Do)[0],r=fn().memoizedState;return[t,r]},useMutableSource:Uf,useSyncExternalStore:zf,useId:td,unstable_isNewReconciler:!1};function Cn(t,r){if(t&&t.defaultProps){r=ee({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function sc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ee({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var el={isMounted:function(t){return(t=t._reactInternals)?_n(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=zt(),h=zr(t),p=ur(u,h);p.payload=r,o!=null&&(p.callback=o),r=Mr(t,p,h),r!==null&&(Vn(r,t,h,u),Wa(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=zt(),h=zr(t),p=ur(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Mr(t,p,h),r!==null&&(Vn(r,t,h,u),Wa(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=zt(),u=zr(t),h=ur(o,u);h.tag=2,r!=null&&(h.callback=r),r=Mr(t,h,u),r!==null&&(Vn(r,t,u,o),Wa(r,t,u))}};function sd(t,r,o,u,h,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):r.prototype&&r.prototype.isPureReactComponent?!Eo(o,u)||!Eo(h,p):!0}function od(t,r,o){var u=!1,h=Nr,p=r.contextType;return typeof p=="object"&&p!==null?p=hn(p):(h=$t(r)?yi:kt.current,u=r.contextTypes,p=(u=u!=null)?ps(t,h):Nr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=el,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function ad(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&el.enqueueReplaceState(r,r.state,null)}function oc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Wu(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=hn(p):(p=$t(r)?yi:kt.current,h.context=ps(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(sc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&el.enqueueReplaceState(h,h.state,null),Qa(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Ts(t,r){try{var o="",u=r;do o+=we(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function ac(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function lc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var fy=typeof WeakMap=="function"?WeakMap:Map;function ld(t,r,o){o=ur(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){al||(al=!0,Ic=u),lc(t,r)},o}function ud(t,r,o){o=ur(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){lc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){lc(t,r),typeof u!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),o}function cd(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new fy;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=Ry.bind(null,t,r,o),r.then(t,t))}function hd(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function fd(t,r,o,u,h){return t.mode&1?(t.flags|=65536,t.lanes=h,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=ur(-1,1),r.tag=2,Mr(o,r,1))),o.lanes|=1),t)}var dy=Ie.ReactCurrentOwner,qt=!1;function Ut(t,r,o,u){r.child=t===null?Nf(r,null,o,u):_s(r,t.child,o,u)}function dd(t,r,o,u,h){o=o.render;var p=r.ref;return Es(r,h),u=Zu(t,r,o,u,p,h),o=ec(),t!==null&&!qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,cr(t,r,h)):(Qe&&o&&Ou(r),r.flags|=1,Ut(t,r,u,h),r.child)}function pd(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Vc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,md(t,r,p,u,h)):(t=dl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&h)){var y=p.memoizedProps;if(o=o.compare,o=o!==null?o:Eo,o(y,u)&&t.ref===r.ref)return cr(t,r,h)}return r.flags|=1,t=jr(p,u),t.ref=r.ref,t.return=r,r.child=t}function md(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(Eo(p,u)&&t.ref===r.ref)if(qt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)t.flags&131072&&(qt=!0);else return r.lanes=t.lanes,cr(t,r,h)}return uc(t,r,o,u,h)}function gd(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ss,tn),tn|=o;else{if(!(o&1073741824))return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,be(Ss,tn),tn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,be(Ss,tn),tn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,be(Ss,tn),tn|=u;return Ut(t,r,h,o),r.child}function yd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function uc(t,r,o,u,h){var p=$t(o)?yi:kt.current;return p=ps(r,p),Es(r,h),o=Zu(t,r,o,u,p,h),u=ec(),t!==null&&!qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,cr(t,r,h)):(Qe&&u&&Ou(r),r.flags|=1,Ut(t,r,o,h),r.child)}function _d(t,r,o,u,h){if($t(o)){var p=!0;Ua(r)}else p=!1;if(Es(r,h),r.stateNode===null)nl(t,r),od(r,o,u),oc(r,o,u,h),u=!0;else if(t===null){var y=r.stateNode,w=r.memoizedProps;y.props=w;var R=y.context,U=o.contextType;typeof U=="object"&&U!==null?U=hn(U):(U=$t(o)?yi:kt.current,U=ps(r,U));var H=o.getDerivedStateFromProps,W=typeof H=="function"||typeof y.getSnapshotBeforeUpdate=="function";W||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==u||R!==U)&&ad(r,y,u,U),Lr=!1;var $=r.memoizedState;y.state=$,Qa(r,u,y,h),R=r.memoizedState,w!==u||$!==R||bt.current||Lr?(typeof H=="function"&&(sc(r,o,H,u),R=r.memoizedState),(w=Lr||sd(r,o,w,u,$,R,U))?(W||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=R),y.props=u,y.state=R,y.context=U,u=w):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,Lf(t,r),w=r.memoizedProps,U=r.type===r.elementType?w:Cn(r.type,w),y.props=U,W=r.pendingProps,$=y.context,R=o.contextType,typeof R=="object"&&R!==null?R=hn(R):(R=$t(o)?yi:kt.current,R=ps(r,R));var Z=o.getDerivedStateFromProps;(H=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==W||$!==R)&&ad(r,y,u,R),Lr=!1,$=r.memoizedState,y.state=$,Qa(r,u,y,h);var re=r.memoizedState;w!==W||$!==re||bt.current||Lr?(typeof Z=="function"&&(sc(r,o,Z,u),re=r.memoizedState),(U=Lr||sd(r,o,U,u,$,re,R)||!1)?(H||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,re,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,re,R)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=re),y.props=u,y.state=re,y.context=R,u=U):(typeof y.componentDidUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),u=!1)}return cc(t,r,o,u,p,h)}function cc(t,r,o,u,h,p){yd(t,r);var y=(r.flags&128)!==0;if(!u&&!y)return h&&If(r,o,!1),cr(t,r,p);u=r.stateNode,dy.current=r;var w=y&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&y?(r.child=_s(r,t.child,null,p),r.child=_s(r,null,w,p)):Ut(t,r,w,p),r.memoizedState=u.state,h&&If(r,o,!0),r.child}function vd(t){var r=t.stateNode;r.pendingContext?wf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&wf(t,r.context,!1),Qu(t,r.containerInfo)}function Ed(t,r,o,u,h){return ys(),Bu(h),r.flags|=256,Ut(t,r,o,u),r.child}var hc={dehydrated:null,treeContext:null,retryLane:0};function fc(t){return{baseLanes:t,cachePool:null,transitions:null}}function wd(t,r,o){var u=r.pendingProps,h=Ge.current,p=!1,y=(r.flags&128)!==0,w;if((w=y)||(w=t!==null&&t.memoizedState===null?!1:(h&2)!==0),w?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),be(Ge,h&1),t===null)return zu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(y=u.children,t=u.fallback,p?(u=r.mode,p=r.child,y={mode:"hidden",children:y},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=y):p=pl(y,u,0,null),t=Ci(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=fc(o),r.memoizedState=hc,t):dc(r,y));if(h=t.memoizedState,h!==null&&(w=h.dehydrated,w!==null))return py(t,r,y,u,w,h,o);if(p){p=u.fallback,y=r.mode,h=t.child,w=h.sibling;var R={mode:"hidden",children:u.children};return!(y&1)&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=R,r.deletions=null):(u=jr(h,R),u.subtreeFlags=h.subtreeFlags&14680064),w!==null?p=jr(w,p):(p=Ci(p,y,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,y=t.child.memoizedState,y=y===null?fc(o):{baseLanes:y.baseLanes|o,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~o,r.memoizedState=hc,u}return p=t.child,t=p.sibling,u=jr(p,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function dc(t,r){return r=pl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function tl(t,r,o,u){return u!==null&&Bu(u),_s(r,t.child,null,o),t=dc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function py(t,r,o,u,h,p,y){if(o)return r.flags&256?(r.flags&=-257,u=ac(Error(n(422))),tl(t,r,y,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=pl({mode:"visible",children:u.children},h,0,null),p=Ci(p,h,y,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,r.mode&1&&_s(r,t.child,null,y),r.child.memoizedState=fc(y),r.memoizedState=hc,p);if(!(r.mode&1))return tl(t,r,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var w=u.dgst;return u=w,p=Error(n(419)),u=ac(p,u,void 0),tl(t,r,y,u)}if(w=(y&t.childLanes)!==0,qt||w){if(u=yt,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(u.suspendedLanes|y)?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,lr(t,h),Vn(u,t,h,-1))}return kc(),u=ac(Error(n(421))),tl(t,r,y,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Cy.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,en=Vr(h.nextSibling),Zt=r,Qe=!0,Rn=null,t!==null&&(un[cn++]=or,un[cn++]=ar,un[cn++]=_i,or=t.id,ar=t.overflow,_i=r),r=dc(r,u.children),r.flags|=4096,r)}function Td(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),qu(t.return,r,o)}function pc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Id(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Ut(t,r,u.children,o),u=Ge.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Td(t,o,r);else if(t.tag===19)Td(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(be(Ge,u),!(r.mode&1))r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&Ka(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),pc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Ka(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}pc(r,!0,o,null,p);break;case"together":pc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function nl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function cr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ii|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=jr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=jr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function my(t,r,o){switch(r.tag){case 3:vd(r),ys();break;case 5:Ff(r);break;case 1:$t(r.type)&&Ua(r);break;case 4:Qu(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;be(qa,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(be(Ge,Ge.current&1),r.flags|=128,null):o&r.child.childLanes?wd(t,r,o):(be(Ge,Ge.current&1),t=cr(t,r,o),t!==null?t.sibling:null);be(Ge,Ge.current&1);break;case 19:if(u=(o&r.childLanes)!==0,t.flags&128){if(u)return Id(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),be(Ge,Ge.current),u)break;return null;case 22:case 23:return r.lanes=0,gd(t,r,o)}return cr(t,r,o)}var Sd,mc,Ad,Rd;Sd=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},mc=function(){},Ad=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,wi(Bn.current);var p=null;switch(o){case"input":h=ei(t,h),u=ei(t,u),p=[];break;case"select":h=ee({},h,{value:void 0}),u=ee({},u,{value:void 0}),p=[];break;case"textarea":h=Ks(t,h),u=Ks(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Ma)}eo(o,u);var y;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var w=h[U];for(y in w)w.hasOwnProperty(y)&&(o||(o={}),o[y]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var R=u[U];if(w=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&R!==w&&(R!=null||w!=null))if(U==="style")if(w){for(y in w)!w.hasOwnProperty(y)||R&&R.hasOwnProperty(y)||(o||(o={}),o[y]="");for(y in R)R.hasOwnProperty(y)&&w[y]!==R[y]&&(o||(o={}),o[y]=R[y])}else o||(p||(p=[]),p.push(U,o)),o=R;else U==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,w=w?w.__html:void 0,R!=null&&w!==R&&(p=p||[]).push(U,R)):U==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(U,""+R):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(R!=null&&U==="onScroll"&&$e("scroll",t),p||w===R||(p=[])):(p=p||[]).push(U,R))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},Rd=function(t,r,o,u){o!==u&&(r.flags|=4)};function Mo(t,r){if(!Qe)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function xt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function gy(t,r,o){var u=r.pendingProps;switch(Fu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(r),null;case 1:return $t(r.type)&&Fa(),xt(r),null;case 3:return u=r.stateNode,ws(),qe(bt),qe(kt),Xu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(ba(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Rn!==null&&(Rc(Rn),Rn=null))),mc(t,r),xt(r),null;case 5:Ku(r);var h=wi(Vo.current);if(o=r.type,t!==null&&r.stateNode!=null)Ad(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return xt(r),null}if(t=wi(Bn.current),ba(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[zn]=r,u[Ao]=p,t=(r.mode&1)!==0,o){case"dialog":$e("cancel",u),$e("close",u);break;case"iframe":case"object":case"embed":$e("load",u);break;case"video":case"audio":for(h=0;h<To.length;h++)$e(To[h],u);break;case"source":$e("error",u);break;case"img":case"image":case"link":$e("error",u),$e("load",u);break;case"details":$e("toggle",u);break;case"input":Oi(u,p),$e("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},$e("invalid",u);break;case"textarea":Ui(u,p),$e("invalid",u)}eo(o,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var w=p[y];y==="children"?typeof w=="string"?u.textContent!==w&&(p.suppressHydrationWarning!==!0&&La(u.textContent,w,t),h=["children",w]):typeof w=="number"&&u.textContent!==""+w&&(p.suppressHydrationWarning!==!0&&La(u.textContent,w,t),h=["children",""+w]):a.hasOwnProperty(y)&&w!=null&&y==="onScroll"&&$e("scroll",u)}switch(o){case"input":Kn(u),oa(u,p,!0);break;case"textarea":Kn(u),Gs(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Ma)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ot(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=y.createElement(o,{is:u.is}):(t=y.createElement(o),o==="select"&&(y=t,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):t=y.createElementNS(t,o),t[zn]=r,t[Ao]=u,Sd(t,r,!1,!1),r.stateNode=t;e:{switch(y=to(o,u),o){case"dialog":$e("cancel",t),$e("close",t),h=u;break;case"iframe":case"object":case"embed":$e("load",t),h=u;break;case"video":case"audio":for(h=0;h<To.length;h++)$e(To[h],t);h=u;break;case"source":$e("error",t),h=u;break;case"img":case"image":case"link":$e("error",t),$e("load",t),h=u;break;case"details":$e("toggle",t),h=u;break;case"input":Oi(t,u),h=ei(t,u),$e("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ee({},u,{value:void 0}),$e("invalid",t);break;case"textarea":Ui(t,u),h=Ks(t,u),$e("invalid",t);break;default:h=u}eo(o,h),w=h;for(p in w)if(w.hasOwnProperty(p)){var R=w[p];p==="style"?Js(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Xs(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&vr(t,R):typeof R=="number"&&vr(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?R!=null&&p==="onScroll"&&$e("scroll",t):R!=null&&ve(t,p,R,y))}switch(o){case"input":Kn(t),oa(t,u,!1);break;case"textarea":Kn(t),Gs(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Me(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Xn(t,!!u.multiple,p,!1):u.defaultValue!=null&&Xn(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Ma)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return xt(r),null;case 6:if(t&&r.stateNode!=null)Rd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=wi(Vo.current),wi(Bn.current),ba(r)){if(u=r.stateNode,o=r.memoizedProps,u[zn]=r,(p=u.nodeValue!==o)&&(t=Zt,t!==null))switch(t.tag){case 3:La(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&La(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[zn]=r,r.stateNode=u}return xt(r),null;case 13:if(qe(Ge),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&en!==null&&r.mode&1&&!(r.flags&128))kf(),ys(),r.flags|=98560,p=!1;else if(p=ba(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[zn]=r}else ys(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;xt(r),p=!1}else Rn!==null&&(Rc(Rn),Rn=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,r.mode&1&&(t===null||Ge.current&1?ct===0&&(ct=3):kc())),r.updateQueue!==null&&(r.flags|=4),xt(r),null);case 4:return ws(),mc(t,r),t===null&&Io(r.stateNode.containerInfo),xt(r),null;case 10:return $u(r.type._context),xt(r),null;case 17:return $t(r.type)&&Fa(),xt(r),null;case 19:if(qe(Ge),p=r.memoizedState,p===null)return xt(r),null;if(u=(r.flags&128)!==0,y=p.rendering,y===null)if(u)Mo(p,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(y=Ka(t),y!==null){for(r.flags|=128,Mo(p,!1),u=y.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return be(Ge,Ge.current&1|2),r.child}t=t.sibling}p.tail!==null&&je()>As&&(r.flags|=128,u=!0,Mo(p,!1),r.lanes=4194304)}else{if(!u)if(t=Ka(y),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Mo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Qe)return xt(r),null}else 2*je()-p.renderingStartTime>As&&o!==1073741824&&(r.flags|=128,u=!0,Mo(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(o=p.last,o!==null?o.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=je(),r.sibling=null,o=Ge.current,be(Ge,u?o&1|2:o&1),r):(xt(r),null);case 22:case 23:return Pc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&r.mode&1?tn&1073741824&&(xt(r),r.subtreeFlags&6&&(r.flags|=8192)):xt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function yy(t,r){switch(Fu(r),r.tag){case 1:return $t(r.type)&&Fa(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ws(),qe(bt),qe(kt),Xu(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return Ku(r),null;case 13:if(qe(Ge),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ys()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return qe(Ge),null;case 4:return ws(),null;case 10:return $u(r.type._context),null;case 22:case 23:return Pc(),null;case 24:return null;default:return null}}var rl=!1,Nt=!1,_y=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Is(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Je(t,r,u)}else o.current=null}function gc(t,r,o){try{o()}catch(u){Je(t,r,u)}}var Cd=!1;function vy(t,r){if(Pu=Cr,t=sf(),Eu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var y=0,w=-1,R=-1,U=0,H=0,W=t,$=null;t:for(;;){for(var Z;W!==o||h!==0&&W.nodeType!==3||(w=y+h),W!==p||u!==0&&W.nodeType!==3||(R=y+u),W.nodeType===3&&(y+=W.nodeValue.length),(Z=W.firstChild)!==null;)$=W,W=Z;for(;;){if(W===t)break t;if($===o&&++U===h&&(w=y),$===p&&++H===u&&(R=y),(Z=W.nextSibling)!==null)break;W=$,$=W.parentNode}W=Z}o=w===-1||R===-1?null:{start:w,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(ku={focusedElem:t,selectionRange:o},Cr=!1,ne=r;ne!==null;)if(r=ne,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ne=t;else for(;ne!==null;){r=ne;try{var re=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ie=re.memoizedProps,tt=re.memoizedState,M=r.stateNode,C=M.getSnapshotBeforeUpdate(r.elementType===r.type?ie:Cn(r.type,ie),tt);M.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var O=r.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){Je(r,r.return,K)}if(t=r.sibling,t!==null){t.return=r.return,ne=t;break}ne=r.return}return re=Cd,Cd=!1,re}function Oo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&gc(r,o,p)}h=h.next}while(h!==u)}}function il(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function yc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Pd(t){var r=t.alternate;r!==null&&(t.alternate=null,Pd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[zn],delete r[Ao],delete r[Du],delete r[ty],delete r[ny])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kd(t){return t.tag===5||t.tag===3||t.tag===4}function Vd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _c(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ma));else if(u!==4&&(t=t.child,t!==null))for(_c(t,r,o),t=t.sibling;t!==null;)_c(t,r,o),t=t.sibling}function vc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(vc(t,r,o),t=t.sibling;t!==null;)vc(t,r,o),t=t.sibling}var Tt=null,Pn=!1;function Or(t,r,o){for(o=o.child;o!==null;)xd(t,r,o),o=o.sibling}function xd(t,r,o){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ui,o)}catch{}switch(o.tag){case 5:Nt||Is(o,r);case 6:var u=Tt,h=Pn;Tt=null,Or(t,r,o),Tt=u,Pn=h,Tt!==null&&(Pn?(t=Tt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Tt.removeChild(o.stateNode));break;case 18:Tt!==null&&(Pn?(t=Tt,o=o.stateNode,t.nodeType===8?Nu(t.parentNode,o):t.nodeType===1&&Nu(t,o),In(t)):Nu(Tt,o.stateNode));break;case 4:u=Tt,h=Pn,Tt=o.stateNode.containerInfo,Pn=!0,Or(t,r,o),Tt=u,Pn=h;break;case 0:case 11:case 14:case 15:if(!Nt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&(p&2||p&4)&&gc(o,r,y),h=h.next}while(h!==u)}Or(t,r,o);break;case 1:if(!Nt&&(Is(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(w){Je(o,r,w)}Or(t,r,o);break;case 21:Or(t,r,o);break;case 22:o.mode&1?(Nt=(u=Nt)||o.memoizedState!==null,Or(t,r,o),Nt=u):Or(t,r,o);break;default:Or(t,r,o)}}function Nd(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new _y),r.forEach(function(u){var h=Py.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function kn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,y=r,w=y;e:for(;w!==null;){switch(w.tag){case 5:Tt=w.stateNode,Pn=!1;break e;case 3:Tt=w.stateNode.containerInfo,Pn=!0;break e;case 4:Tt=w.stateNode.containerInfo,Pn=!0;break e}w=w.return}if(Tt===null)throw Error(n(160));xd(p,y,h),Tt=null,Pn=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(U){Je(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Dd(r,t),r=r.sibling}function Dd(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(r,t),bn(t),u&4){try{Oo(3,t,t.return),il(3,t)}catch(ie){Je(t,t.return,ie)}try{Oo(5,t,t.return)}catch(ie){Je(t,t.return,ie)}}break;case 1:kn(r,t),bn(t),u&512&&o!==null&&Is(o,o.return);break;case 5:if(kn(r,t),bn(t),u&512&&o!==null&&Is(o,o.return),t.flags&32){var h=t.stateNode;try{vr(h,"")}catch(ie){Je(t,t.return,ie)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,y=o!==null?o.memoizedProps:p,w=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{w==="input"&&p.type==="radio"&&p.name!=null&&Ws(h,p),to(w,y);var U=to(w,p);for(y=0;y<R.length;y+=2){var H=R[y],W=R[y+1];H==="style"?Js(h,W):H==="dangerouslySetInnerHTML"?Xs(h,W):H==="children"?vr(h,W):ve(h,H,W,U)}switch(w){case"input":Qs(h,p);break;case"textarea":zi(h,p);break;case"select":var $=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var Z=p.value;Z!=null?Xn(h,!!p.multiple,Z,!1):$!==!!p.multiple&&(p.defaultValue!=null?Xn(h,!!p.multiple,p.defaultValue,!0):Xn(h,!!p.multiple,p.multiple?[]:"",!1))}h[Ao]=p}catch(ie){Je(t,t.return,ie)}}break;case 6:if(kn(r,t),bn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ie){Je(t,t.return,ie)}}break;case 3:if(kn(r,t),bn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{In(r.containerInfo)}catch(ie){Je(t,t.return,ie)}break;case 4:kn(r,t),bn(t);break;case 13:kn(r,t),bn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Tc=je())),u&4&&Nd(t);break;case 22:if(H=o!==null&&o.memoizedState!==null,t.mode&1?(Nt=(U=Nt)||H,kn(r,t),Nt=U):kn(r,t),bn(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!H&&t.mode&1)for(ne=t,H=t.child;H!==null;){for(W=ne=H;ne!==null;){switch($=ne,Z=$.child,$.tag){case 0:case 11:case 14:case 15:Oo(4,$,$.return);break;case 1:Is($,$.return);var re=$.stateNode;if(typeof re.componentWillUnmount=="function"){u=$,o=$.return;try{r=u,re.props=r.memoizedProps,re.state=r.memoizedState,re.componentWillUnmount()}catch(ie){Je(u,o,ie)}}break;case 5:Is($,$.return);break;case 22:if($.memoizedState!==null){Od(W);continue}}Z!==null?(Z.return=$,ne=Z):Od(W)}H=H.sibling}e:for(H=null,W=t;;){if(W.tag===5){if(H===null){H=W;try{h=W.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(w=W.stateNode,R=W.memoizedProps.style,y=R!=null&&R.hasOwnProperty("display")?R.display:null,w.style.display=Ys("display",y))}catch(ie){Je(t,t.return,ie)}}}else if(W.tag===6){if(H===null)try{W.stateNode.nodeValue=U?"":W.memoizedProps}catch(ie){Je(t,t.return,ie)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===t)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===t)break e;for(;W.sibling===null;){if(W.return===null||W.return===t)break e;H===W&&(H=null),W=W.return}H===W&&(H=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:kn(r,t),bn(t),u&4&&Nd(t);break;case 21:break;default:kn(r,t),bn(t)}}function bn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(kd(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(vr(h,""),u.flags&=-33);var p=Vd(t);vc(t,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,w=Vd(t);_c(t,w,y);break;default:throw Error(n(161))}}catch(R){Je(t,t.return,R)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Ey(t,r,o){ne=t,Ld(t)}function Ld(t,r,o){for(var u=(t.mode&1)!==0;ne!==null;){var h=ne,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||rl;if(!y){var w=h.alternate,R=w!==null&&w.memoizedState!==null||Nt;w=rl;var U=Nt;if(rl=y,(Nt=R)&&!U)for(ne=h;ne!==null;)y=ne,R=y.child,y.tag===22&&y.memoizedState!==null?Fd(h):R!==null?(R.return=y,ne=R):Fd(h);for(;p!==null;)ne=p,Ld(p),p=p.sibling;ne=h,rl=w,Nt=U}Md(t)}else h.subtreeFlags&8772&&p!==null?(p.return=h,ne=p):Md(t)}}function Md(t){for(;ne!==null;){var r=ne;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Nt||il(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Nt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Cn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Of(r,p,u);break;case 3:var y=r.updateQueue;if(y!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Of(r,y,o)}break;case 5:var w=r.stateNode;if(o===null&&r.flags&4){o=w;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var H=U.memoizedState;if(H!==null){var W=H.dehydrated;W!==null&&In(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Nt||r.flags&512&&yc(r)}catch($){Je(r,r.return,$)}}if(r===t){ne=null;break}if(o=r.sibling,o!==null){o.return=r.return,ne=o;break}ne=r.return}}function Od(t){for(;ne!==null;){var r=ne;if(r===t){ne=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ne=o;break}ne=r.return}}function Fd(t){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{il(4,r)}catch(R){Je(r,o,R)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(R){Je(r,h,R)}}var p=r.return;try{yc(r)}catch(R){Je(r,p,R)}break;case 5:var y=r.return;try{yc(r)}catch(R){Je(r,y,R)}}}catch(R){Je(r,r.return,R)}if(r===t){ne=null;break}var w=r.sibling;if(w!==null){w.return=r.return,ne=w;break}ne=r.return}}var wy=Math.ceil,sl=Ie.ReactCurrentDispatcher,Ec=Ie.ReactCurrentOwner,dn=Ie.ReactCurrentBatchConfig,Ne=0,yt=null,it=null,It=0,tn=0,Ss=xr(0),ct=0,Fo=null,Ii=0,ol=0,wc=0,Uo=null,Ht=null,Tc=0,As=1/0,hr=null,al=!1,Ic=null,Fr=null,ll=!1,Ur=null,ul=0,zo=0,Sc=null,cl=-1,hl=0;function zt(){return Ne&6?je():cl!==-1?cl:cl=je()}function zr(t){return t.mode&1?Ne&2&&It!==0?It&-It:iy.transition!==null?(hl===0&&(hl=hi()),hl):(t=Re,t!==0||(t=window.event,t=t===void 0?16:fo(t.type)),t):1}function Vn(t,r,o,u){if(50<zo)throw zo=0,Sc=null,Error(n(185));Ir(t,o,u),(!(Ne&2)||t!==yt)&&(t===yt&&(!(Ne&2)&&(ol|=o),ct===4&&Br(t,It)),Wt(t,u),o===1&&Ne===0&&!(r.mode&1)&&(As=je()+500,za&&Dr()))}function Wt(t,r){var o=t.callbackNode;Zn(t,r);var u=ci(t,t===yt?It:0);if(u===0)o!==null&&ao(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&ao(o),r===1)t.tag===0?ry(zd.bind(null,t)):Sf(zd.bind(null,t)),Zg(function(){!(Ne&6)&&Dr()}),o=null;else{switch(Ar(u)){case 1:o=li;break;case 4:o=Er;break;case 16:o=on;break;case 536870912:o=ha;break;default:o=on}o=Qd(o,Ud.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Ud(t,r){if(cl=-1,hl=0,Ne&6)throw Error(n(327));var o=t.callbackNode;if(Rs()&&t.callbackNode!==o)return null;var u=ci(t,t===yt?It:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=fl(t,u);else{r=u;var h=Ne;Ne|=2;var p=jd();(yt!==t||It!==r)&&(hr=null,As=je()+500,Ai(t,r));do try{Sy();break}catch(w){Bd(t,w)}while(!0);bu(),sl.current=p,Ne=h,it!==null?r=0:(yt=null,It=0,r=ct)}if(r!==0){if(r===2&&(h=Xt(t),h!==0&&(u=h,r=Ac(t,h))),r===1)throw o=Fo,Ai(t,0),Br(t,u),Wt(t,je()),o;if(r===6)Br(t,u);else{if(h=t.current.alternate,!(u&30)&&!Ty(h)&&(r=fl(t,u),r===2&&(p=Xt(t),p!==0&&(u=p,r=Ac(t,p))),r===1))throw o=Fo,Ai(t,0),Br(t,u),Wt(t,je()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Ri(t,Ht,hr);break;case 3:if(Br(t,u),(u&130023424)===u&&(r=Tc+500-je(),10<r)){if(ci(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){zt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=xu(Ri.bind(null,t,Ht,hr),r);break}Ri(t,Ht,hr);break;case 4:if(Br(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var y=31-Ot(u);p=1<<y,y=r[y],y>h&&(h=y),u&=~p}if(u=h,u=je()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*wy(u/1960))-u,10<u){t.timeoutHandle=xu(Ri.bind(null,t,Ht,hr),u);break}Ri(t,Ht,hr);break;case 5:Ri(t,Ht,hr);break;default:throw Error(n(329))}}}return Wt(t,je()),t.callbackNode===o?Ud.bind(null,t):null}function Ac(t,r){var o=Uo;return t.current.memoizedState.isDehydrated&&(Ai(t,r).flags|=256),t=fl(t,r),t!==2&&(r=Ht,Ht=o,r!==null&&Rc(r)),t}function Rc(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function Ty(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!An(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Br(t,r){for(r&=~wc,r&=~ol,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ot(r),u=1<<o;t[o]=-1,r&=~u}}function zd(t){if(Ne&6)throw Error(n(327));Rs();var r=ci(t,0);if(!(r&1))return Wt(t,je()),null;var o=fl(t,r);if(t.tag!==0&&o===2){var u=Xt(t);u!==0&&(r=u,o=Ac(t,u))}if(o===1)throw o=Fo,Ai(t,0),Br(t,r),Wt(t,je()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ri(t,Ht,hr),Wt(t,je()),null}function Cc(t,r){var o=Ne;Ne|=1;try{return t(r)}finally{Ne=o,Ne===0&&(As=je()+500,za&&Dr())}}function Si(t){Ur!==null&&Ur.tag===0&&!(Ne&6)&&Rs();var r=Ne;Ne|=1;var o=dn.transition,u=Re;try{if(dn.transition=null,Re=1,t)return t()}finally{Re=u,dn.transition=o,Ne=r,!(Ne&6)&&Dr()}}function Pc(){tn=Ss.current,qe(Ss)}function Ai(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Jg(o)),it!==null)for(o=it.return;o!==null;){var u=o;switch(Fu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Fa();break;case 3:ws(),qe(bt),qe(kt),Xu();break;case 5:Ku(u);break;case 4:ws();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:$u(u.type._context);break;case 22:case 23:Pc()}o=o.return}if(yt=t,it=t=jr(t.current,null),It=tn=r,ct=0,Fo=null,wc=ol=Ii=0,Ht=Uo=null,Ei!==null){for(r=0;r<Ei.length;r++)if(o=Ei[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}o.pending=u}Ei=null}return t}function Bd(t,r){do{var o=it;try{if(bu(),Ga.current=Za,Xa){for(var u=Xe.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Xa=!1}if(Ti=0,gt=ut=Xe=null,xo=!1,No=0,Ec.current=null,o===null||o.return===null){ct=1,Fo=r,it=null;break}e:{var p=t,y=o.return,w=o,R=r;if(r=It,w.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var U=R,H=w,W=H.tag;if(!(H.mode&1)&&(W===0||W===11||W===15)){var $=H.alternate;$?(H.updateQueue=$.updateQueue,H.memoizedState=$.memoizedState,H.lanes=$.lanes):(H.updateQueue=null,H.memoizedState=null)}var Z=hd(y);if(Z!==null){Z.flags&=-257,fd(Z,y,w,p,r),Z.mode&1&&cd(p,U,r),r=Z,R=U;var re=r.updateQueue;if(re===null){var ie=new Set;ie.add(R),r.updateQueue=ie}else re.add(R);break e}else{if(!(r&1)){cd(p,U,r),kc();break e}R=Error(n(426))}}else if(Qe&&w.mode&1){var tt=hd(y);if(tt!==null){!(tt.flags&65536)&&(tt.flags|=256),fd(tt,y,w,p,r),Bu(Ts(R,w));break e}}p=R=Ts(R,w),ct!==4&&(ct=2),Uo===null?Uo=[p]:Uo.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=ld(p,R,r);Mf(p,M);break e;case 1:w=R;var C=p.type,O=p.stateNode;if(!(p.flags&128)&&(typeof C.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Fr===null||!Fr.has(O)))){p.flags|=65536,r&=-r,p.lanes|=r;var K=ud(p,w,r);Mf(p,K);break e}}p=p.return}while(p!==null)}$d(o)}catch(se){r=se,it===o&&o!==null&&(it=o=o.return);continue}break}while(!0)}function jd(){var t=sl.current;return sl.current=Za,t===null?Za:t}function kc(){(ct===0||ct===3||ct===2)&&(ct=4),yt===null||!(Ii&268435455)&&!(ol&268435455)||Br(yt,It)}function fl(t,r){var o=Ne;Ne|=2;var u=jd();(yt!==t||It!==r)&&(hr=null,Ai(t,r));do try{Iy();break}catch(h){Bd(t,h)}while(!0);if(bu(),Ne=o,sl.current=u,it!==null)throw Error(n(261));return yt=null,It=0,ct}function Iy(){for(;it!==null;)bd(it)}function Sy(){for(;it!==null&&!ua();)bd(it)}function bd(t){var r=Wd(t.alternate,t,tn);t.memoizedProps=t.pendingProps,r===null?$d(t):it=r,Ec.current=null}function $d(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=yy(o,r),o!==null){o.flags&=32767,it=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,it=null;return}}else if(o=gy(o,r,tn),o!==null){it=o;return}if(r=r.sibling,r!==null){it=r;return}it=r=t}while(r!==null);ct===0&&(ct=5)}function Ri(t,r,o){var u=Re,h=dn.transition;try{dn.transition=null,Re=1,Ay(t,r,o,u)}finally{dn.transition=h,Re=u}return null}function Ay(t,r,o,u){do Rs();while(Ur!==null);if(Ne&6)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(ze(t,p),t===yt&&(it=yt=null,It=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||ll||(ll=!0,Qd(on,function(){return Rs(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=dn.transition,dn.transition=null;var y=Re;Re=1;var w=Ne;Ne|=4,Ec.current=null,vy(t,o),Dd(o,t),Hg(ku),Cr=!!Pu,ku=Pu=null,t.current=o,Ey(o),fu(),Ne=w,Re=y,dn.transition=p}else t.current=o;if(ll&&(ll=!1,Ur=t,ul=h),p=t.pendingLanes,p===0&&(Fr=null),fa(o.stateNode),Wt(t,je()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(al)throw al=!1,t=Ic,Ic=null,t;return ul&1&&t.tag!==0&&Rs(),p=t.pendingLanes,p&1?t===Sc?zo++:(zo=0,Sc=t):zo=0,Dr(),null}function Rs(){if(Ur!==null){var t=Ar(ul),r=dn.transition,o=Re;try{if(dn.transition=null,Re=16>t?16:t,Ur===null)var u=!1;else{if(t=Ur,Ur=null,ul=0,Ne&6)throw Error(n(331));var h=Ne;for(Ne|=4,ne=t.current;ne!==null;){var p=ne,y=p.child;if(ne.flags&16){var w=p.deletions;if(w!==null){for(var R=0;R<w.length;R++){var U=w[R];for(ne=U;ne!==null;){var H=ne;switch(H.tag){case 0:case 11:case 15:Oo(8,H,p)}var W=H.child;if(W!==null)W.return=H,ne=W;else for(;ne!==null;){H=ne;var $=H.sibling,Z=H.return;if(Pd(H),H===U){ne=null;break}if($!==null){$.return=Z,ne=$;break}ne=Z}}}var re=p.alternate;if(re!==null){var ie=re.child;if(ie!==null){re.child=null;do{var tt=ie.sibling;ie.sibling=null,ie=tt}while(ie!==null)}}ne=p}}if(p.subtreeFlags&2064&&y!==null)y.return=p,ne=y;else e:for(;ne!==null;){if(p=ne,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Oo(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,ne=M;break e}ne=p.return}}var C=t.current;for(ne=C;ne!==null;){y=ne;var O=y.child;if(y.subtreeFlags&2064&&O!==null)O.return=y,ne=O;else e:for(y=C;ne!==null;){if(w=ne,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:il(9,w)}}catch(se){Je(w,w.return,se)}if(w===y){ne=null;break e}var K=w.sibling;if(K!==null){K.return=w.return,ne=K;break e}ne=w.return}}if(Ne=h,Dr(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ui,t)}catch{}u=!0}return u}finally{Re=o,dn.transition=r}}return!1}function qd(t,r,o){r=Ts(o,r),r=ld(t,r,1),t=Mr(t,r,1),r=zt(),t!==null&&(Ir(t,1,r),Wt(t,r))}function Je(t,r,o){if(t.tag===3)qd(t,t,o);else for(;r!==null;){if(r.tag===3){qd(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Fr===null||!Fr.has(u))){t=Ts(o,t),t=ud(r,t,1),r=Mr(r,t,1),t=zt(),r!==null&&(Ir(r,1,t),Wt(r,t));break}}r=r.return}}function Ry(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=zt(),t.pingedLanes|=t.suspendedLanes&o,yt===t&&(It&o)===o&&(ct===4||ct===3&&(It&130023424)===It&&500>je()-Tc?Ai(t,0):wc|=o),Wt(t,r)}function Hd(t,r){r===0&&(t.mode&1?(r=Gi,Gi<<=1,!(Gi&130023424)&&(Gi=4194304)):r=1);var o=zt();t=lr(t,r),t!==null&&(Ir(t,r,o),Wt(t,o))}function Cy(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Hd(t,o)}function Py(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),Hd(t,o)}var Wd;Wd=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||bt.current)qt=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return qt=!1,my(t,r,o);qt=!!(t.flags&131072)}else qt=!1,Qe&&r.flags&1048576&&Af(r,ja,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;nl(t,r),t=r.pendingProps;var h=ps(r,kt.current);Es(r,o),h=Zu(null,r,u,t,h,o);var p=ec();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,$t(u)?(p=!0,Ua(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Wu(r),h.updater=el,r.stateNode=h,h._reactInternals=r,oc(r,u,t,o),r=cc(null,r,u,!0,p,o)):(r.tag=0,Qe&&p&&Ou(r),Ut(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(nl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Vy(u),t=Cn(u,t),h){case 0:r=uc(null,r,u,t,o);break e;case 1:r=_d(null,r,u,t,o);break e;case 11:r=dd(null,r,u,t,o);break e;case 14:r=pd(null,r,u,Cn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Cn(u,h),uc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Cn(u,h),_d(t,r,u,h,o);case 3:e:{if(vd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Lf(t,r),Qa(r,u,null,o);var y=r.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Ts(Error(n(423)),r),r=Ed(t,r,u,o,h);break e}else if(u!==h){h=Ts(Error(n(424)),r),r=Ed(t,r,u,o,h);break e}else for(en=Vr(r.stateNode.containerInfo.firstChild),Zt=r,Qe=!0,Rn=null,o=Nf(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ys(),u===h){r=cr(t,r,o);break e}Ut(t,r,u,o)}r=r.child}return r;case 5:return Ff(r),t===null&&zu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,y=h.children,Vu(u,h)?y=null:p!==null&&Vu(u,p)&&(r.flags|=32),yd(t,r),Ut(t,r,y,o),r.child;case 6:return t===null&&zu(r),null;case 13:return wd(t,r,o);case 4:return Qu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=_s(r,null,u,o):Ut(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Cn(u,h),dd(t,r,u,h,o);case 7:return Ut(t,r,r.pendingProps,o),r.child;case 8:return Ut(t,r,r.pendingProps.children,o),r.child;case 12:return Ut(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,y=h.value,be(qa,u._currentValue),u._currentValue=y,p!==null)if(An(p.value,y)){if(p.children===h.children&&!bt.current){r=cr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var w=p.dependencies;if(w!==null){y=p.child;for(var R=w.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=ur(-1,o&-o),R.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var H=U.pending;H===null?R.next=R:(R.next=H.next,H.next=R),U.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),qu(p.return,o,r),w.lanes|=o;break}R=R.next}}else if(p.tag===10)y=p.type===r.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(n(341));y.lanes|=o,w=y.alternate,w!==null&&(w.lanes|=o),qu(y,o,r),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===r){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Ut(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Es(r,o),h=hn(h),u=u(h),r.flags|=1,Ut(t,r,u,o),r.child;case 14:return u=r.type,h=Cn(u,r.pendingProps),h=Cn(u.type,h),pd(t,r,u,h,o);case 15:return md(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Cn(u,h),nl(t,r),r.tag=1,$t(u)?(t=!0,Ua(r)):t=!1,Es(r,o),od(r,u,h),oc(r,u,h,o),cc(null,r,u,!0,t,o);case 19:return Id(t,r,o);case 22:return gd(t,r,o)}throw Error(n(156,r.tag))};function Qd(t,r){return Qi(t,r)}function ky(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,r,o,u){return new ky(t,r,o,u)}function Vc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vy(t){if(typeof t=="function")return Vc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===Ct)return 14}return 2}function jr(t,r){var o=t.alternate;return o===null?(o=pn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function dl(t,r,o,u,h,p){var y=2;if(u=t,typeof t=="function")Vc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case V:return Ci(o.children,h,p,r);case T:y=8,h|=8;break;case A:return t=pn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case S:return t=pn(13,o,r,h),t.elementType=S,t.lanes=p,t;case Ze:return t=pn(19,o,r,h),t.elementType=Ze,t.lanes=p,t;case Ue:return pl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P:y=10;break e;case x:y=9;break e;case D:y=11;break e;case Ct:y=14;break e;case Pt:y=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=pn(y,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Ci(t,r,o,u){return t=pn(7,t,u,r),t.lanes=o,t}function pl(t,r,o,u){return t=pn(22,t,u,r),t.elementType=Ue,t.lanes=o,t.stateNode={isHidden:!1},t}function xc(t,r,o){return t=pn(6,t,null,r),t.lanes=o,t}function Nc(t,r,o){return r=pn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function xy(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tr(0),this.expirationTimes=Tr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Dc(t,r,o,u,h,p,y,w,R){return t=new xy(t,r,o,w,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=pn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wu(p),t}function Ny(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ae,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function Kd(t){if(!t)return Nr;t=t._reactInternals;e:{if(_n(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if($t(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if($t(o))return Tf(t,o,r)}return r}function Gd(t,r,o,u,h,p,y,w,R){return t=Dc(o,u,!0,t,h,p,y,w,R),t.context=Kd(null),o=t.current,u=zt(),h=zr(o),p=ur(u,h),p.callback=r??null,Mr(o,p,h),t.current.lanes=h,Ir(t,h,u),Wt(t,u),t}function ml(t,r,o,u){var h=r.current,p=zt(),y=zr(h);return o=Kd(o),r.context===null?r.context=o:r.pendingContext=o,r=ur(p,y),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Mr(h,r,y),t!==null&&(Vn(t,h,y,p),Wa(t,h,y)),y}function gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xd(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Lc(t,r){Xd(t,r),(t=t.alternate)&&Xd(t,r)}var Yd=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mc(t){this._internalRoot=t}yl.prototype.render=Mc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));ml(t,r,null,null)},yl.prototype.unmount=Mc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Si(function(){ml(null,t,null,null)}),r[ir]=null}};function yl(t){this._internalRoot=t}yl.prototype.unstable_scheduleHydration=function(t){if(t){var r=ya();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Mn.length&&r!==0&&r<Mn[o].priority;o++);Mn.splice(o,0,t),o===0&&Ea(t)}};function Oc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jd(){}function Dy(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=gl(y);p.call(U)}}var y=Gd(r,u,t,0,null,!1,!1,"",Jd);return t._reactRootContainer=y,t[ir]=y.current,Io(t.nodeType===8?t.parentNode:t),Si(),y}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var w=u;u=function(){var U=gl(R);w.call(U)}}var R=Dc(t,0,!1,null,null,!1,!1,"",Jd);return t._reactRootContainer=R,t[ir]=R.current,Io(t.nodeType===8?t.parentNode:t),Si(function(){ml(r,R,o,u)}),R}function vl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var w=h;h=function(){var R=gl(y);w.call(R)}}ml(r,y,t,h)}else y=Dy(o,r,t,h,u);return gl(y)}ma=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=wr(r.pendingLanes);o!==0&&(Sr(r,o|1),Wt(r,je()),!(Ne&6)&&(As=je()+500,Dr()))}break;case 13:Si(function(){var u=lr(t,1);if(u!==null){var h=zt();Vn(u,t,1,h)}}),Lc(t,1)}},Xi=function(t){if(t.tag===13){var r=lr(t,134217728);if(r!==null){var o=zt();Vn(r,t,134217728,o)}Lc(t,134217728)}},ga=function(t){if(t.tag===13){var r=zr(t),o=lr(t,r);if(o!==null){var u=zt();Vn(o,t,r,u)}Lc(t,r)}},ya=function(){return Re},_a=function(t,r){var o=Re;try{return Re=t,r()}finally{Re=o}},ji=function(t,r,o){switch(r){case"input":if(Qs(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Oa(u);if(!h)throw Error(n(90));Mi(u),Qs(u,h)}}}break;case"textarea":zi(t,o);break;case"select":r=o.value,r!=null&&Xn(t,!!o.multiple,r,!1)}},ii=Cc,ro=Si;var Ly={usingClientEntryPoint:!1,Events:[Ro,fs,Oa,Dn,no,Cc]},Bo={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},My={bundleType:Bo.bundleType,version:Bo.version,rendererPackageName:Bo.rendererPackageName,rendererConfig:Bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oo(t),t===null?null:t.stateNode},findFiberByHostInstance:Bo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{ui=El.inject(My),Gt=El}catch{}}return Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ly,Qt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oc(r))throw Error(n(200));return Ny(t,r,null,o)},Qt.createRoot=function(t,r){if(!Oc(t))throw Error(n(299));var o=!1,u="",h=Yd;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Dc(t,1,!1,null,null,o,!1,u,h),t[ir]=r.current,Io(t.nodeType===8?t.parentNode:t),new Mc(r)},Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=oo(r),t=t===null?null:t.stateNode,t},Qt.flushSync=function(t){return Si(t)},Qt.hydrate=function(t,r,o){if(!_l(r))throw Error(n(200));return vl(null,t,r,!0,o)},Qt.hydrateRoot=function(t,r,o){if(!Oc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",y=Yd;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),r=Gd(r,null,t,1,o??null,h,!1,p,y),t[ir]=r.current,Io(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new yl(r)},Qt.render=function(t,r,o){if(!_l(r))throw Error(n(200));return vl(null,t,r,!1,o)},Qt.unmountComponentAtNode=function(t){if(!_l(t))throw Error(n(40));return t._reactRootContainer?(Si(function(){vl(null,null,t,!1,function(){t._reactRootContainer=null,t[ir]=null})}),!0):!1},Qt.unstable_batchedUpdates=Cc,Qt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!_l(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return vl(t,r,o,!1,u)},Qt.version="18.3.1-next-f1338f8080-20240426",Qt}var op;function $y(){if(op)return zc.exports;op=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),zc.exports=by(),zc.exports}var ap;function qy(){if(ap)return wl;ap=1;var i=$y();return wl.createRoot=i.createRoot,wl.hydrateRoot=i.hydrateRoot,wl}var Hy=qy();/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),am=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=mn.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:f,...m},_)=>mn.createElement("svg",{ref:_,...Qy,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:am("lucide",a),...m},[...f.map(([E,I])=>mn.createElement(E,I)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=(i,e)=>{const n=mn.forwardRef(({className:s,...a},c)=>mn.createElement(Ky,{ref:c,iconNode:e,className:am(`lucide-${Wy(i)}`,s),...a}));return n.displayName=`${i}`,n};/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xy=yr("BadgeCheck",Gy);/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Jy=yr("Camera",Yy);/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],e_=yr("Ellipsis",Zy);/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],n_=yr("Heart",t_);/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],i_=yr("MessageCircle",r_);/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],o_=yr("Music",s_);/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],l_=yr("Send",a_);/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],c_=yr("Volume2",u_);/**
 * @license lucide-react v0.471.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M16 9a5 5 0 0 1 .95 2.293",key:"1fgyg8"}],["path",{d:"M19.364 5.636a9 9 0 0 1 1.889 9.96",key:"l3zxae"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"m7 7-.587.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298V11",key:"1gbwow"}],["path",{d:"M9.828 4.172A.686.686 0 0 1 11 4.657v.686",key:"s2je0y"}]],f_=yr("VolumeOff",h_),d_=()=>_e.jsxs("div",{className:"flex justify-between items-center absolute w-full text-white p-2",children:[_e.jsx("h2",{className:"font-medium text-2xl ",children:"Reels"}),_e.jsx(Jy,{size:20,color:"white"})]}),p_=({avatarSrc:i,channel:e,song:n,comments:s,likes:a,targetLink:c,targetProduct:f,onLike:m,isLiked:_})=>{const E=()=>{navigator.share?navigator.share({title:`Check out this video from ${e}`,text:"Watch this amazing video! ",url:c}).then(()=>console.log("Content shared successfully!")).catch(I=>console.error("Error sharing content:",I)):alert("Your browser does not support the Web Share API. Try copying the link manually.")};return _e.jsx(_e.Fragment,{children:_e.jsxs("div",{className:"relative ml-5 bottom-20",children:[_e.jsxs("div",{className:"absolute bottom-0 text-white flex justify-center items-center mb-5 gap-2",children:[_e.jsx("img",{className:"rounded-full  bg-blue-600 border border-yellow-500",src:i,alt:"avatar",width:25,height:25}),_e.jsxs("h3",{className:"flex flex-row items-center justify-center gap-1 m-0",children:[e," ",_e.jsx(Xy,{size:10,color:"white",className:"mt-1"})]}),_e.jsx("button",{className:"bg-transparent text-[12px] border-2 border-white rounded w-12",children:"Follow"}),_e.jsx("button",{className:"glow-on-hover",type:"button",onClick:()=>window.location.href=c,children:f})]}),_e.jsxs("div",{className:"h-fit ml-7 mb-2 w-8/12",children:[_e.jsx(o_,{size:15,color:"black",className:"absolute rounded-full bg left-1 mt-2"}),_e.jsxs("marquee",{className:"text-white font-medium",children:[" ",n]})]}),_e.jsx("div",{className:"absolute bottom-0 right-0 p-4",children:_e.jsxs("div",{className:"flex flex-col gap-4",children:[_e.jsxs("div",{children:[_e.jsx(n_,{cursor:"pointer",size:24,color:"white",fill:`${_?"red":"none"}`,onClick:m}),_e.jsx("span",{className:"text-white text-sm",children:a})]}),_e.jsxs("div",{children:[_e.jsx(i_,{cursor:"pointer",size:24,color:"white"}),_e.jsx("span",{className:"text-white text-sm",children:s})]}),_e.jsx(l_,{size:24,onClick:E,cursor:"pointer",color:"white"}),_e.jsx(e_,{size:24,cursor:"pointer",color:"white"})]})})]})})},m_=({avatarSrc:i,targetLink:e,channel:n,comments:s,url:a,likes:c,song:f,targetProduct:m,id:_,handleLike:E,isLiked:I})=>{const k=mn.useRef(null),[F,B]=mn.useState(!0),[G,X]=mn.useState(!0),q=()=>{k.current.play(),F?(k.current.pause(),B(!1)):(k.current.play(),B(!0))};mn.useEffect(()=>{const fe=k.current,ve={root:null,threshold:.75},Ie=Ae=>{Ae.forEach(V=>{V.isIntersecting?(fe.currentTime=0,fe.play(),B(!0)):(fe.pause(),fe.currentTime=0,B(!1))})},He=new IntersectionObserver(Ie,ve);return fe&&He.observe(fe),()=>{fe&&He.unobserve(fe)}},[]);const ge=()=>{const fe=k.current;G?(console.log("muted"),fe.muted=!1,X(!1)):(console.log("unmuted"),fe.muted=!0,X(!0))};return _e.jsx(_e.Fragment,{children:_e.jsxs("div",{className:"w-full h-full snap-start relative",children:[_e.jsx(d_,{}),_e.jsx("video",{onClick:q,ref:k,className:"h-full w-full object-fill",src:a,muted:G,loop:!0,autoPlay:!0}),_e.jsx("div",{className:"absolute bottom-4 left-5 z-10 flex space-x-4",children:G?_e.jsx(f_,{size:"20",color:"white",onClick:ge}):_e.jsx(c_,{size:"20",color:"white",onClick:ge})}),_e.jsx(p_,{avatarSrc:i,isLiked:I,targetLink:e,onLike:()=>E(_,c,I),targetProduct:m,channel:n,likes:c,song:f,comments:s})]})})};var lp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},g_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],m=i[n++],_=((a&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(_>>10)),e[s++]=String.fromCharCode(56320+(_&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},um={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,m=f?i[a+1]:0,_=a+2<i.length,E=_?i[a+2]:0,I=c>>2,k=(c&3)<<4|m>>4;let F=(m&15)<<2|E>>6,B=E&63;_||(B=64,f||(F=64)),s.push(n[I],n[k],n[F],n[B])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(lm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):g_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const E=a<i.length?n[i.charAt(a)]:64;++a;const k=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||E==null||k==null)throw new y_;const F=c<<2|m>>4;if(s.push(F),E!==64){const B=m<<4&240|E>>2;if(s.push(B),k!==64){const G=E<<6&192|k;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class y_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const __=function(i){const e=lm(i);return um.encodeByteArray(e,!0)},Dl=function(i){return __(i).replace(/\./g,"")},v_=function(i){try{return um.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=()=>E_().__FIREBASE_DEFAULTS__,T_=()=>{if(typeof process>"u"||typeof lp>"u")return;const i=lp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},I_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&v_(i[1]);return e&&JSON.parse(e)},yh=()=>{try{return w_()||T_()||I_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},S_=i=>{var e,n;return(n=(e=yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},A_=i=>{const e=S_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},cm=()=>{var i;return(i=yh())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Dl(JSON.stringify(n)),Dl(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k_(){var i;const e=(i=yh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V_(){return!k_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x_(){try{return typeof indexedDB=="object"}catch{return!1}}function N_(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="FirebaseError";class js extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=D_,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hm.prototype.create)}}class hm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?L_(c,s):"Error",m=`${this.serviceName}: ${f} (${a}).`;return new js(a,m,s)}}function L_(i,e){return i.replace(M_,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const M_=/\{\$([^}]+)}/g;function Xc(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(up(c)&&up(f)){if(!Xc(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function up(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(i){return i&&i._delegate?i._delegate:i}class Xo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new R_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U_(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:F_(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F_(i){return i===Pi?void 0:i}function U_(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new O_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(xe||(xe={}));const B_={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},j_=xe.INFO,b_={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},$_=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=b_[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fm{constructor(e){this.name=e,this._logLevel=j_,this._logHandler=$_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const q_=(i,e)=>e.some(n=>i instanceof n);let cp,hp;function H_(){return cp||(cp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W_(){return hp||(hp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dm=new WeakMap,Yc=new WeakMap,pm=new WeakMap,bc=new WeakMap,_h=new WeakMap;function Q_(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(qr(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&dm.set(n,i)}).catch(()=>{}),_h.set(e,i),e}function K_(i){if(Yc.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Yc.set(i,e)}let Jc={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Yc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||pm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function G_(i){Jc=i(Jc)}function X_(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call($c(this),e,...n);return pm.set(s,e.sort?e.sort():[e]),qr(s)}:W_().includes(i)?function(...e){return i.apply($c(this),e),qr(dm.get(this))}:function(...e){return qr(i.apply($c(this),e))}}function Y_(i){return typeof i=="function"?X_(i):(i instanceof IDBTransaction&&K_(i),q_(i,H_())?new Proxy(i,Jc):i)}function qr(i){if(i instanceof IDBRequest)return Q_(i);if(bc.has(i))return bc.get(i);const e=Y_(i);return e!==i&&(bc.set(i,e),_h.set(e,i)),e}const $c=i=>_h.get(i);function J_(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),m=qr(f);return s&&f.addEventListener("upgradeneeded",_=>{s(qr(f.result),_.oldVersion,_.newVersion,qr(f.transaction),_)}),n&&f.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),m.then(_=>{c&&_.addEventListener("close",()=>c()),a&&_.addEventListener("versionchange",E=>a(E.oldVersion,E.newVersion,E))}).catch(()=>{}),m}const Z_=["get","getKey","getAll","getAllKeys","count"],ev=["put","add","delete","clear"],qc=new Map;function fp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(qc.get(e))return qc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=ev.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Z_.includes(n)))return;const c=async function(f,...m){const _=this.transaction(f,a?"readwrite":"readonly");let E=_.store;return s&&(E=E.index(m.shift())),(await Promise.all([E[n](...m),a&&_.done]))[0]};return qc.set(e,c),c}G_(i=>({...i,get:(e,n,s)=>fp(e,n)||i.get(e,n,s),has:(e,n)=>!!fp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function nv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zc="@firebase/app",dp="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new fm("@firebase/app"),rv="@firebase/app-compat",iv="@firebase/analytics-compat",sv="@firebase/analytics",ov="@firebase/app-check-compat",av="@firebase/app-check",lv="@firebase/auth",uv="@firebase/auth-compat",cv="@firebase/database",hv="@firebase/data-connect",fv="@firebase/database-compat",dv="@firebase/functions",pv="@firebase/functions-compat",mv="@firebase/installations",gv="@firebase/installations-compat",yv="@firebase/messaging",_v="@firebase/messaging-compat",vv="@firebase/performance",Ev="@firebase/performance-compat",wv="@firebase/remote-config",Tv="@firebase/remote-config-compat",Iv="@firebase/storage",Sv="@firebase/storage-compat",Av="@firebase/firestore",Rv="@firebase/vertexai",Cv="@firebase/firestore-compat",Pv="firebase",kv="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="[DEFAULT]",Vv={[Zc]:"fire-core",[rv]:"fire-core-compat",[sv]:"fire-analytics",[iv]:"fire-analytics-compat",[av]:"fire-app-check",[ov]:"fire-app-check-compat",[lv]:"fire-auth",[uv]:"fire-auth-compat",[cv]:"fire-rtdb",[hv]:"fire-data-connect",[fv]:"fire-rtdb-compat",[dv]:"fire-fn",[pv]:"fire-fn-compat",[mv]:"fire-iid",[gv]:"fire-iid-compat",[yv]:"fire-fcm",[_v]:"fire-fcm-compat",[vv]:"fire-perf",[Ev]:"fire-perf-compat",[wv]:"fire-rc",[Tv]:"fire-rc-compat",[Iv]:"fire-gcs",[Sv]:"fire-gcs-compat",[Av]:"fire-fst",[Cv]:"fire-fst-compat",[Rv]:"fire-vertex","fire-js":"fire-js",[Pv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new Map,xv=new Map,th=new Map;function pp(i,e){try{i.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ml(i){const e=i.name;if(th.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;th.set(e,i);for(const n of Ll.values())pp(n,i);for(const n of xv.values())pp(n,i);return!0}function Nv(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new hm("app","Firebase",Dv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=kv;function mm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:eh,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw Hr.create("bad-app-name",{appName:String(a)});if(n||(n=cm()),!n)throw Hr.create("no-options");const c=Ll.get(a);if(c){if(Xc(n,c.options)&&Xc(s,c.config))return c;throw Hr.create("duplicate-app",{appName:a})}const f=new z_(a);for(const _ of th.values())f.addComponent(_);const m=new Lv(n,s,f);return Ll.set(a,m),m}function Ov(i=eh){const e=Ll.get(i);if(!e&&i===eh&&cm())return mm();if(!e)throw Hr.create("no-app",{appName:i});return e}function xs(i,e,n){var s;let a=(s=Vv[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(m.join(" "));return}Ml(new Xo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="firebase-heartbeat-database",Uv=1,Yo="firebase-heartbeat-store";let Hc=null;function gm(){return Hc||(Hc=J_(Fv,Uv,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Yo)}catch(n){console.warn(n)}}}}).catch(i=>{throw Hr.create("idb-open",{originalErrorMessage:i.message})})),Hc}async function zv(i){try{const n=(await gm()).transaction(Yo),s=await n.objectStore(Yo).get(ym(i));return await n.done,s}catch(e){if(e instanceof js)pr.warn(e.message);else{const n=Hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function mp(i,e){try{const s=(await gm()).transaction(Yo,"readwrite");await s.objectStore(Yo).put(e,ym(i)),await s.done}catch(n){if(n instanceof js)pr.warn(n.message);else{const s=Hr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(s.message)}}}function ym(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=1024,jv=30*24*60*60*1e3;class bv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qv(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=gp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const m=new Date(f.date).valueOf();return Date.now()-m<=jv}),this._storage.overwrite(this._heartbeatsCache))}catch(s){pr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gp(),{heartbeatsToSend:s,unsentEntries:a}=$v(this._heartbeatsCache.heartbeats),c=Dl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return pr.warn(n),""}}}function gp(){return new Date().toISOString().substring(0,10)}function $v(i,e=Bv){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),yp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),yp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class qv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x_()?N_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return mp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return mp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function yp(i){return Dl(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(i){Ml(new Xo("platform-logger",e=>new tv(e),"PRIVATE")),Ml(new Xo("heartbeat",e=>new bv(e),"PRIVATE")),xs(Zc,dp,i),xs(Zc,dp,"esm2017"),xs("fire-js","")}Hv("");var _p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,_m;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,T){function A(){}A.prototype=T.prototype,V.D=T.prototype,V.prototype=new A,V.prototype.constructor=V,V.C=function(P,x,D){for(var S=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)S[Ze-2]=arguments[Ze];return T.prototype[x].apply(P,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,T,A){A||(A=0);var P=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)P[x]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(x=0;16>x;++x)P[x]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=V.g[0],A=V.g[1],x=V.g[2];var D=V.g[3],S=T+(D^A&(x^D))+P[0]+3614090360&4294967295;T=A+(S<<7&4294967295|S>>>25),S=D+(x^T&(A^x))+P[1]+3905402710&4294967295,D=T+(S<<12&4294967295|S>>>20),S=x+(A^D&(T^A))+P[2]+606105819&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(T^x&(D^T))+P[3]+3250441966&4294967295,A=x+(S<<22&4294967295|S>>>10),S=T+(D^A&(x^D))+P[4]+4118548399&4294967295,T=A+(S<<7&4294967295|S>>>25),S=D+(x^T&(A^x))+P[5]+1200080426&4294967295,D=T+(S<<12&4294967295|S>>>20),S=x+(A^D&(T^A))+P[6]+2821735955&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(T^x&(D^T))+P[7]+4249261313&4294967295,A=x+(S<<22&4294967295|S>>>10),S=T+(D^A&(x^D))+P[8]+1770035416&4294967295,T=A+(S<<7&4294967295|S>>>25),S=D+(x^T&(A^x))+P[9]+2336552879&4294967295,D=T+(S<<12&4294967295|S>>>20),S=x+(A^D&(T^A))+P[10]+4294925233&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(T^x&(D^T))+P[11]+2304563134&4294967295,A=x+(S<<22&4294967295|S>>>10),S=T+(D^A&(x^D))+P[12]+1804603682&4294967295,T=A+(S<<7&4294967295|S>>>25),S=D+(x^T&(A^x))+P[13]+4254626195&4294967295,D=T+(S<<12&4294967295|S>>>20),S=x+(A^D&(T^A))+P[14]+2792965006&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(T^x&(D^T))+P[15]+1236535329&4294967295,A=x+(S<<22&4294967295|S>>>10),S=T+(x^D&(A^x))+P[1]+4129170786&4294967295,T=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(T^A))+P[6]+3225465664&4294967295,D=T+(S<<9&4294967295|S>>>23),S=x+(T^A&(D^T))+P[11]+643717713&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^T&(x^D))+P[0]+3921069994&4294967295,A=x+(S<<20&4294967295|S>>>12),S=T+(x^D&(A^x))+P[5]+3593408605&4294967295,T=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(T^A))+P[10]+38016083&4294967295,D=T+(S<<9&4294967295|S>>>23),S=x+(T^A&(D^T))+P[15]+3634488961&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^T&(x^D))+P[4]+3889429448&4294967295,A=x+(S<<20&4294967295|S>>>12),S=T+(x^D&(A^x))+P[9]+568446438&4294967295,T=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(T^A))+P[14]+3275163606&4294967295,D=T+(S<<9&4294967295|S>>>23),S=x+(T^A&(D^T))+P[3]+4107603335&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^T&(x^D))+P[8]+1163531501&4294967295,A=x+(S<<20&4294967295|S>>>12),S=T+(x^D&(A^x))+P[13]+2850285829&4294967295,T=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(T^A))+P[2]+4243563512&4294967295,D=T+(S<<9&4294967295|S>>>23),S=x+(T^A&(D^T))+P[7]+1735328473&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^T&(x^D))+P[12]+2368359562&4294967295,A=x+(S<<20&4294967295|S>>>12),S=T+(A^x^D)+P[5]+4294588738&4294967295,T=A+(S<<4&4294967295|S>>>28),S=D+(T^A^x)+P[8]+2272392833&4294967295,D=T+(S<<11&4294967295|S>>>21),S=x+(D^T^A)+P[11]+1839030562&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^T)+P[14]+4259657740&4294967295,A=x+(S<<23&4294967295|S>>>9),S=T+(A^x^D)+P[1]+2763975236&4294967295,T=A+(S<<4&4294967295|S>>>28),S=D+(T^A^x)+P[4]+1272893353&4294967295,D=T+(S<<11&4294967295|S>>>21),S=x+(D^T^A)+P[7]+4139469664&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^T)+P[10]+3200236656&4294967295,A=x+(S<<23&4294967295|S>>>9),S=T+(A^x^D)+P[13]+681279174&4294967295,T=A+(S<<4&4294967295|S>>>28),S=D+(T^A^x)+P[0]+3936430074&4294967295,D=T+(S<<11&4294967295|S>>>21),S=x+(D^T^A)+P[3]+3572445317&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^T)+P[6]+76029189&4294967295,A=x+(S<<23&4294967295|S>>>9),S=T+(A^x^D)+P[9]+3654602809&4294967295,T=A+(S<<4&4294967295|S>>>28),S=D+(T^A^x)+P[12]+3873151461&4294967295,D=T+(S<<11&4294967295|S>>>21),S=x+(D^T^A)+P[15]+530742520&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^T)+P[2]+3299628645&4294967295,A=x+(S<<23&4294967295|S>>>9),S=T+(x^(A|~D))+P[0]+4096336452&4294967295,T=A+(S<<6&4294967295|S>>>26),S=D+(A^(T|~x))+P[7]+1126891415&4294967295,D=T+(S<<10&4294967295|S>>>22),S=x+(T^(D|~A))+P[14]+2878612391&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~T))+P[5]+4237533241&4294967295,A=x+(S<<21&4294967295|S>>>11),S=T+(x^(A|~D))+P[12]+1700485571&4294967295,T=A+(S<<6&4294967295|S>>>26),S=D+(A^(T|~x))+P[3]+2399980690&4294967295,D=T+(S<<10&4294967295|S>>>22),S=x+(T^(D|~A))+P[10]+4293915773&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~T))+P[1]+2240044497&4294967295,A=x+(S<<21&4294967295|S>>>11),S=T+(x^(A|~D))+P[8]+1873313359&4294967295,T=A+(S<<6&4294967295|S>>>26),S=D+(A^(T|~x))+P[15]+4264355552&4294967295,D=T+(S<<10&4294967295|S>>>22),S=x+(T^(D|~A))+P[6]+2734768916&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~T))+P[13]+1309151649&4294967295,A=x+(S<<21&4294967295|S>>>11),S=T+(x^(A|~D))+P[4]+4149444226&4294967295,T=A+(S<<6&4294967295|S>>>26),S=D+(A^(T|~x))+P[11]+3174756917&4294967295,D=T+(S<<10&4294967295|S>>>22),S=x+(T^(D|~A))+P[2]+718787259&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~T))+P[9]+3951481745&4294967295,V.g[0]=V.g[0]+T&4294967295,V.g[1]=V.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,V.g[2]=V.g[2]+x&4294967295,V.g[3]=V.g[3]+D&4294967295}s.prototype.u=function(V,T){T===void 0&&(T=V.length);for(var A=T-this.blockSize,P=this.B,x=this.h,D=0;D<T;){if(x==0)for(;D<=A;)a(this,V,D),D+=this.blockSize;if(typeof V=="string"){for(;D<T;)if(P[x++]=V.charCodeAt(D++),x==this.blockSize){a(this,P),x=0;break}}else for(;D<T;)if(P[x++]=V[D++],x==this.blockSize){a(this,P),x=0;break}}this.h=x,this.o+=T},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var T=1;T<V.length-8;++T)V[T]=0;var A=8*this.o;for(T=V.length-8;T<V.length;++T)V[T]=A&255,A/=256;for(this.u(V),V=Array(16),T=A=0;4>T;++T)for(var P=0;32>P;P+=8)V[A++]=this.g[T]>>>P&255;return V};function c(V,T){var A=m;return Object.prototype.hasOwnProperty.call(A,V)?A[V]:A[V]=T(V)}function f(V,T){this.h=T;for(var A=[],P=!0,x=V.length-1;0<=x;x--){var D=V[x]|0;P&&D==T||(A[x]=D,P=!1)}this.g=A}var m={};function _(V){return-128<=V&&128>V?c(V,function(T){return new f([T|0],0>T?-1:0)}):new f([V|0],0>V?-1:0)}function E(V){if(isNaN(V)||!isFinite(V))return k;if(0>V)return q(E(-V));for(var T=[],A=1,P=0;V>=A;P++)T[P]=V/A|0,A*=4294967296;return new f(T,0)}function I(V,T){if(V.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(V.charAt(0)=="-")return q(I(V.substring(1),T));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=E(Math.pow(T,8)),P=k,x=0;x<V.length;x+=8){var D=Math.min(8,V.length-x),S=parseInt(V.substring(x,x+D),T);8>D?(D=E(Math.pow(T,D)),P=P.j(D).add(E(S))):(P=P.j(A),P=P.add(E(S)))}return P}var k=_(0),F=_(1),B=_(16777216);i=f.prototype,i.m=function(){if(X(this))return-q(this).m();for(var V=0,T=1,A=0;A<this.g.length;A++){var P=this.i(A);V+=(0<=P?P:4294967296+P)*T,T*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(G(this))return"0";if(X(this))return"-"+q(this).toString(V);for(var T=E(Math.pow(V,6)),A=this,P="";;){var x=Ie(A,T).g;A=ge(A,x.j(T));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(V);if(A=x,G(A))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function G(V){if(V.h!=0)return!1;for(var T=0;T<V.g.length;T++)if(V.g[T]!=0)return!1;return!0}function X(V){return V.h==-1}i.l=function(V){return V=ge(this,V),X(V)?-1:G(V)?0:1};function q(V){for(var T=V.g.length,A=[],P=0;P<T;P++)A[P]=~V.g[P];return new f(A,~V.h).add(F)}i.abs=function(){return X(this)?q(this):this},i.add=function(V){for(var T=Math.max(this.g.length,V.g.length),A=[],P=0,x=0;x<=T;x++){var D=P+(this.i(x)&65535)+(V.i(x)&65535),S=(D>>>16)+(this.i(x)>>>16)+(V.i(x)>>>16);P=S>>>16,D&=65535,S&=65535,A[x]=S<<16|D}return new f(A,A[A.length-1]&-2147483648?-1:0)};function ge(V,T){return V.add(q(T))}i.j=function(V){if(G(this)||G(V))return k;if(X(this))return X(V)?q(this).j(q(V)):q(q(this).j(V));if(X(V))return q(this.j(q(V)));if(0>this.l(B)&&0>V.l(B))return E(this.m()*V.m());for(var T=this.g.length+V.g.length,A=[],P=0;P<2*T;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var x=0;x<V.g.length;x++){var D=this.i(P)>>>16,S=this.i(P)&65535,Ze=V.i(x)>>>16,Ct=V.i(x)&65535;A[2*P+2*x]+=S*Ct,fe(A,2*P+2*x),A[2*P+2*x+1]+=D*Ct,fe(A,2*P+2*x+1),A[2*P+2*x+1]+=S*Ze,fe(A,2*P+2*x+1),A[2*P+2*x+2]+=D*Ze,fe(A,2*P+2*x+2)}for(P=0;P<T;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=T;P<2*T;P++)A[P]=0;return new f(A,0)};function fe(V,T){for(;(V[T]&65535)!=V[T];)V[T+1]+=V[T]>>>16,V[T]&=65535,T++}function ve(V,T){this.g=V,this.h=T}function Ie(V,T){if(G(T))throw Error("division by zero");if(G(V))return new ve(k,k);if(X(V))return T=Ie(q(V),T),new ve(q(T.g),q(T.h));if(X(T))return T=Ie(V,q(T)),new ve(q(T.g),T.h);if(30<V.g.length){if(X(V)||X(T))throw Error("slowDivide_ only works with positive integers.");for(var A=F,P=T;0>=P.l(V);)A=He(A),P=He(P);var x=Ae(A,1),D=Ae(P,1);for(P=Ae(P,2),A=Ae(A,2);!G(P);){var S=D.add(P);0>=S.l(V)&&(x=x.add(A),D=S),P=Ae(P,1),A=Ae(A,1)}return T=ge(V,x.j(T)),new ve(x,T)}for(x=k;0<=V.l(T);){for(A=Math.max(1,Math.floor(V.m()/T.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=E(A),S=D.j(T);X(S)||0<S.l(V);)A-=P,D=E(A),S=D.j(T);G(D)&&(D=F),x=x.add(D),V=ge(V,S)}return new ve(x,V)}i.A=function(V){return Ie(this,V).h},i.and=function(V){for(var T=Math.max(this.g.length,V.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)&V.i(P);return new f(A,this.h&V.h)},i.or=function(V){for(var T=Math.max(this.g.length,V.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)|V.i(P);return new f(A,this.h|V.h)},i.xor=function(V){for(var T=Math.max(this.g.length,V.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)^V.i(P);return new f(A,this.h^V.h)};function He(V){for(var T=V.g.length+1,A=[],P=0;P<T;P++)A[P]=V.i(P)<<1|V.i(P-1)>>>31;return new f(A,V.h)}function Ae(V,T){var A=T>>5;T%=32;for(var P=V.g.length-A,x=[],D=0;D<P;D++)x[D]=0<T?V.i(D+A)>>>T|V.i(D+A+1)<<32-T:V.i(D+A);return new f(x,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,_m=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=E,f.fromString=I,Wr=f}).apply(typeof _p<"u"?_p:typeof self<"u"?self:typeof window<"u"?window:{});var Tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vm,bo,Em,Cl,nh,wm,Tm,Im;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tl=="object"&&Tl];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var g=s;l=l.split(".");for(var v=0;v<l.length-1;v++){var L=l[v];if(!(L in g))break e;g=g[L]}l=l[l.length-1],v=g[l],d=d(v),d!=v&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,v=!1,L={next:function(){if(!v&&g<l.length){var z=g++;return{value:d(z,l[z]),done:!1}}return v=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function _(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function E(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function I(l,d,g){return l.call.apply(l.bind,arguments)}function k(l,d,g){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,v),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function F(l,d,g){return F=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:k,F.apply(null,arguments)}function B(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function G(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(v,L,z){for(var Y=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)Y[Fe-2]=arguments[Fe];return d.prototype[L].apply(v,Y)}}function X(l){const d=l.length;if(0<d){const g=Array(d);for(let v=0;v<d;v++)g[v]=l[v];return g}return[]}function q(l,d){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(_(v)){const L=l.length||0,z=v.length||0;l.length=L+z;for(let Y=0;Y<z;Y++)l[L+Y]=v[Y]}else l.push(v)}}class ge{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function fe(l){return/^[\s\xa0]*$/.test(l)}function ve(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function Ie(l){return Ie[" "](l),l}Ie[" "]=function(){};var He=ve().indexOf("Gecko")!=-1&&!(ve().toLowerCase().indexOf("webkit")!=-1&&ve().indexOf("Edge")==-1)&&!(ve().indexOf("Trident")!=-1||ve().indexOf("MSIE")!=-1)&&ve().indexOf("Edge")==-1;function Ae(l,d,g){for(const v in l)d.call(g,l[v],v,l)}function V(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function T(l){const d={};for(const g in l)d[g]=l[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,d){let g,v;for(let L=1;L<arguments.length;L++){v=arguments[L];for(g in v)l[g]=v[g];for(let z=0;z<A.length;z++)g=A[z],Object.prototype.hasOwnProperty.call(v,g)&&(l[g]=v[g])}}function x(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function D(l){m.setTimeout(()=>{throw l},0)}function S(){var l=ae;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ze{constructor(){this.h=this.g=null}add(d,g){const v=Ct.get();v.set(d,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Ct=new ge(()=>new Pt,l=>l.reset());class Pt{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,J=!1,ae=new Ze,ee=()=>{const l=m.Promise.resolve(void 0);Ue=()=>{l.then(N)}};var N=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){D(g)}var d=Ct;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}J=!1};function b(){this.s=this.s,this.C=this.C}b.prototype.s=!1,b.prototype.ma=function(){this.s||(this.s=!0,this.N())},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l}();function we(l,d){if(oe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(He){e:{try{Ie(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Pe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&we.aa.h.call(this)}}G(we,oe);var Pe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Me=0;function Be(l,d,g,v,L){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!v,this.ha=L,this.key=++Me,this.da=this.fa=!1}function pt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Kn(l){this.src=l,this.g={},this.h=0}Kn.prototype.add=function(l,d,g,v,L){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var Y=_r(l,d,v,L);return-1<Y?(d=l[Y],g||(d.fa=!1)):(d=new Be(d,this.src,z,!!v,L),d.fa=g,l.push(d)),d};function Mi(l,d){var g=d.type;if(g in l.g){var v=l.g[g],L=Array.prototype.indexOf.call(v,d,void 0),z;(z=0<=L)&&Array.prototype.splice.call(v,L,1),z&&(pt(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function _r(l,d,g,v){for(var L=0;L<l.length;++L){var z=l[L];if(!z.da&&z.listener==d&&z.capture==!!g&&z.ha==v)return L}return-1}var ei="closure_lm_"+(1e6*Math.random()|0),Oi={};function Ws(l,d,g,v,L){if(Array.isArray(d)){for(var z=0;z<d.length;z++)Ws(l,d[z],g,v,L);return null}return g=Gs(g),l&&l[Le]?l.K(d,g,E(v)?!!v.capture:!1,L):Qs(l,d,g,!1,v,L)}function Qs(l,d,g,v,L,z){if(!d)throw Error("Invalid event type");var Y=E(L)?!!L.capture:!!L,Fe=Ui(l);if(Fe||(l[ei]=Fe=new Kn(l)),g=Fe.add(d,g,v,Y,z),g.proxy)return g;if(v=oa(),g.proxy=v,v.src=l,v.listener=g,l.addEventListener)Ee||(L=Y),L===void 0&&(L=!1),l.addEventListener(d.toString(),v,L);else if(l.attachEvent)l.attachEvent(Xn(d.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function oa(){function l(g){return d.call(l.src,l.listener,g)}const d=Ks;return l}function Fi(l,d,g,v,L){if(Array.isArray(d))for(var z=0;z<d.length;z++)Fi(l,d[z],g,v,L);else v=E(v)?!!v.capture:!!v,g=Gs(g),l&&l[Le]?(l=l.i,d=String(d).toString(),d in l.g&&(z=l.g[d],g=_r(z,g,v,L),-1<g&&(pt(z[g]),Array.prototype.splice.call(z,g,1),z.length==0&&(delete l.g[d],l.h--)))):l&&(l=Ui(l))&&(d=l.g[d.toString()],l=-1,d&&(l=_r(d,g,v,L)),(g=-1<l?d[l]:null)&&Gn(g))}function Gn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Le])Mi(d.i,l);else{var g=l.type,v=l.proxy;d.removeEventListener?d.removeEventListener(g,v,l.capture):d.detachEvent?d.detachEvent(Xn(g),v):d.addListener&&d.removeListener&&d.removeListener(v),(g=Ui(d))?(Mi(g,l),g.h==0&&(g.src=null,d[ei]=null)):pt(l)}}}function Xn(l){return l in Oi?Oi[l]:Oi[l]="on"+l}function Ks(l,d){if(l.da)l=!0;else{d=new we(d,this);var g=l.listener,v=l.ha||l.src;l.fa&&Gn(l),l=g.call(v,d)}return l}function Ui(l){return l=l[ei],l instanceof Kn?l:null}var zi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gs(l){return typeof l=="function"?l:(l[zi]||(l[zi]=function(d){return l.handleEvent(d)}),l[zi])}function ot(){b.call(this),this.i=new Kn(this),this.M=this,this.F=null}G(ot,b),ot.prototype[Le]=!0,ot.prototype.removeEventListener=function(l,d,g,v){Fi(this,l,d,g,v)};function at(l,d){var g,v=l.F;if(v)for(g=[];v;v=v.F)g.push(v);if(l=l.M,v=d.type||d,typeof d=="string")d=new oe(d,l);else if(d instanceof oe)d.target=d.target||l;else{var L=d;d=new oe(v,l),P(d,L)}if(L=!0,g)for(var z=g.length-1;0<=z;z--){var Y=d.g=g[z];L=Yn(Y,v,!0,d)&&L}if(Y=d.g=l,L=Yn(Y,v,!0,d)&&L,L=Yn(Y,v,!1,d)&&L,g)for(z=0;z<g.length;z++)Y=d.g=g[z],L=Yn(Y,v,!1,d)&&L}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],v=0;v<g.length;v++)pt(g[v]);delete l.g[d],l.h--}}this.F=null},ot.prototype.K=function(l,d,g,v){return this.i.add(String(l),d,!1,g,v)},ot.prototype.L=function(l,d,g,v){return this.i.add(String(l),d,!0,g,v)};function Yn(l,d,g,v){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,z=0;z<d.length;++z){var Y=d[z];if(Y&&!Y.da&&Y.capture==g){var Fe=Y.listener,lt=Y.ha||Y.src;Y.fa&&Mi(l.i,Y),L=Fe.call(lt,v)!==!1&&L}}return L&&!v.defaultPrevented}function Xs(l,d,g){if(typeof l=="function")g&&(l=F(l,g));else if(l&&typeof l.handleEvent=="function")l=F(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function vr(l){l.g=Xs(()=>{l.g=null,l.i&&(l.i=!1,vr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ti extends b{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:vr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ni(l){b.call(this),this.h=l,this.g={}}G(ni,b);var Ys=[];function Js(l){Ae(l.g,function(d,g){this.g.hasOwnProperty(g)&&Gn(d)},l),l.g={}}ni.prototype.N=function(){ni.aa.N.call(this),Js(this)},ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zs=m.JSON.stringify,eo=m.JSON.parse,to=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function ri(){}ri.prototype.h=null;function Bi(l){return l.h||(l.h=l.i())}function ji(){}var sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){oe.call(this,"d")}G(Nn,oe);function bi(){oe.call(this,"c")}G(bi,oe);var Dn={},no=null;function ii(){return no=no||new ot}Dn.La="serverreachability";function ro(l){oe.call(this,Dn.La,l)}G(ro,oe);function Jn(l){const d=ii();at(d,new ro(d))}Dn.STAT_EVENT="statevent";function io(l,d){oe.call(this,Dn.STAT_EVENT,l),this.stat=d}G(io,oe);function et(l){const d=ii();at(d,new io(d,l))}Dn.Ma="timingevent";function $i(l,d){oe.call(this,Dn.Ma,l),this.size=d}G($i,oe);function gn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function si(){this.g=!0}si.prototype.xa=function(){this.g=!1};function oi(l,d,g,v,L,z){l.info(function(){if(l.g)if(z)for(var Y="",Fe=z.split("&"),lt=0;lt<Fe.length;lt++){var ke=Fe[lt].split("=");if(1<ke.length){var mt=ke[0];ke=ke[1];var rt=mt.split("_");Y=2<=rt.length&&rt[1]=="type"?Y+(mt+"="+ke+"&"):Y+(mt+"=redacted&")}}else Y=null;else Y=z;return"XMLHTTP REQ ("+v+") [attempt "+L+"]: "+d+`
`+g+`
`+Y})}function qi(l,d,g,v,L,z,Y){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+L+"]: "+d+`
`+g+`
`+z+" "+Y})}function yn(l,d,g,v){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+hu(l,g)+(v?" "+v:"")})}function so(l,d){l.info(function(){return"TIMEOUT: "+d})}si.prototype.info=function(){};function hu(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var v=g[l];if(!(2>v.length)){var L=v[1];if(Array.isArray(L)&&!(1>L.length)){var z=L[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Y=1;Y<L.length;Y++)L[Y]=""}}}}return Zs(g)}catch{return d}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},aa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_n;function ai(){}G(ai,ri),ai.prototype.g=function(){return new XMLHttpRequest},ai.prototype.i=function(){return{}},_n=new ai;function vn(l,d,g,v){this.j=l,this.i=d,this.l=g,this.R=v||1,this.U=new ni(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new la}function la(){this.i=null,this.g="",this.h=!1}var oo={},Wi={};function Qi(l,d,g){l.L=1,l.v=Sr(Xt(d)),l.m=g,l.P=!0,ao(l,null)}function ao(l,d){l.F=Date.now(),je(l),l.A=Xt(l.v);var g=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Rr(g.i,"t",v),l.C=0,g=l.j.J,l.h=new la,l.g=Ra(l.j,g?d:null,!l.m),0<l.O&&(l.M=new ti(F(l.Y,l,l.g),l.O)),d=l.U,g=l.g,v=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ys[0]=L.toString()),L=Ys);for(var z=0;z<L.length;z++){var Y=Ws(g,L[z],v||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Jn(),oi(l.i,l.u,l.A,l.l,l.R,l.m)}vn.prototype.ca=function(l){l=l.target;const d=this.M;d&&jt(l)==3?d.j():this.Y(l)},vn.prototype.Y=function(l){try{if(l==this.g)e:{const rt=jt(this.g);var d=this.g.Ba();const ln=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||po(this.g)))){this.J||rt!=4||d==7||(d==8||0>=ln?Jn(3):Jn(2)),li(this);var g=this.g.Z();this.X=g;t:if(ua(this)){var v=po(this.g);l="";var L=v.length,z=jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),Er(this);var Y="";break t}this.h.i=new m.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(v[d],{stream:!(z&&d==L-1)});v.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,qi(this.i,this.u,this.A,this.l,this.R,rt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,lt=this.g;if((Fe=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fe(Fe)){var ke=Fe;break t}}ke=null}if(g=ke)yn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lo(this,g);else{this.o=!1,this.s=3,et(12),on(this),Er(this);break e}}if(this.P){g=!0;let Jt;for(;!this.J&&this.C<Y.length;)if(Jt=fu(this,Y),Jt==Wi){rt==4&&(this.s=4,et(14),g=!1),yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==oo){this.s=4,et(15),yn(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else yn(this.i,this.l,Jt,null),lo(this,Jt);if(ua(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||Y.length!=0||this.h.h||(this.s=1,et(16),g=!1),this.o=this.o&&g,!g)yn(this.i,this.l,Y,"[Invalid Chunked Response]"),on(this),Er(this);else if(0<Y.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),go(mt),mt.M=!0,et(11))}}else yn(this.i,this.l,Y,null),lo(this,Y);rt==4&&on(this),this.o&&!this.J&&(rt==4?is(this.j,this):(this.o=!1,je(this)))}else Zi(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),on(this),Er(this)}}}catch{}finally{}};function ua(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function fu(l,d){var g=l.C,v=d.indexOf(`
`,g);return v==-1?Wi:(g=Number(d.substring(g,v)),isNaN(g)?oo:(v+=1,v+g>d.length?Wi:(d=d.slice(v,v+g),l.C=v+g,d)))}vn.prototype.cancel=function(){this.J=!0,on(this)};function je(l){l.S=Date.now()+l.I,ca(l,l.I)}function ca(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=gn(F(l.ba,l),d)}function li(l){l.B&&(m.clearTimeout(l.B),l.B=null)}vn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(so(this.i,this.A),this.L!=2&&(Jn(),et(17)),on(this),this.s=2,Er(this)):ca(this,this.S-l)};function Er(l){l.j.G==0||l.J||is(l.j,l)}function on(l){li(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Js(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function lo(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||Ot(g.h,l))){if(!l.K&&Ot(g.h,l)&&g.G==3){try{var v=g.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var L=v;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)rs(g),Sn(g);else break e;ns(g),et(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=gn(F(g.Za,g),6e3));if(1>=fa(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else rr(g,11)}else if((l.K||g.g==l)&&rs(g),!fe(d))for(L=g.Da.g.parse(d),d=0;d<L.length;d++){let ke=L[d];if(g.T=ke[0],ke=ke[1],g.G==2)if(ke[0]=="c"){g.K=ke[1],g.ia=ke[2];const mt=ke[3];mt!=null&&(g.la=mt,g.j.info("VER="+g.la));const rt=ke[4];rt!=null&&(g.Aa=rt,g.j.info("SVER="+g.Aa));const ln=ke[5];ln!=null&&typeof ln=="number"&&0<ln&&(v=1.5*ln,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const Jt=l.g;if(Jt){const mi=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mi){var z=v.h;z.g||mi.indexOf("spdy")==-1&&mi.indexOf("quic")==-1&&mi.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(uo(z,z.h),z.h=null))}if(v.D){const os=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;os&&(v.ya=os,ze(v.I,v.D,os))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var Y=l;if(v.qa=Aa(v,v.J?v.ia:null,v.W),Y.K){da(v.h,Y);var Fe=Y,lt=v.L;lt&&(Fe.I=lt),Fe.B&&(li(Fe),je(Fe)),v.g=Y}else pi(v);0<g.i.length&&Fn(g)}else ke[0]!="stop"&&ke[0]!="close"||rr(g,7);else g.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?rr(g,7):wt(g):ke[0]!="noop"&&g.l&&g.l.ta(ke),g.v=0)}}Jn(4)}catch{}}var ha=class{constructor(l,d){this.g=l,this.map=d}};function ui(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function fa(l){return l.h?1:l.g?l.g.size:0}function Ot(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function uo(l,d){l.g?l.g.add(d):l.h=d}function da(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}ui.prototype.cancel=function(){if(this.i=pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function pa(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return X(l.i)}function Ki(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(_(l)){for(var d=[],g=l.length,v=0;v<g;v++)d.push(l[v]);return d}d=[],g=0;for(v in l)d[g++]=l[v];return d}function Gi(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(_(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const v in l)d[g++]=v;return d}}}function wr(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(_(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=Gi(l),v=Ki(l),L=v.length,z=0;z<L;z++)d.call(void 0,v[z],g&&g[z],l)}var ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function du(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var v=l[g].indexOf("="),L=null;if(0<=v){var z=l[g].substring(0,v);L=l[g].substring(v+1)}else z=l[g];d(z,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Zn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Zn){this.h=l.h,hi(this,l.j),this.o=l.o,this.g=l.g,Tr(this,l.s),this.l=l.l;var d=l.i,g=new Ln;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),Ir(this,g),this.m=l.m}else l&&(d=String(l).match(ci))?(this.h=!1,hi(this,d[1]||"",!0),this.o=Re(d[2]||""),this.g=Re(d[3]||"",!0),Tr(this,d[4]),this.l=Re(d[5]||"",!0),Ir(this,d[6]||"",!0),this.m=Re(d[7]||"")):(this.h=!1,this.i=new Ln(null,this.h))}Zn.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Ar(d,Xi,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Ar(d,Xi,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Ar(g,g.charAt(0)=="/"?ya:ga,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Ar(g,co)),l.join("")};function Xt(l){return new Zn(l)}function hi(l,d,g){l.j=g?Re(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Tr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Ir(l,d,g){d instanceof Ln?(l.i=d,Mn(l.i,l.h)):(g||(d=Ar(d,_a)),l.i=new Ln(d,l.h))}function ze(l,d,g){l.i.set(d,g)}function Sr(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Re(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ar(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,ma),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ma(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Xi=/[#\/\?@]/g,ga=/[#\?:]/g,ya=/[#\?]/g,_a=/[#\?@]/g,co=/#/g;function Ln(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Et(l){l.g||(l.g=new Map,l.h=0,l.i&&du(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=Ln.prototype,i.add=function(l,d){Et(this),this.i=null,l=an(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function En(l,d){Et(l),d=an(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function wn(l,d){return Et(l),d=an(l,d),l.g.has(d)}i.forEach=function(l,d){Et(this),this.g.forEach(function(g,v){g.forEach(function(L){l.call(d,L,v,this)},this)},this)},i.na=function(){Et(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let v=0;v<d.length;v++){const L=l[v];for(let z=0;z<L.length;z++)g.push(d[v])}return g},i.V=function(l){Et(this);let d=[];if(typeof l=="string")wn(this,l)&&(d=d.concat(this.g.get(an(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},i.set=function(l,d){return Et(this),this.i=null,l=an(this,l),wn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Rr(l,d,g){En(l,d),0<g.length&&(l.i=null,l.g.set(an(l,d),X(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var v=d[g];const z=encodeURIComponent(String(v)),Y=this.V(v);for(v=0;v<Y.length;v++){var L=z;Y[v]!==""&&(L+="="+encodeURIComponent(String(Y[v]))),l.push(L)}}return this.i=l.join("&")};function an(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Mn(l,d){d&&!l.j&&(Et(l),l.i=null,l.g.forEach(function(g,v){var L=v.toLowerCase();v!=L&&(En(this,v),Rr(this,L,g))},l)),l.j=d}function pu(l,d){const g=new si;if(m.Image){const v=new Image;v.onload=B(Bt,g,"TestLoadImage: loaded",!0,d,v),v.onerror=B(Bt,g,"TestLoadImage: error",!1,d,v),v.onabort=B(Bt,g,"TestLoadImage: abort",!1,d,v),v.ontimeout=B(Bt,g,"TestLoadImage: timeout",!1,d,v),m.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else d(!1)}function va(l,d){const g=new si,v=new AbortController,L=setTimeout(()=>{v.abort(),Bt(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:v.signal}).then(z=>{clearTimeout(L),z.ok?Bt(g,"TestPingServer: ok",!0,d):Bt(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Bt(g,"TestPingServer: error",!1,d)})}function Bt(l,d,g,v,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),v(g)}catch{}}function mu(){this.g=new to}function Ea(l,d,g){const v=g||"";try{wr(l,function(L,z){let Y=L;E(L)&&(Y=Zs(L)),d.push(v+z+"="+encodeURIComponent(Y))})}catch(L){throw d.push(v+"type="+encodeURIComponent("_badmap")),L}}function er(l){this.l=l.Ub||null,this.j=l.eb||!1}G(er,ri),er.prototype.g=function(){return new fi(this.l,this.j)},er.prototype.i=function(l){return function(){return l}}({});function fi(l,d){ot.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(fi,ot),i=fi.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,In(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wa(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function wa(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Tn(this):In(this),this.readyState==3&&wa(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Tn(this))},i.Qa=function(l){this.g&&(this.response=l,Tn(this))},i.ga=function(){this.g&&Tn(this)};function Tn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,In(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function In(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function tr(l){let d="";return Ae(l,function(g,v){d+=v,d+=":",d+=g,d+=`\r
`}),d}function Cr(l,d,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=tr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ze(l,d,g))}function We(l){ot.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(We,ot);var gu=/^https?$/i,ho=["POST","PUT"];i=We.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_n.g(),this.v=this.o?Bi(this.o):Bi(_n),this.g.onreadystatechange=F(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(z){di(this,z);return}if(l=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var L in v)g.set(L,v[L]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const z of v.keys())g.set(z,v.get(z));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(z=>z.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(ho,d,void 0))||v||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,Y]of g)this.g.setRequestHeader(z,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ji(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){di(this,z)}};function di(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Yi(l),Yt(l)}function Yi(l){l.A||(l.A=!0,at(l,"complete"),at(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,at(this,"complete"),at(this,"abort"),Yt(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yt(this,!0)),We.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?fo(this):this.bb())},i.bb=function(){fo(this)};function fo(l){if(l.h&&typeof f<"u"&&(!l.v[1]||jt(l)!=4||l.Z()!=2)){if(l.u&&jt(l)==4)Xs(l.Ea,0,l);else if(at(l,"readystatechange"),jt(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var v;if(v=Y===0){var L=String(l.D).match(ci)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),v=!gu.test(L?L.toLowerCase():"")}g=v}if(g)at(l,"complete"),at(l,"success");else{l.m=6;try{var z=2<jt(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Yi(l)}}finally{Yt(l)}}}}function Yt(l,d){if(l.g){Ji(l);const g=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||at(l,"ready");try{g.onreadystatechange=v}catch{}}}function Ji(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function jt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<jt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),eo(d)}};function po(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Zi(l){const d={};l=(l.g&&2<=jt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(fe(l[v]))continue;var g=x(l[v]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const z=d[L]||[];d[L]=z,z.push(g)}V(d,function(v){return v.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function On(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function mo(l){this.Aa=0,this.i=[],this.j=new si,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=On("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=On("baseRetryDelayMs",5e3,l),this.cb=On("retryDelaySeedMs",1e4,l),this.Wa=On("forwardChannelMaxRetries",2,l),this.wa=On("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ui(l&&l.concurrentRequestLimit),this.Da=new mu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=mo.prototype,i.la=8,i.G=1,i.connect=function(l,d,g,v){et(0),this.W=l,this.H=d||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Aa(this,null,this.W),Fn(this)};function wt(l){if(es(l),l.G==3){var d=l.U++,g=Xt(l.I);if(ze(g,"SID",l.K),ze(g,"RID",d),ze(g,"TYPE","terminate"),nr(l,g),d=new vn(l,l.j,d),d.L=2,d.v=Sr(Xt(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=Ra(d.j,null),d.g.ea(d.v)),d.F=Date.now(),je(d)}Sa(l)}function Sn(l){l.g&&(go(l),l.g.cancel(),l.g=null)}function es(l){Sn(l),l.u&&(m.clearTimeout(l.u),l.u=null),rs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Fn(l){if(!Gt(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ue||ee(),J||(Ue(),J=!0),ae.add(d,l),l.B=0}}function yu(l,d){return fa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=gn(F(l.Ga,l,d),Ia(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new vn(this,this.j,l);let z=this.o;if(this.S&&(z?(z=T(z),P(z,this.S)):z=this.S),this.m!==null||this.O||(L.H=z,z=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Pr(this,L,d),g=Xt(this.I),ze(g,"RID",l),ze(g,"CVER",22),this.D&&ze(g,"X-HTTP-Session-Id",this.D),nr(this,g),z&&(this.O?d="headers="+encodeURIComponent(String(tr(z)))+"&"+d:this.m&&Cr(g,this.m,z)),uo(this.h,L),this.Ua&&ze(g,"TYPE","init"),this.P?(ze(g,"$req",d),ze(g,"SID","null"),L.T=!0,Qi(L,g,null)):Qi(L,g,d),this.G=2}}else this.G==3&&(l?ts(this,l):this.i.length==0||Gt(this.h)||ts(this))};function ts(l,d){var g;d?g=d.l:g=l.U++;const v=Xt(l.I);ze(v,"SID",l.K),ze(v,"RID",g),ze(v,"AID",l.T),nr(l,v),l.m&&l.o&&Cr(v,l.m,l.o),g=new vn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Pr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),uo(l.h,g),Qi(g,v,d)}function nr(l,d){l.H&&Ae(l.H,function(g,v){ze(d,v,g)}),l.l&&wr({},function(g,v){ze(d,v,g)})}function Pr(l,d,g){g=Math.min(l.i.length,g);var v=l.l?F(l.l.Na,l.l,l):null;e:{var L=l.i;let z=-1;for(;;){const Y=["count="+g];z==-1?0<g?(z=L[0].g,Y.push("ofs="+z)):z=0:Y.push("ofs="+z);let Fe=!0;for(let lt=0;lt<g;lt++){let ke=L[lt].g;const mt=L[lt].map;if(ke-=z,0>ke)z=Math.max(0,L[lt].g-100),Fe=!1;else try{Ea(mt,Y,"req"+ke+"_")}catch{v&&v(mt)}}if(Fe){v=Y.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,v}function pi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ue||ee(),J||(Ue(),J=!0),ae.add(d,l),l.v=0}}function ns(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=gn(F(l.Fa,l),Ia(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Ta(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=gn(F(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Sn(this),Ta(this))};function go(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Ta(l){l.g=new vn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Xt(l.qa);ze(d,"RID","rpc"),ze(d,"SID",l.K),ze(d,"AID",l.T),ze(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(d,"TO",l.ja),ze(d,"TYPE","xmlhttp"),nr(l,d),l.m&&l.o&&Cr(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Sr(Xt(d)),g.m=null,g.P=!0,ao(g,l)}i.Za=function(){this.C!=null&&(this.C=null,Sn(this),ns(this),et(19))};function rs(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function is(l,d){var g=null;if(l.g==d){rs(l),go(l),l.g=null;var v=2}else if(Ot(l.h,d))g=d.D,da(l.h,d),v=1;else return;if(l.G!=0){if(d.o)if(v==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;v=ii(),at(v,new $i(v,g)),Fn(l)}else pi(l);else if(L=d.s,L==3||L==0&&0<d.X||!(v==1&&yu(l,d)||v==2&&ns(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),L){case 1:rr(l,5);break;case 4:rr(l,10);break;case 3:rr(l,6);break;default:rr(l,2)}}}function Ia(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function rr(l,d){if(l.j.info("Error code "+d),d==2){var g=F(l.fb,l),v=l.Xa;const L=!v;v=new Zn(v||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||hi(v,"https"),Sr(v),L?pu(v.toString(),g):va(v.toString(),g)}else et(2);l.G=0,l.l&&l.l.sa(d),Sa(l),es(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Sa(l){if(l.G=0,l.ka=[],l.l){const d=pa(l.h);(d.length!=0||l.i.length!=0)&&(q(l.ka,d),q(l.ka,l.i),l.h.i.length=0,X(l.i),l.i.length=0),l.l.ra()}}function Aa(l,d,g){var v=g instanceof Zn?Xt(g):new Zn(g);if(v.g!="")d&&(v.g=d+"."+v.g),Tr(v,v.s);else{var L=m.location;v=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var z=new Zn(null);v&&hi(z,v),d&&(z.g=d),L&&Tr(z,L),g&&(z.l=g),v=z}return g=l.D,d=l.ya,g&&d&&ze(v,g,d),ze(v,"VER",l.la),nr(l,v),v}function Ra(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new We(new er({eb:g})):new We(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function yo(){}i=yo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ss(){}ss.prototype.g=function(l,d){return new Ft(l,d)};function Ft(l,d){ot.call(this),this.g=new mo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!fe(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!fe(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Un(this)}G(Ft,ot),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){wt(this.g)},Ft.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Zs(l),l=g);d.i.push(new ha(d.Ya++,l)),d.G==3&&Fn(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,wt(this.g),delete this.g,Ft.aa.N.call(this)};function Ca(l){Nn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}G(Ca,Nn);function Pa(){bi.call(this),this.status=1}G(Pa,bi);function Un(l){this.g=l}G(Un,yo),Un.prototype.ua=function(){at(this.g,"a")},Un.prototype.ta=function(l){at(this.g,new Ca(l))},Un.prototype.sa=function(l){at(this.g,new Pa)},Un.prototype.ra=function(){at(this.g,"b")},ss.prototype.createWebChannel=ss.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,Im=function(){return new ss},Tm=function(){return ii()},wm=Dn,nh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,Cl=Hi,aa.COMPLETE="complete",Em=aa,ji.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",ot.prototype.listen=ot.prototype.K,bo=ji,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,vm=We}).apply(typeof Tl<"u"?Tl:typeof self<"u"?self:typeof window<"u"?window:{});const vp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bs="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new fm("@firebase/firestore");function Cs(){return xi.logLevel}function te(i,...e){if(xi.logLevel<=xe.DEBUG){const n=e.map(vh);xi.debug(`Firestore (${bs}): ${i}`,...n)}}function mr(i,...e){if(xi.logLevel<=xe.ERROR){const n=e.map(vh);xi.error(`Firestore (${bs}): ${i}`,...n)}}function Ls(i,...e){if(xi.logLevel<=xe.WARN){const n=e.map(vh);xi.warn(`Firestore (${bs}): ${i}`,...n)}}function vh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(i="Unexpected state"){const e=`FIRESTORE (${bs}) INTERNAL ASSERTION FAILED: `+i;throw mr(e),new Error(e)}function Oe(i,e){i||pe()}function ye(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class Qv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Kv{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0);let s=this.i;const a=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let c=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Vi,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const _=c;e.enqueueRetryable(async()=>{await _.promise,await a(this.currentUser)})},m=_=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(_=>m(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?m(_):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Vi)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Oe(typeof s.accessToken=="string"),new Sm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Lt(e)}}class Gv{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Xv{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new Gv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jv{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Oe(this.o===void 0);const s=c=>{c.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,te("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new Yv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Zv(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%e.length))}return s}}function Ce(i,e){return i<e?-1:i>e?1:0}function Ms(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ft(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new ft(0,0))}static max(){return new me(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(),s===void 0?s=e.length-n:s>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return $n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $n?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=$n.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Math.sign(e.length-n.length)}static compareSegments(e,n){const s=$n.isNumericId(e),a=$n.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?$n.extractNumericId(e).compare($n.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class Ke extends $n{construct(e,n,s){return new Ke(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const eE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends $n{construct(e,n,s){return new At(e,n,s)}static isValidIdentifier(e){return eE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new le(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new le(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[a+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new le(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=_,a+=2}else m==="`"?(f=!f,a++):m!=="."||f?(s+=m,a++):(c(),a++)}if(c(),f)throw new le(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Ke.fromString(e))}static fromName(e){return new he(Ke.fromString(e).popFirst(5))}static empty(){return new he(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ke(e.slice()))}}function tE(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=me.fromTimestamp(s===1e9?new ft(n+1,0):new ft(n,s));return new Kr(a,he.empty(),e)}function nE(i){return new Kr(i.readTime,i.key,-1)}class Kr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Kr(me.min(),he.empty(),-1)}static max(){return new Kr(me.max(),he.empty(),-1)}}function rE(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(i.documentKey,e.documentKey),n!==0?n:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(i){if(i.code!==Q.FAILED_PRECONDITION||i.message!==iE)throw i;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,s)=>{n(e)})}static reject(e){return new j((n,s)=>{s(e)})}static waitFor(e){return new j((n,s)=>{let a=0,c=0,f=!1;e.forEach(m=>{++a,m.next(()=>{++c,f&&c===a&&n()},_=>s(_))}),f=!0,c===a&&n()})}static or(e){let n=j.resolve(!1);for(const s of e)n=n.next(a=>a?j.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new j((s,a)=>{const c=e.length,f=new Array(c);let m=0;for(let _=0;_<c;_++){const E=_;n(e[E]).next(I=>{f[E]=I,++m,m===c&&s(f)},I=>a(I))}})}static doWhile(e,n){return new j((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function oE(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qs(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ql.oe=-1;function Kl(i){return i==null}function Ol(i){return i===0&&1/i==-1/0}function aE(i){return typeof i=="number"&&Number.isInteger(i)&&!Ol(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ep(e)),e=uE(i.get(n),e);return Ep(e)}function uE(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function Ep(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Zr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Rm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Il(this.root,e,this.comparator,!1)}getReverseIterator(){return new Il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Il(this.root,e,this.comparator,!0)}}class Il{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??St.RED,this.left=a??St.EMPTY,this.right=c??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new St(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return St.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,s,a,c){return this}insert(e,n,s){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tp(this.data.getIterator())}getIteratorFrom(e){return new Tp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class Tp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new xn([])}unionWith(e){let n=new dt(At.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Cm("Invalid base64 string: "+c):c}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const cE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(i){if(Oe(!!i),typeof i=="string"){let e=0;const n=cE.exec(i);if(Oe(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(i.seconds),nanos:nt(i.nanos)}}function nt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Xr(i){return typeof i=="string"?Rt.fromBase64String(i):Rt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gl(i){const e=i.mapValue.fields.__previous_value__;return Eh(e)?Gl(e):e}function Jo(i){const e=Gr(i.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n,s,a,c,f,m,_,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=E}}class Zo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Zo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Eh(i)?4:dE(i)?9007199254740991:fE(i)?10:11:pe()}function Wn(i,e){if(i===e)return!0;const n=Yr(i);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Jo(i).isEqual(Jo(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=Gr(a.timestampValue),m=Gr(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return Xr(a.bytesValue).isEqual(Xr(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return nt(a.geoPointValue.latitude)===nt(c.geoPointValue.latitude)&&nt(a.geoPointValue.longitude)===nt(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return nt(a.integerValue)===nt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=nt(a.doubleValue),m=nt(c.doubleValue);return f===m?Ol(f)===Ol(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return Ms(i.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return function(a,c){const f=a.mapValue.fields||{},m=c.mapValue.fields||{};if(wp(f)!==wp(m))return!1;for(const _ in f)if(f.hasOwnProperty(_)&&(m[_]===void 0||!Wn(f[_],m[_])))return!1;return!0}(i,e);default:return pe()}}function ea(i,e){return(i.values||[]).find(n=>Wn(n,e))!==void 0}function Os(i,e){if(i===e)return 0;const n=Yr(i),s=Yr(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return function(c,f){const m=nt(c.integerValue||c.doubleValue),_=nt(f.integerValue||f.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1}(i,e);case 3:return Ip(i.timestampValue,e.timestampValue);case 4:return Ip(Jo(i),Jo(e));case 5:return Ce(i.stringValue,e.stringValue);case 6:return function(c,f){const m=Xr(c),_=Xr(f);return m.compareTo(_)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const m=c.split("/"),_=f.split("/");for(let E=0;E<m.length&&E<_.length;E++){const I=Ce(m[E],_[E]);if(I!==0)return I}return Ce(m.length,_.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const m=Ce(nt(c.latitude),nt(f.latitude));return m!==0?m:Ce(nt(c.longitude),nt(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Sp(i.arrayValue,e.arrayValue);case 10:return function(c,f){var m,_,E,I;const k=c.fields||{},F=f.fields||{},B=(m=k.value)===null||m===void 0?void 0:m.arrayValue,G=(_=F.value)===null||_===void 0?void 0:_.arrayValue,X=Ce(((E=B==null?void 0:B.values)===null||E===void 0?void 0:E.length)||0,((I=G==null?void 0:G.values)===null||I===void 0?void 0:I.length)||0);return X!==0?X:Sp(B,G)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===Sl.mapValue&&f===Sl.mapValue)return 0;if(c===Sl.mapValue)return 1;if(f===Sl.mapValue)return-1;const m=c.fields||{},_=Object.keys(m),E=f.fields||{},I=Object.keys(E);_.sort(),I.sort();for(let k=0;k<_.length&&k<I.length;++k){const F=Ce(_[k],I[k]);if(F!==0)return F;const B=Os(m[_[k]],E[I[k]]);if(B!==0)return B}return Ce(_.length,I.length)}(i.mapValue,e.mapValue);default:throw pe()}}function Ip(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const n=Gr(i),s=Gr(e),a=Ce(n.seconds,s.seconds);return a!==0?a:Ce(n.nanos,s.nanos)}function Sp(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=Os(n[a],s[a]);if(c)return c}return Ce(n.length,s.length)}function Fs(i){return rh(i)}function rh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=Gr(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Xr(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return he.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=rh(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${rh(n.fields[f])}`;return a+"}"}(i.mapValue):pe()}function Pl(i){switch(Yr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gl(i);return e?16+Pl(e):16;case 5:return 2*i.stringValue.length;case 6:return Xr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+Pl(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return Zr(s.fields,(c,f)=>{a+=c.length+Pl(f)}),a}(i.mapValue);default:throw pe()}}function ih(i){return!!i&&"integerValue"in i}function wh(i){return!!i&&"arrayValue"in i}function Ap(i){return!!i&&"nullValue"in i}function Rp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function kl(i){return!!i&&"mapValue"in i}function fE(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Wo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Zr(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Wo(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wo(i.arrayValue.values[n]);return e}return Object.assign({},i)}function dE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wo(n)}setAll(e){let n=At.emptyPath(),s={},a=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const _=this.getFieldsMap(n);this.applyChanges(_,s,a),s={},a=[],n=m.popLast()}f?s[m.lastSegment()]=Wo(f):a.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];kl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Zr(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new nn(Wo(this.value))}}function Pm(i){const e=[];return Zr(i.fields,(n,s)=>{const a=new At([n]);if(kl(s)){const c=Pm(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,s,a,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Mt(e,0,me.min(),me.min(),me.min(),nn.empty(),0)}static newFoundDocument(e,n,s,a){return new Mt(e,1,n,me.min(),s,a,0)}static newNoDocument(e,n){return new Mt(e,2,n,me.min(),me.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,me.min(),me.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.position=e,this.inclusive=n}}function Cp(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=he.comparator(he.fromName(f.referenceValue),n.key):s=Os(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Pp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Wn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function pE(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{}class ht extends km{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new gE(e,n,s):n==="array-contains"?new vE(e,s):n==="in"?new EE(e,s):n==="not-in"?new wE(e,s):n==="array-contains-any"?new TE(e,s):new ht(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new yE(e,s):new _E(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Os(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(Os(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends km{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Qn(e,n)}matches(e){return Vm(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vm(i){return i.op==="and"}function xm(i){return mE(i)&&Vm(i)}function mE(i){for(const e of i.filters)if(e instanceof Qn)return!1;return!0}function sh(i){if(i instanceof ht)return i.field.canonicalString()+i.op.toString()+Fs(i.value);if(xm(i))return i.filters.map(e=>sh(e)).join(",");{const e=i.filters.map(n=>sh(n)).join(",");return`${i.op}(${e})`}}function Nm(i,e){return i instanceof ht?function(s,a){return a instanceof ht&&s.op===a.op&&s.field.isEqual(a.field)&&Wn(s.value,a.value)}(i,e):i instanceof Qn?function(s,a){return a instanceof Qn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,f,m)=>c&&Nm(f,a.filters[m]),!0):!1}(i,e):void pe()}function Dm(i){return i instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(i):i instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(Dm).join(" ,")+"}"}(i):"Filter"}class gE extends ht{constructor(e,n,s){super(e,n,s),this.key=he.fromName(s.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class yE extends ht{constructor(e,n){super(e,"in",n),this.keys=Lm("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _E extends ht{constructor(e,n){super(e,"not-in",n),this.keys=Lm("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Lm(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>he.fromName(s.referenceValue))}class vE extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wh(n)&&ea(n.arrayValue,this.value)}}class EE extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ea(this.value.arrayValue,n)}}class wE extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(ea(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ea(this.value.arrayValue,n)}}class TE extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ea(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n=null,s=[],a=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=m,this.ue=null}}function kp(i,e=null,n=[],s=[],a=null,c=null,f=null){return new IE(i,e,n,s,a,c,f)}function Th(i){const e=ye(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>sh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),Kl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Fs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Fs(s)).join(",")),e.ue=n}return e.ue}function Ih(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!pE(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Nm(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Pp(i.startAt,e.startAt)&&Pp(i.endAt,e.endAt)}function oh(i){return he.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n=null,s=[],a=[],c=null,f="F",m=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=_,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function SE(i,e,n,s,a,c,f,m){return new Xl(i,e,n,s,a,c,f,m)}function Sh(i){return new Xl(i)}function Vp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function AE(i){return i.collectionGroup!==null}function Qo(i){const e=ye(i);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new dt(At.comparator);return f.filters.forEach(_=>{_.getFlattenedFilters().forEach(E=>{E.isInequality()&&(m=m.add(E.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Ul(c,s))}),n.has(At.keyField().canonicalString())||e.ce.push(new Ul(At.keyField(),s))}return e.ce}function qn(i){const e=ye(i);return e.le||(e.le=RE(e,Qo(i))),e.le}function RE(i,e){if(i.limitType==="F")return kp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new Ul(a.field,c)});const n=i.endAt?new Fl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Fl(i.startAt.position,i.startAt.inclusive):null;return kp(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ah(i,e,n){return new Xl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Yl(i,e){return Ih(qn(i),qn(e))&&i.limitType===e.limitType}function Mm(i){return`${Th(qn(i))}|lt:${i.limitType}`}function Ps(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>Dm(a)).join(", ")}]`),Kl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Fs(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Fs(a)).join(",")),`Target(${s})`}(qn(i))}; limitType=${i.limitType})`}function Jl(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):he.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of Qo(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(f,m,_){const E=Cp(f,m,_);return f.inclusive?E<=0:E<0}(s.startAt,Qo(s),a)||s.endAt&&!function(f,m,_){const E=Cp(f,m,_);return f.inclusive?E>=0:E>0}(s.endAt,Qo(s),a))}(i,e)}function CE(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Om(i){return(e,n)=>{let s=!1;for(const a of Qo(i)){const c=PE(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function PE(i,e,n){const s=i.field.isKeyField()?he.comparator(e.key,n.key):function(c,f,m){const _=f.data.field(c),E=m.data.field(c);return _!==null&&E!==null?Os(_,E):pe()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Rm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=new Ye(he.comparator);function gr(){return kE}const Fm=new Ye(he.comparator);function $o(...i){let e=Fm;for(const n of i)e=e.insert(n.key,n);return e}function Um(i){let e=Fm;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ki(){return Ko()}function zm(){return Ko()}function Ko(){return new Ni(i=>i.toString(),(i,e)=>i.isEqual(e))}const VE=new Ye(he.comparator),xE=new dt(he.comparator);function Se(...i){let e=xE;for(const n of i)e=e.add(n);return e}const NE=new dt(Ce);function DE(){return NE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ol(e)?"-0":e}}function Bm(i){return{integerValue:""+i}}function LE(i,e){return aE(e)?Bm(e):Ah(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this._=void 0}}function ME(i,e,n){return i instanceof zl?function(a,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Eh(c)&&(c=Gl(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}}(n,e):i instanceof ta?bm(i,e):i instanceof na?$m(i,e):function(a,c){const f=jm(a,c),m=xp(f)+xp(a.Pe);return ih(f)&&ih(a.Pe)?Bm(m):Ah(a.serializer,m)}(i,e)}function OE(i,e,n){return i instanceof ta?bm(i,e):i instanceof na?$m(i,e):n}function jm(i,e){return i instanceof Bl?function(s){return ih(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class zl extends Zl{}class ta extends Zl{constructor(e){super(),this.elements=e}}function bm(i,e){const n=qm(e);for(const s of i.elements)n.some(a=>Wn(a,s))||n.push(s);return{arrayValue:{values:n}}}class na extends Zl{constructor(e){super(),this.elements=e}}function $m(i,e){let n=qm(e);for(const s of i.elements)n=n.filter(a=>!Wn(a,s));return{arrayValue:{values:n}}}class Bl extends Zl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function xp(i){return nt(i.integerValue||i.doubleValue)}function qm(i){return wh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function FE(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof ta&&a instanceof ta||s instanceof na&&a instanceof na?Ms(s.elements,a.elements,Wn):s instanceof Bl&&a instanceof Bl?Wn(s.Pe,a.Pe):s instanceof zl&&a instanceof zl}(i.transform,e.transform)}class UE{constructor(e,n){this.version=e,this.transformResults=n}}class fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class eu{}function Hm(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Qm(i.key,fr.none()):new tu(i.key,i.data,fr.none());{const n=i.data,s=nn.empty();let a=new dt(At.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new Di(i.key,s,new xn(a.toArray()),fr.none())}}function zE(i,e,n){i instanceof tu?function(a,c,f){const m=a.value.clone(),_=Dp(a.fieldTransforms,c,f.transformResults);m.setAll(_),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Di?function(a,c,f){if(!Vl(a.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Dp(a.fieldTransforms,c,f.transformResults),_=c.data;_.setAll(Wm(a)),_.setAll(m),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()}(i,e,n):function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Go(i,e,n,s){return i instanceof tu?function(c,f,m,_){if(!Vl(c.precondition,f))return m;const E=c.value.clone(),I=Lp(c.fieldTransforms,_,f);return E.setAll(I),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),null}(i,e,n,s):i instanceof Di?function(c,f,m,_){if(!Vl(c.precondition,f))return m;const E=Lp(c.fieldTransforms,_,f),I=f.data;return I.setAll(Wm(c)),I.setAll(E),f.convertToFoundDocument(f.version,I).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(k=>k.field))}(i,e,n,s):function(c,f,m){return Vl(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function BE(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=jm(s.transform,a||null);c!=null&&(n===null&&(n=nn.empty()),n.set(s.field,c))}return n||null}function Np(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Ms(s,a,(c,f)=>FE(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class tu extends eu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Di extends eu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Wm(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Dp(i,e,n){const s=new Map;Oe(i.length===n.length);for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,m=e.data.field(c.field);s.set(c.field,OE(f,m,n[a]))}return s}function Lp(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,ME(c,f,e))}return s}class Qm extends eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jE extends eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&zE(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Go(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Go(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=zm();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(a.key)?null:m;const _=Hm(f,m);_!==null&&s.set(a.key,_),f.isValidDocument()||f.convertToNoDocument(me.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(n,s)=>Np(n,s))&&Ms(this.baseMutations,e.baseMutations,(n,s)=>Np(n,s))}}class Rh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Oe(e.mutations.length===s.length);let a=function(){return VE}();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Rh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ve;function HE(i){switch(i){default:return pe();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function Km(i){if(i===void 0)return mr("GRPC error has no .code"),Q.UNKNOWN;switch(i){case st.OK:return Q.OK;case st.CANCELLED:return Q.CANCELLED;case st.UNKNOWN:return Q.UNKNOWN;case st.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case st.INTERNAL:return Q.INTERNAL;case st.UNAVAILABLE:return Q.UNAVAILABLE;case st.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case st.NOT_FOUND:return Q.NOT_FOUND;case st.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case st.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case st.ABORTED:return Q.ABORTED;case st.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case st.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case st.DATA_LOSS:return Q.DATA_LOSS;default:return pe()}}(Ve=st||(st={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=new Wr([4294967295,4294967295],0);function Mp(i){const e=WE().encode(i),n=new _m;return n.update(e),new Uint8Array(n.digest())}function Op(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Wr([n,s],0),new Wr([a,c],0)]}class Ch{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new qo(`Invalid padding: ${n}`);if(s<0)throw new qo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new qo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new qo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Wr.fromNumber(this.Te)}de(e,n,s){let a=e.add(n.multiply(Wr.fromNumber(s)));return a.compare(QE)===1&&(a=new Wr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Mp(e),[s,a]=Op(n);for(let c=0;c<this.hashCount;c++){const f=this.de(s,a,c);if(!this.Ee(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Ch(c,a,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Te===0)return;const n=Mp(e),[s,a]=Op(n);for(let c=0;c<this.hashCount;c++){const f=this.de(s,a,c);this.Ae(f)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ra.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new nu(me.min(),a,new Ye(Ce),gr(),Se())}}class ra{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ra(s,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class Gm{constructor(e,n){this.targetId=e,this.me=n}}class Xm{constructor(e,n,s=Rt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Fp{constructor(){this.fe=0,this.ge=Up(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),s=Se();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:pe()}}),new ra(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=Up()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class KE{constructor(e){this.Be=e,this.Le=new Map,this.ke=gr(),this.qe=Al(),this.Qe=Al(),this.Ke=new Ye(Ce)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const c=a.target;if(oh(c))if(s===0){const f=new he(c.path);this.We(n,f,Mt.newNoDocument(f,me.min()))}else Oe(s===1);else{const f=this.Ze(n);if(f!==s){const m=this.Xe(e),_=m?this.et(m,e,f):1;if(_!==0){this.He(n);const E=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,E)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,m;try{f=Xr(s).toUint8Array()}catch(_){if(_ instanceof Cm)return Ls("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new Ch(f,a,c)}catch(_){return Ls(_ instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Be.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const f=this.Be.nt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(n,c,null),a++)}),a}it(e){const n=new Map;this.Le.forEach((c,f)=>{const m=this.Ye(f);if(m){if(c.current&&oh(m.target)){const _=new he(m.target.path);this.st(_).has(f)||this.ot(f,_)||this.We(f,_,Mt.newNoDocument(_,e))}c.be&&(n.set(f,c.ve()),c.Ce())}});let s=Se();this.Qe.forEach((c,f)=>{let m=!0;f.forEachWhile(_=>{const E=this.Ye(_);return!E||E.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ke.forEach((c,f)=>f.setReadTime(e));const a=new nu(e,n,this.Ke,this.ke,s);return this.ke=gr(),this.qe=Al(),this.Qe=Al(),this.Ke=new Ye(Ce),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new Fp,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new dt(Ce),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(Ce),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Fp),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function Al(){return new Ye(he.comparator)}function Up(){return new Ye(he.comparator)}const GE={asc:"ASCENDING",desc:"DESCENDING"},XE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YE={and:"AND",or:"OR"};class JE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lh(i,e){return i.useProto3Json||Kl(e)?e:{value:e}}function jl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ym(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function ZE(i,e){return jl(i,e.toTimestamp())}function Hn(i){return Oe(!!i),me.fromTimestamp(function(n){const s=Gr(n);return new ft(s.seconds,s.nanos)}(i))}function Ph(i,e){return uh(i,e).canonicalString()}function uh(i,e){const n=function(a){return new Ke(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Jm(i){const e=Ke.fromString(i);return Oe(rg(e)),e}function ch(i,e){return Ph(i.databaseId,e.path)}function Wc(i,e){const n=Jm(e);if(n.get(1)!==i.databaseId.projectId)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new he(eg(n))}function Zm(i,e){return Ph(i.databaseId,e)}function ew(i){const e=Jm(i);return e.length===4?Ke.emptyPath():eg(e)}function hh(i){return new Ke(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function eg(i){return Oe(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function zp(i,e,n){return{name:ch(i,e),fields:n.value.mapValue.fields}}function tw(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(E,I){return E.useProto3Json?(Oe(I===void 0||typeof I=="string"),Rt.fromBase64String(I||"")):(Oe(I===void 0||I instanceof Buffer||I instanceof Uint8Array),Rt.fromUint8Array(I||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(E){const I=E.code===void 0?Q.UNKNOWN:Km(E.code);return new le(I,E.message||"")}(f);n=new Xm(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Wc(i,s.document.name),c=Hn(s.document.updateTime),f=s.document.createTime?Hn(s.document.createTime):me.min(),m=new nn({mapValue:{fields:s.document.fields}}),_=Mt.newFoundDocument(a,c,f,m),E=s.targetIds||[],I=s.removedTargetIds||[];n=new xl(E,I,_.key,_)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Wc(i,s.document),c=s.readTime?Hn(s.readTime):me.min(),f=Mt.newNoDocument(a,c),m=s.removedTargetIds||[];n=new xl([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Wc(i,s.document),c=s.removedTargetIds||[];n=new xl([],c,a,null)}else{if(!("filter"in e))return pe();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new qE(a,c),m=s.targetId;n=new Gm(m,f)}}return n}function nw(i,e){let n;if(e instanceof tu)n={update:zp(i,e.key,e.value)};else if(e instanceof Qm)n={delete:ch(i,e.key)};else if(e instanceof Di)n={update:zp(i,e.key,e.data),updateMask:hw(e.fieldMask)};else{if(!(e instanceof jE))return pe();n={verify:ch(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const m=f.transform;if(m instanceof zl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ta)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof na)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Bl)return{fieldPath:f.field.canonicalString(),increment:m.Pe};throw pe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:ZE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pe()}(i,e.precondition)),n}function rw(i,e){return i&&i.length>0?(Oe(e!==void 0),i.map(n=>function(a,c){let f=a.updateTime?Hn(a.updateTime):Hn(c);return f.isEqual(me.min())&&(f=Hn(c)),new UE(f,a.transformResults||[])}(n,e))):[]}function iw(i,e){return{documents:[Zm(i,e.path)]}}function sw(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Zm(i,a);const c=function(E){if(E.length!==0)return ng(Qn.create(E,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(E){if(E.length!==0)return E.map(I=>function(F){return{field:ks(F.field),direction:lw(F.dir)}}(I))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=lh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(E){return{before:E.inclusive,values:E.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(e.endAt)),{ct:n,parent:a}}function ow(i){let e=ew(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Oe(s===1);const I=n.from[0];I.allDescendants?a=I.collectionId:e=e.child(I.collectionId)}let c=[];n.where&&(c=function(k){const F=tg(k);return F instanceof Qn&&xm(F)?F.getFilters():[F]}(n.where));let f=[];n.orderBy&&(f=function(k){return k.map(F=>function(G){return new Ul(Vs(G.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(F))}(n.orderBy));let m=null;n.limit&&(m=function(k){let F;return F=typeof k=="object"?k.value:k,Kl(F)?null:F}(n.limit));let _=null;n.startAt&&(_=function(k){const F=!!k.before,B=k.values||[];return new Fl(B,F)}(n.startAt));let E=null;return n.endAt&&(E=function(k){const F=!k.before,B=k.values||[];return new Fl(B,F)}(n.endAt)),SE(e,a,f,c,m,"F",_,E)}function aw(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Vs(n.unaryFilter.field);return ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Vs(n.unaryFilter.field);return ht.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Vs(n.unaryFilter.field);return ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Vs(n.unaryFilter.field);return ht.create(f,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(i):i.fieldFilter!==void 0?function(n){return ht.create(Vs(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(s=>tg(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(i):pe()}function lw(i){return GE[i]}function uw(i){return XE[i]}function cw(i){return YE[i]}function ks(i){return{fieldPath:i.canonicalString()}}function Vs(i){return At.fromServerFormat(i.fieldPath)}function ng(i){return i instanceof ht?function(n){if(n.op==="=="){if(Rp(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NAN"}};if(Ap(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rp(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NAN"}};if(Ap(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(n.field),op:uw(n.op),value:n.value}}}(i):i instanceof Qn?function(n){const s=n.getFilters().map(a=>ng(a));return s.length===1?s[0]:{compositeFilter:{op:cw(n.op),filters:s}}}(i):pe()}function hw(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,s,a,c=me.min(),f=me.min(),m=Rt.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.ht=e}}function dw(i){const e=ow({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ah(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.ln=new mw}addToCollectionParentIndex(e,n){return this.ln.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Kr.min())}updateCollectionGroup(e,n,s){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class mw{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new dt(Ke.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new dt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Us(0)}static Qn(){return new Us(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp([i,e],[n,s]){const a=Ce(i,n);return a===0?Ce(e,s):a}class gw{constructor(e){this.Gn=e,this.buffer=new dt(jp),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();jp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yw{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qs(n)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await $s(n)}await this.Yn(3e5)})}}class _w{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Ql.oe);const s=new gw(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Bp)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bp):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,c,f,m,_,E;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),a=this.params.maximumSequenceNumbersToCollect):a=k,f=Date.now(),this.nthSequenceNumber(e,a))).next(k=>(s=k,m=Date.now(),this.removeTargets(e,s,n))).next(k=>(c=k,_=Date.now(),this.removeOrphanedDocuments(e,s))).next(k=>(E=Date.now(),Cs()<=xe.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-I}ms
	Determined least recently used ${a} in `+(m-f)+`ms
	Removed ${c} targets in `+(_-m)+`ms
	Removed ${k} documents in `+(E-_)+`ms
Total Duration: ${E-I}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:k})))}}function vw(i,e){return new _w(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.changes=new Ni(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?j.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&Go(s.mutation,a,xn.empty(),ft.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Se()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Se()){const a=ki();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let f=$o();return c.forEach((m,_)=>{f=f.insert(m,_.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=ki();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Se()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,a){let c=gr();const f=Ko(),m=function(){return Ko()}();return n.forEach((_,E)=>{const I=s.get(E.key);a.has(E.key)&&(I===void 0||I.mutation instanceof Di)?c=c.insert(E.key,E):I!==void 0?(f.set(E.key,I.mutation.getFieldMask()),Go(I.mutation,E,I.mutation.getFieldMask(),ft.now())):f.set(E.key,xn.empty())}),this.recalculateAndSaveOverlays(e,c).next(_=>(_.forEach((E,I)=>f.set(E,I)),n.forEach((E,I)=>{var k;return m.set(E,new ww(I,(k=f.get(E))!==null&&k!==void 0?k:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Ko();let a=new Ye((f,m)=>f-m),c=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(_=>{const E=n.get(_);if(E===null)return;let I=s.get(_)||xn.empty();I=m.applyToLocalView(E,I),s.set(_,I);const k=(a.get(m.batchId)||Se()).add(_);a=a.insert(m.batchId,k)})}).next(()=>{const f=[],m=a.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),E=_.key,I=_.value,k=zm();I.forEach(F=>{if(!c.has(F)){const B=Hm(n.get(F),s.get(F));B!==null&&k.set(F,B),c=c.add(F)}}),f.push(this.documentOverlayCache.saveOverlays(e,E,k))}return j.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(f){return he.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):j.resolve(ki());let m=-1,_=c;return f.next(E=>j.forEach(E,(I,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),c.get(I)?j.resolve():this.remoteDocumentCache.getEntry(e,I).next(F=>{_=_.insert(I,F)}))).next(()=>this.populateOverlays(e,E,c)).next(()=>this.computeViews(e,_,E,Se())).next(I=>({batchId:m,changes:Um(I)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(s=>{let a=$o();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=$o();return this.indexManager.getCollectionParents(e,c).next(m=>j.forEach(m,_=>{const E=function(k,F){return new Xl(F,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)}(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,s,a).next(I=>{I.forEach((k,F)=>{f=f.insert(k,F)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(f=>{c.forEach((_,E)=>{const I=E.getKey();f.get(I)===null&&(f=f.insert(I,Mt.newInvalidDocument(I)))});let m=$o();return f.forEach((_,E)=>{const I=c.get(_);I!==void 0&&Go(I.mutation,E,xn.empty(),ft.now()),Jl(n,E)&&(m=m.insert(_,E))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return j.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Hn(a.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:dw(a.bundledQuery),readTime:Hn(a.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.overlays=new Ye(he.comparator),this.dr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ki();return j.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.Tt(e,n,c)}),j.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.dr.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.dr.delete(s)),j.resolve()}getOverlaysForCollection(e,n,s){const a=ki(),c=n.length+1,f=new he(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const _=m.getNext().value,E=_.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&_.largestBatchId>s&&a.set(_.getKey(),_)}return j.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Ye((E,I)=>E-I);const f=this.overlays.getIterator();for(;f.hasNext();){const E=f.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>s){let I=c.get(E.largestBatchId);I===null&&(I=ki(),c=c.insert(E.largestBatchId,I)),I.set(E.getKey(),E)}}const m=ki(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,I)=>m.set(E,I)),!(m.size()>=a)););return j.resolve(m)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.dr.get(a.largestBatchId).delete(s.key);this.dr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new $E(n,s));let c=this.dr.get(n);c===void 0&&(c=Se(),this.dr.set(n,c)),this.dr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.Er=new dt(vt.Ar),this.Rr=new dt(vt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const s=new vt(e,n);this.Er=this.Er.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new vt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new he(new Ke([])),s=new vt(n,e),a=new vt(n,e+1),c=[];return this.Rr.forEachInRange([s,a],f=>{this.gr(f),c.push(f.key)}),c}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new he(new Ke([])),s=new vt(n,e),a=new vt(n,e+1);let c=Se();return this.Rr.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new vt(e,0),s=this.Er.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class vt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return he.comparator(e.key,n.key)||Ce(e.br,n.br)}static Vr(e,n){return Ce(e.br,n.br)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new dt(vt.Ar)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new bE(c,n,s,a);this.mutationQueue.push(f);for(const m of a)this.vr=this.vr.add(new vt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return j.resolve(f)}lookupMutationBatch(e,n){return j.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),c=a<0?0:a;return j.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new vt(n,0),a=new vt(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([s,a],f=>{const m=this.Cr(f.br);c.push(m)}),j.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new dt(Ce);return n.forEach(a=>{const c=new vt(a,0),f=new vt(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,f],m=>{s=s.add(m.br)})}),j.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;he.isDocumentKey(c)||(c=c.child(""));const f=new vt(new he(c),0);let m=new dt(Ce);return this.vr.forEachWhile(_=>{const E=_.key.path;return!!s.isPrefixOf(E)&&(E.length===a&&(m=m.add(_.br)),!0)},f),j.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Oe(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return j.forEach(n.mutations,a=>{const c=new vt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Bn(e){}containsKey(e,n){const s=new vt(n,0),a=this.vr.firstAfterOrEqual(s);return j.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.Nr=e,this.docs=function(){return new Ye(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return j.resolve(s?s.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let s=gr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Mt.newInvalidDocument(a))}),j.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=gr();const f=n.path,m=new he(f.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:E,value:{document:I}}=_.getNext();if(!f.isPrefixOf(E.path))break;E.path.length>f.length+1||rE(nE(I),s)<=0||(a.has(I.key)||Jl(n,I))&&(c=c.insert(I.key,I.mutableCopy()))}return j.resolve(c)}getAllFromCollectionGroup(e,n,s,a){pe()}Br(e,n){return j.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Pw(this)}getSize(e){return j.resolve(this.size)}}class Pw extends Ew{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),j.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.persistence=e,this.Lr=new Ni(n=>Th(n),Ih),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.kr=0,this.qr=new kh,this.targetCount=0,this.Qr=Us.qn()}forEachTarget(e,n){return this.Lr.forEach((s,a)=>n(a)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),j.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Us(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Un(n),j.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.Lr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Lr.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),j.waitFor(c).next(()=>a)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const s=this.Lr.get(n)||null;return j.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),j.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),j.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return j.resolve(s)}containsKey(e,n){return j.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Ql(0),this.Ur=!1,this.Ur=!0,this.Wr=new Aw,this.referenceDelegate=e(this),this.Gr=new kw(this),this.indexManager=new pw,this.remoteDocumentCache=function(a){return new Cw(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new fw(n),this.jr=new Iw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Sw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new Rw(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){te("MemoryPersistence","Starting transaction:",e);const a=new Vw(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(c=>this.referenceDelegate.Jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Yr(e,n){return j.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class Vw extends sE{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.Zr=new kh,this.Xr=null}static ei(e){return new Vh(e)}get ti(){if(this.Xr)return this.Xr;throw pe()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),j.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),j.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.ti.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ti,s=>{const a=he.fromPath(s);return this.ni(e,a).next(c=>{c||n.removeEntry(a,me.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return j.or([()=>j.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class bl{constructor(e,n){this.persistence=e,this.ri=new Ni(s=>lE(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=vw(this,n)}static ei(e,n){return new bl(e,n)}Hr(){}Jr(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return j.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(c=>c?j.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.Br(e,f=>this.ir(e,f,n).next(m=>{m||(s++,c.removeEntry(f,me.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),j.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pl(e.data.value)),n}ir(e,n,s){return j.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return j.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=Se(),a=Se();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new xh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return V_()?8:oE(P_())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.Xi(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.es(e,n,a,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new xw;return this.ts(e,n,f).next(m=>{if(c.result=m,this.Hi)return this.ns(e,n,f,m.size)})}).next(()=>c.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(Cs()<=xe.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),j.resolve()):(Cs()<=xe.DEBUG&&te("QueryEngine","Query:",Ps(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(Cs()<=xe.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):j.resolve())}Xi(e,n){if(Vp(n))return j.resolve(null);let s=qn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=ah(n,null,"F"),s=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=Se(...c);return this.Zi.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(_=>{const E=this.rs(n,m);return this.ss(n,E,f,_.readTime)?this.Xi(e,ah(n,null,"F")):this.os(e,E,n,_)}))})))}es(e,n,s,a){return Vp(n)||a.isEqual(me.min())?j.resolve(null):this.Zi.getDocuments(e,s).next(c=>{const f=this.rs(n,c);return this.ss(n,f,s,a)?j.resolve(null):(Cs()<=xe.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ps(n)),this.os(e,f,n,tE(a,-1)).next(m=>m))})}rs(e,n){let s=new dt(Om(e));return n.forEach((a,c)=>{Jl(e,c)&&(s=s.add(c))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ts(e,n,s){return Cs()<=xe.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Ps(n)),this.Zi.getDocumentsMatchingQuery(e,n,Kr.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new Ye(Ce),this.cs=new Ni(c=>Th(c),Ih),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tw(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function Lw(i,e,n,s){return new Dw(i,e,n,s)}async function sg(i,e){const n=ye(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],m=[];let _=Se();for(const E of a){f.push(E.batchId);for(const I of E.mutations)_=_.add(I.key)}for(const E of c){m.push(E.batchId);for(const I of E.mutations)_=_.add(I.key)}return n.localDocuments.getDocuments(s,_).next(E=>({Ts:E,removedBatchIds:f,addedBatchIds:m}))})})}function Mw(i,e){const n=ye(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,_,E,I){const k=E.batch,F=k.keys();let B=j.resolve();return F.forEach(G=>{B=B.next(()=>I.getEntry(_,G)).next(X=>{const q=E.docVersions.get(G);Oe(q!==null),X.version.compareTo(q)<0&&(k.applyToRemoteDocument(X,E),X.isValidDocument()&&(X.setReadTime(E.commitVersion),I.addEntry(X)))})}),B.next(()=>m.mutationQueue.removeMutationBatch(_,k))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let _=Se();for(let E=0;E<m.mutationResults.length;++E)m.mutationResults[E].transformResults.length>0&&(_=_.add(m.batch.mutations[E].key));return _}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function og(i){const e=ye(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function Ow(i,e){const n=ye(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const m=[];e.targetChanges.forEach((I,k)=>{const F=a.get(k);if(!F)return;m.push(n.Gr.removeMatchingKeys(c,I.removedDocuments,k).next(()=>n.Gr.addMatchingKeys(c,I.addedDocuments,k)));let B=F.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(k)!==null?B=B.withResumeToken(Rt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):I.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(I.resumeToken,s)),a=a.insert(k,B),function(X,q,ge){return X.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0}(F,B,I)&&m.push(n.Gr.updateTargetData(c,B))});let _=gr(),E=Se();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,I))}),m.push(Fw(c,f,e.documentUpdates).next(I=>{_=I.Is,E=I.ds})),!s.isEqual(me.min())){const I=n.Gr.getLastRemoteSnapshotVersion(c).next(k=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(I)}return j.waitFor(m).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,_,E)).next(()=>_)}).then(c=>(n.us=a,c))}function Fw(i,e,n){let s=Se(),a=Se();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=gr();return n.forEach((m,_)=>{const E=c.get(m);_.isFoundDocument()!==E.isFoundDocument()&&(a=a.add(m)),_.isNoDocument()&&_.version.isEqual(me.min())?(e.removeEntry(m,_.readTime),f=f.insert(m,_)):!E.isValidDocument()||_.version.compareTo(E.version)>0||_.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(_),f=f.insert(m,_)):te("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",_.version)}),{Is:f,ds:a}})}function Uw(i,e){const n=ye(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function zw(i,e){const n=ye(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(c=>c?(a=c,j.resolve(a)):n.Gr.allocateTargetId(s).next(f=>(a=new $r(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function fh(i,e,n){const s=ye(i),a=s.us.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a))}catch(f){if(!qs(f))throw f;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function bp(i,e,n){const s=ye(i);let a=me.min(),c=Se();return s.persistence.runTransaction("Execute query","readwrite",f=>function(_,E,I){const k=ye(_),F=k.cs.get(I);return F!==void 0?j.resolve(k.us.get(F)):k.Gr.getTargetData(E,I)}(s,f,qn(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(f,m.targetId).next(_=>{c=_})}).next(()=>s._s.getDocumentsMatchingQuery(f,e,n?a:me.min(),n?c:Se())).next(m=>(Bw(s,CE(e),m),{documents:m,Es:c})))}function Bw(i,e,n){let s=i.ls.get(e)||me.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.ls.set(e,s)}class $p{constructor(){this.activeTargetIds=DE()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jw{constructor(){this._o=new $p,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new $p,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl=null;function Qc(){return Rl===null?Rl=function(){return 268435456+Math.round(2147483648*Math.random())}():Rl++,"0x"+Rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class Hw extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Oo(n,s,a,c,f){const m=Qc(),_=this.No(n,s.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${m}:`,_,a);const E={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(E,c,f),this.Lo(n,_,E,a).then(I=>(te("RestConnection",`Received RPC '${n}' ${m}: `,I),I),I=>{throw Ls("RestConnection",`RPC '${n}' ${m} failed with error: `,I,"url: ",_,"request:",a),I})}ko(n,s,a,c,f,m){return this.Oo(n,s,a,c,f)}Bo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,f)=>n[f]=c),a&&a.headers.forEach((c,f)=>n[f]=c)}No(n,s){const a=$w[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,s,a){const c=Qc();return new Promise((f,m)=>{const _=new vm;_.setWithCredentials(!0),_.listenOnce(Em.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Cl.NO_ERROR:const I=_.getResponseJson();te(Dt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),f(I);break;case Cl.TIMEOUT:te(Dt,`RPC '${e}' ${c} timed out`),m(new le(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Cl.HTTP_ERROR:const k=_.getStatus();if(te(Dt,`RPC '${e}' ${c} failed with status:`,k,"response text:",_.getResponseText()),k>0){let F=_.getResponseJson();Array.isArray(F)&&(F=F[0]);const B=F==null?void 0:F.error;if(B&&B.status&&B.message){const G=function(q){const ge=q.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(ge)>=0?ge:Q.UNKNOWN}(B.status);m(new le(G,B.message))}else m(new le(Q.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new le(Q.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{te(Dt,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(a);te(Dt,`RPC '${e}' ${c} sending request:`,a),_.send(n,"POST",E,s,15)})}qo(e,n,s){const a=Qc(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Im(),m=Tm(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(_.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Bo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const I=c.join("");te(Dt,`Creating RPC '${e}' stream ${a}: ${I}`,_);const k=f.createWebChannel(I,_);let F=!1,B=!1;const G=new qw({Eo:q=>{B?te(Dt,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(F||(te(Dt,`Opening RPC '${e}' stream ${a} transport.`),k.open(),F=!0),te(Dt,`RPC '${e}' stream ${a} sending:`,q),k.send(q))},Ao:()=>k.close()}),X=(q,ge,fe)=>{q.listen(ge,ve=>{try{fe(ve)}catch(Ie){setTimeout(()=>{throw Ie},0)}})};return X(k,bo.EventType.OPEN,()=>{B||(te(Dt,`RPC '${e}' stream ${a} transport opened.`),G.So())}),X(k,bo.EventType.CLOSE,()=>{B||(B=!0,te(Dt,`RPC '${e}' stream ${a} transport closed`),G.Do())}),X(k,bo.EventType.ERROR,q=>{B||(B=!0,Ls(Dt,`RPC '${e}' stream ${a} transport errored:`,q),G.Do(new le(Q.UNAVAILABLE,"The operation could not be completed")))}),X(k,bo.EventType.MESSAGE,q=>{var ge;if(!B){const fe=q.data[0];Oe(!!fe);const ve=fe,Ie=(ve==null?void 0:ve.error)||((ge=ve[0])===null||ge===void 0?void 0:ge.error);if(Ie){te(Dt,`RPC '${e}' stream ${a} received error:`,Ie);const He=Ie.status;let Ae=function(A){const P=st[A];if(P!==void 0)return Km(P)}(He),V=Ie.message;Ae===void 0&&(Ae=Q.INTERNAL,V="Unknown error status: "+He+" with message "+Ie.message),B=!0,G.Do(new le(Ae,V)),k.close()}else te(Dt,`RPC '${e}' stream ${a} received:`,fe),G.vo(fe)}}),X(m,wm.STAT_EVENT,q=>{q.stat===nh.PROXY?te(Dt,`RPC '${e}' stream ${a} detected buffering proxy`):q.stat===nh.NOPROXY&&te(Dt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{G.bo()},0),G}}function Kc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(i){return new JE(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n,s=1e3,a=1.5,c=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,s,a,c,f,m,_){this.li=e,this.Yo=s,this.Zo=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new ag(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new le(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.d_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.d_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ww extends lg{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=tw(this.serializer,e),s=function(c){if(!("targetChange"in c))return me.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?me.min():f.readTime?Hn(f.readTime):me.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=hh(this.serializer),n.addTarget=function(c,f){let m;const _=f.target;if(m=oh(_)?{documents:iw(c,_)}:{query:sw(c,_).ct},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Ym(c,f.resumeToken);const E=lh(c,f.expectedCount);E!==null&&(m.expectedCount=E)}else if(f.snapshotVersion.compareTo(me.min())>0){m.readTime=jl(c,f.snapshotVersion.toTimestamp());const E=lh(c,f.expectedCount);E!==null&&(m.expectedCount=E)}return m}(this.serializer,e);const s=aw(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=hh(this.serializer),n.removeTarget=e,this.c_(n)}}class Qw extends lg{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=rw(e.writeResults,e.commitTime),s=Hn(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=hh(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>nw(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Oo(e,uh(n,s),a,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(Q.UNKNOWN,c.toString())})}ko(e,n,s,a,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.ko(e,uh(n,s),a,f,m,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new le(Q.UNKNOWN,f.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Gw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(mr(n),this.C_=!1):te("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(f=>{s.enqueueAndForget(async()=>{Li(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(_){const E=ye(_);E.k_.add(4),await ia(E),E.K_.set("Unknown"),E.k_.delete(4),await iu(E)}(this))})}),this.K_=new Gw(s,a)}}async function iu(i){if(Li(i))for(const e of i.q_)await e(!0)}async function ia(i){for(const e of i.q_)await e(!1)}function ug(i,e){const n=ye(i);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),Mh(n)?Lh(n):Hs(n).s_()&&Dh(n,e))}function Nh(i,e){const n=ye(i),s=Hs(n);n.L_.delete(e),s.s_()&&cg(n,e),n.L_.size===0&&(s.s_()?s.a_():Li(n)&&n.K_.set("Unknown"))}function Dh(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hs(i).V_(e)}function cg(i,e){i.U_.xe(e),Hs(i).m_(e)}function Lh(i){i.U_=new KE({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.L_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Hs(i).start(),i.K_.F_()}function Mh(i){return Li(i)&&!Hs(i).i_()&&i.L_.size>0}function Li(i){return ye(i).k_.size===0}function hg(i){i.U_=void 0}async function Yw(i){i.K_.set("Online")}async function Jw(i){i.L_.forEach((e,n)=>{Dh(i,e)})}async function Zw(i,e){hg(i),Mh(i)?(i.K_.O_(e),Lh(i)):i.K_.set("Unknown")}async function e0(i,e,n){if(i.K_.set("Online"),e instanceof Xm&&e.state===2&&e.cause)try{await async function(a,c){const f=c.cause;for(const m of c.targetIds)a.L_.has(m)&&(await a.remoteSyncer.rejectListen(m,f),a.L_.delete(m),a.U_.removeTarget(m))}(i,e)}catch(s){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await $l(i,s)}else if(e instanceof xl?i.U_.$e(e):e instanceof Gm?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(me.min()))try{const s=await og(i.localStore);n.compareTo(s)>=0&&await function(c,f){const m=c.U_.it(f);return m.targetChanges.forEach((_,E)=>{if(_.resumeToken.approximateByteSize()>0){const I=c.L_.get(E);I&&c.L_.set(E,I.withResumeToken(_.resumeToken,f))}}),m.targetMismatches.forEach((_,E)=>{const I=c.L_.get(_);if(!I)return;c.L_.set(_,I.withResumeToken(Rt.EMPTY_BYTE_STRING,I.snapshotVersion)),cg(c,_);const k=new $r(I.target,_,E,I.sequenceNumber);Dh(c,k)}),c.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){te("RemoteStore","Failed to raise snapshot:",s),await $l(i,s)}}async function $l(i,e,n){if(!qs(e))throw e;i.k_.add(1),await ia(i),i.K_.set("Offline"),n||(n=()=>og(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await iu(i)})}function fg(i,e){return e().catch(n=>$l(i,n,e))}async function su(i){const e=ye(i),n=Jr(e);let s=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;t0(e);)try{const a=await Uw(e.localStore,s);if(a===null){e.B_.length===0&&n.a_();break}s=a.batchId,n0(e,a)}catch(a){await $l(e,a)}dg(e)&&pg(e)}function t0(i){return Li(i)&&i.B_.length<10}function n0(i,e){i.B_.push(e);const n=Jr(i);n.s_()&&n.f_&&n.g_(e.mutations)}function dg(i){return Li(i)&&!Jr(i).i_()&&i.B_.length>0}function pg(i){Jr(i).start()}async function r0(i){Jr(i).w_()}async function i0(i){const e=Jr(i);for(const n of i.B_)e.g_(n.mutations)}async function s0(i,e,n){const s=i.B_.shift(),a=Rh.from(s,e,n);await fg(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await su(i)}async function o0(i,e){e&&Jr(i).f_&&await async function(s,a){if(function(f){return HE(f)&&f!==Q.ABORTED}(a.code)){const c=s.B_.shift();Jr(s).__(),await fg(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await su(s)}}(i,e),dg(i)&&pg(i)}async function Hp(i,e){const n=ye(i);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const s=Li(n);n.k_.add(3),await ia(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await iu(n)}async function a0(i,e){const n=ye(i);e?(n.k_.delete(2),await iu(n)):e||(n.k_.add(2),await ia(n),n.K_.set("Unknown"))}function Hs(i){return i.W_||(i.W_=function(n,s,a){const c=ye(n);return c.b_(),new Ww(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:Yw.bind(null,i),mo:Jw.bind(null,i),po:Zw.bind(null,i),R_:e0.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),Mh(i)?Lh(i):i.K_.set("Unknown")):(await i.W_.stop(),hg(i))})),i.W_}function Jr(i){return i.G_||(i.G_=function(n,s,a){const c=ye(n);return c.b_(),new Qw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:r0.bind(null,i),po:o0.bind(null,i),p_:i0.bind(null,i),y_:s0.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await su(i)):(await i.G_.stop(),i.B_.length>0&&(te("RemoteStore",`Stopping write stream with ${i.B_.length} pending writes`),i.B_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,m=new Oh(e,n,f,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fh(i,e){if(mr("AsyncQueue",`${e}: ${i}`),qs(i))return new le(Q.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{static emptySet(e){return new Ns(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||he.comparator(n.key,s.key):(n,s)=>he.comparator(n.key,s.key),this.keyedMap=$o(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ns;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.z_=new Ye(he.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):pe():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class zs{constructor(e,n,s,a,c,f,m,_,E){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=E}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new zs(e,n,Ns.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class u0{constructor(){this.queries=Qp(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=ye(n),c=a.queries;a.queries=Qp(),c.forEach((f,m)=>{for(const _ of m.J_)_.onError(s)})})(this,new le(Q.ABORTED,"Firestore shutting down"))}}function Qp(){return new Ni(i=>Mm(i),Yl)}async function c0(i,e){const n=ye(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Y_()&&e.Z_()&&(s=2):(c=new l0,s=e.Z_()?0:1);try{switch(s){case 0:c.H_=await n.onListen(a,!0);break;case 1:c.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const m=Fh(f,`Initialization of query '${Ps(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.J_.push(e),e.ea(n.onlineState),c.H_&&e.ta(c.H_)&&Uh(n)}async function h0(i,e){const n=ye(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.J_.indexOf(e);f>=0&&(c.J_.splice(f,1),c.J_.length===0?a=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function f0(i,e){const n=ye(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const m of f.J_)m.ta(a)&&(s=!0);f.H_=a}}s&&Uh(n)}function d0(i,e,n){const s=ye(i),a=s.queries.get(e);if(a)for(const c of a.J_)c.onError(n);s.queries.delete(e)}function Uh(i){i.X_.forEach(e=>{e.next()})}var dh,Kp;(Kp=dh||(dh={})).na="default",Kp.Cache="cache";class p0{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new zs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==dh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this.key=e}}class gg{constructor(e){this.key=e}}class m0{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Se(),this.mutatedKeys=Se(),this.Va=Om(e),this.ma=new Ns(this.Va)}get fa(){return this.Ea}ga(e,n){const s=n?n.pa:new Wp,a=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,m=!1;const _=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,E=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((I,k)=>{const F=a.get(I),B=Jl(this.query,k)?k:null,G=!!F&&this.mutatedKeys.has(F.key),X=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let q=!1;F&&B?F.data.isEqual(B.data)?G!==X&&(s.track({type:3,doc:B}),q=!0):this.ya(F,B)||(s.track({type:2,doc:B}),q=!0,(_&&this.Va(B,_)>0||E&&this.Va(B,E)<0)&&(m=!0)):!F&&B?(s.track({type:0,doc:B}),q=!0):F&&!B&&(s.track({type:1,doc:F}),q=!0,(_||E)&&(m=!0)),q&&(B?(f=f.add(B),c=X?c.add(I):c.delete(I)):(f=f.delete(I),c=c.delete(I)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const I=this.query.limitType==="F"?f.last():f.first();f=f.delete(I.key),c=c.delete(I.key),s.track({type:1,doc:I})}return{ma:f,pa:s,ss:m,mutatedKeys:c}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const f=e.pa.j_();f.sort((I,k)=>function(B,G){const X=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return X(B)-X(G)}(I.type,k.type)||this.Va(I.doc,k.doc)),this.wa(s),a=a!=null&&a;const m=n&&!a?this.Sa():[],_=this.Ra.size===0&&this.current&&!a?1:0,E=_!==this.Aa;return this.Aa=_,f.length!==0||E?{snapshot:new zs(this.query,e.ma,c,f,e.mutatedKeys,_===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Wp,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Se(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new gg(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new mg(s))}),n}va(e){this.Ea=e.Es,this.Ra=Se();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return zs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class g0{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class y0{constructor(e){this.key=e,this.Fa=!1}}class _0{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Ma={},this.xa=new Ni(m=>Mm(m),Yl),this.Oa=new Map,this.Na=new Set,this.Ba=new Ye(he.comparator),this.La=new Map,this.ka=new kh,this.qa={},this.Qa=new Map,this.Ka=Us.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function v0(i,e,n=!0){const s=Tg(i);let a;const c=s.xa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await yg(s,e,n,!0),a}async function E0(i,e){const n=Tg(i);await yg(n,e,!0,!1)}async function yg(i,e,n,s){const a=await zw(i.localStore,qn(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await w0(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&ug(i.remoteStore,a),m}async function w0(i,e,n,s,a){i.Ua=(k,F,B)=>async function(X,q,ge,fe){let ve=q.view.ga(ge);ve.ss&&(ve=await bp(X.localStore,q.query,!1).then(({documents:V})=>q.view.ga(V,ve)));const Ie=fe&&fe.targetChanges.get(q.targetId),He=fe&&fe.targetMismatches.get(q.targetId)!=null,Ae=q.view.applyChanges(ve,X.isPrimaryClient,Ie,He);return Xp(X,q.targetId,Ae.ba),Ae.snapshot}(i,k,F,B);const c=await bp(i.localStore,e,!0),f=new m0(e,c.Es),m=f.ga(c.documents),_=ra.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),E=f.applyChanges(m,i.isPrimaryClient,_);Xp(i,n,E.ba);const I=new g0(e,n,f);return i.xa.set(e,I),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),E.snapshot}async function T0(i,e,n){const s=ye(i),a=s.xa.get(e),c=s.Oa.get(a.targetId);if(c.length>1)return s.Oa.set(a.targetId,c.filter(f=>!Yl(f,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await fh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Nh(s.remoteStore,a.targetId),ph(s,a.targetId)}).catch($s)):(ph(s,a.targetId),await fh(s.localStore,a.targetId,!0))}async function I0(i,e){const n=ye(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Nh(n.remoteStore,s.targetId))}async function S0(i,e,n){const s=x0(i);try{const a=await function(f,m){const _=ye(f),E=ft.now(),I=m.reduce((B,G)=>B.add(G.key),Se());let k,F;return _.persistence.runTransaction("Locally write mutations","readwrite",B=>{let G=gr(),X=Se();return _.hs.getEntries(B,I).next(q=>{G=q,G.forEach((ge,fe)=>{fe.isValidDocument()||(X=X.add(ge))})}).next(()=>_.localDocuments.getOverlayedDocuments(B,G)).next(q=>{k=q;const ge=[];for(const fe of m){const ve=BE(fe,k.get(fe.key).overlayedDocument);ve!=null&&ge.push(new Di(fe.key,ve,Pm(ve.value.mapValue),fr.exists(!0)))}return _.mutationQueue.addMutationBatch(B,E,ge,m)}).next(q=>{F=q;const ge=q.applyToLocalDocumentSet(k,X);return _.documentOverlayCache.saveOverlays(B,q.batchId,ge)})}).then(()=>({batchId:F.batchId,changes:Um(k)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(f,m,_){let E=f.qa[f.currentUser.toKey()];E||(E=new Ye(Ce)),E=E.insert(m,_),f.qa[f.currentUser.toKey()]=E}(s,a.batchId,n),await sa(s,a.changes),await su(s.remoteStore)}catch(a){const c=Fh(a,"Failed to persist write");n.reject(c)}}async function _g(i,e){const n=ye(i);try{const s=await Ow(n.localStore,e);e.targetChanges.forEach((a,c)=>{const f=n.La.get(c);f&&(Oe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.Fa=!0:a.modifiedDocuments.size>0?Oe(f.Fa):a.removedDocuments.size>0&&(Oe(f.Fa),f.Fa=!1))}),await sa(n,s,e)}catch(s){await $s(s)}}function Gp(i,e,n){const s=ye(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((c,f)=>{const m=f.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(f,m){const _=ye(f);_.onlineState=m;let E=!1;_.queries.forEach((I,k)=>{for(const F of k.J_)F.ea(m)&&(E=!0)}),E&&Uh(_)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function A0(i,e,n){const s=ye(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.La.get(e),c=a&&a.key;if(c){let f=new Ye(he.comparator);f=f.insert(c,Mt.newNoDocument(c,me.min()));const m=Se().add(c),_=new nu(me.min(),new Map,new Ye(Ce),f,m);await _g(s,_),s.Ba=s.Ba.remove(c),s.La.delete(e),zh(s)}else await fh(s.localStore,e,!1).then(()=>ph(s,e,n)).catch($s)}async function R0(i,e){const n=ye(i),s=e.batch.batchId;try{const a=await Mw(n.localStore,e);Eg(n,s,null),vg(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await sa(n,a)}catch(a){await $s(a)}}async function C0(i,e,n){const s=ye(i);try{const a=await function(f,m){const _=ye(f);return _.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let I;return _.mutationQueue.lookupMutationBatch(E,m).next(k=>(Oe(k!==null),I=k.keys(),_.mutationQueue.removeMutationBatch(E,k))).next(()=>_.mutationQueue.performConsistencyCheck(E)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(E,I,m)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,I)).next(()=>_.localDocuments.getDocuments(E,I))})}(s.localStore,e);Eg(s,e,n),vg(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await sa(s,a)}catch(a){await $s(a)}}function vg(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function Eg(i,e,n){const s=ye(i);let a=s.qa[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function ph(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||wg(i,s)})}function wg(i,e){i.Na.delete(e.path.canonicalString());const n=i.Ba.get(e);n!==null&&(Nh(i.remoteStore,n),i.Ba=i.Ba.remove(e),i.La.delete(n),zh(i))}function Xp(i,e,n){for(const s of n)s instanceof mg?(i.ka.addReference(s.key,e),P0(i,s)):s instanceof gg?(te("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||wg(i,s.key)):pe()}function P0(i,e){const n=e.key,s=n.path.canonicalString();i.Ba.get(n)||i.Na.has(s)||(te("SyncEngine","New document in limbo: "+n),i.Na.add(s),zh(i))}function zh(i){for(;i.Na.size>0&&i.Ba.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new he(Ke.fromString(e)),s=i.Ka.next();i.La.set(s,new y0(n)),i.Ba=i.Ba.insert(n,s),ug(i.remoteStore,new $r(qn(Sh(n.path)),s,"TargetPurposeLimboResolution",Ql.oe))}}async function sa(i,e,n){const s=ye(i),a=[],c=[],f=[];s.xa.isEmpty()||(s.xa.forEach((m,_)=>{f.push(s.Ua(_,e,n).then(E=>{var I;if((E||n)&&s.isPrimaryClient){const k=E?!E.fromCache:(I=n==null?void 0:n.targetChanges.get(_.targetId))===null||I===void 0?void 0:I.current;s.sharedClientState.updateQueryState(_.targetId,k?"current":"not-current")}if(E){a.push(E);const k=xh.zi(_.targetId,E);c.push(k)}}))}),await Promise.all(f),s.Ma.R_(a),await async function(_,E){const I=ye(_);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>j.forEach(E,F=>j.forEach(F.Wi,B=>I.persistence.referenceDelegate.addReference(k,F.targetId,B)).next(()=>j.forEach(F.Gi,B=>I.persistence.referenceDelegate.removeReference(k,F.targetId,B)))))}catch(k){if(!qs(k))throw k;te("LocalStore","Failed to update sequence numbers: "+k)}for(const k of E){const F=k.targetId;if(!k.fromCache){const B=I.us.get(F),G=B.snapshotVersion,X=B.withLastLimboFreeSnapshotVersion(G);I.us=I.us.insert(F,X)}}}(s.localStore,c))}async function k0(i,e){const n=ye(i);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const s=await sg(n.localStore,e);n.currentUser=e,function(c,f){c.Qa.forEach(m=>{m.forEach(_=>{_.reject(new le(Q.CANCELLED,f))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await sa(n,s.Ts)}}function V0(i,e){const n=ye(i),s=n.La.get(e);if(s&&s.Fa)return Se().add(s.key);{let a=Se();const c=n.Oa.get(e);if(!c)return a;for(const f of c){const m=n.xa.get(f);a=a.unionWith(m.view.fa)}return a}}function Tg(i){const e=ye(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=_g.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A0.bind(null,e),e.Ma.R_=f0.bind(null,e.eventManager),e.Ma.Wa=d0.bind(null,e.eventManager),e}function x0(i){const e=ye(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C0.bind(null,e),e}class ql{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ru(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return Lw(this.persistence,new Nw,e.initialUser,this.serializer)}ja(e){return new ig(Vh.ei,this.serializer)}za(e){return new jw}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ql.provider={build:()=>new ql};class N0 extends ql{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Oe(this.persistence.referenceDelegate instanceof bl);const s=this.persistence.referenceDelegate.garbageCollector;return new yw(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new ig(s=>bl.ei(s,n),this.serializer)}}class mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Gp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=k0.bind(null,this.syncEngine),await a0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new u0}()}createDatastore(e){const n=ru(e.databaseInfo.databaseId),s=function(c){return new Hw(c)}(e.databaseInfo);return function(c,f,m,_){return new Kw(c,f,m,_)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,f,m){return new Xw(s,a,c,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Gp(this.syncEngine,n,0),function(){return qp.p()?new qp:new bw}())}createSyncEngine(e,n){return function(a,c,f,m,_,E,I){const k=new _0(a,c,f,m,_,E);return I&&(k.$a=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=ye(a);te("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await ia(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mh.provider={build:()=>new mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Lt.UNAUTHENTICATED,this.clientId=Am.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{te("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(te("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Fh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Gc(i,e){i.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await sg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Yp(i,e){i.asyncQueue.verifyOperationInProgress();const n=await M0(i);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>Hp(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>Hp(e.remoteStore,a)),i._onlineComponents=e}async function M0(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gc(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Ls("Error using user provided cache. Falling back to memory cache: "+n),await Gc(i,new ql)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await Gc(i,new N0(void 0));return i._offlineComponents}async function Ig(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Yp(i,i._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Yp(i,new mh))),i._onlineComponents}function O0(i){return Ig(i).then(e=>e.syncEngine)}async function Jp(i){const e=await Ig(i),n=e.eventManager;return n.onListen=v0.bind(null,e.syncEngine),n.onUnlisten=T0.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=E0.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I0.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(i,e,n){if(!n)throw new le(Q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function F0(i,e,n,s){if(e===!0&&s===!0)throw new le(Q.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function em(i){if(!he.isDocumentKey(i))throw new le(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function tm(i){if(he.isDocumentKey(i))throw new le(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Bh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":pe()}function Ds(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new le(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bh(i);throw new le(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ou{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nm(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Wv;switch(s.type){case"firstParty":return new Xv(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Zp.get(n);s&&(te("ComponentProvider","Removing Datastore"),Zp.delete(n),s.terminate())}(this),Promise.resolve()}}function U0(i,e,n,s={}){var a;const c=(i=Ds(i,ou))._getSettings(),f=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==f&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),s.mockUserToken){let m,_;if(typeof s.mockUserToken=="string")m=s.mockUserToken,_=Lt.MOCK_USER;else{m=C_(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new le(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Lt(E)}i._authCredentials=new Qv(new Sm(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new au(this.firestore,e,this._query)}}class rn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class Qr extends au{constructor(e,n,s){super(e,n,Sh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new he(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function z0(i,e,...n){if(i=dr(i),Ag("collection","path",e),i instanceof ou){const s=Ke.fromString(e,...n);return tm(s),new Qr(i,null,s)}{if(!(i instanceof rn||i instanceof Qr))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ke.fromString(e,...n));return tm(s),new Qr(i.firestore,null,s)}}function B0(i,e,...n){if(i=dr(i),arguments.length===1&&(e=Am.newId()),Ag("doc","path",e),i instanceof ou){const s=Ke.fromString(e,...n);return em(s),new rn(i,null,new he(s))}{if(!(i instanceof rn||i instanceof Qr))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ke.fromString(e,...n));return em(s),new rn(i.firestore,i instanceof Qr?i.converter:null,new he(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new ag(this,"async_queue_retry"),this.fu=()=>{const s=Kc();s&&te("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=Kc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=Kc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new Vi;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!qs(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw mr("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=Oh.createAndSchedule(this,e,n,s,c=>this.Su(c));return this.Eu.push(a),a}pu(){this.Au&&pe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}function im(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1}(i,["next","error","complete"])}class Hl extends ou{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new rm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rm(e),this._firestoreClient=void 0,await e}}}function j0(i,e){const n=typeof i=="object"?i:Ov(),s=typeof i=="string"?i:"(default)",a=Nv(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=A_("firestore");c&&U0(a,...c)}return a}function Rg(i){if(i._terminated)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||b0(i),i._firestoreClient}function b0(i){var e,n,s;const a=i._freezeSettings(),c=function(m,_,E,I){return new hE(m,_,E,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,Sg(I.experimentalLongPollingOptions),I.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new L0(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const _=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(_),_online:_}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bs(Rt.fromBase64String(e))}catch(n){throw new le(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bs(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=/^__.*__$/;class Cg{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Di(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Pg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class qh{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new qh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Bu(e),a}Lu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Wl(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Pg(this.Mu)&&$0.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class q0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ru(e)}$u(e,n,s,a=!1){return new qh({Mu:e,methodName:n,Ku:s,path:At.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function H0(i){const e=i._freezeSettings(),n=ru(i._databaseId);return new q0(i._databaseId,!!e.ignoreUndefinedProperties,n)}class uu extends jh{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uu}}function W0(i,e,n,s){const a=i.$u(1,e,n);Vg("Data must be an object, but it was:",a,s);const c=[],f=nn.empty();Zr(s,(_,E)=>{const I=Hh(e,_,n);E=dr(E);const k=a.Lu(I);if(E instanceof uu)c.push(I);else{const F=cu(E,k);F!=null&&(c.push(I),f.set(I,F))}});const m=new xn(c);return new Cg(f,m,a.fieldTransforms)}function Q0(i,e,n,s,a,c){const f=i.$u(1,e,n),m=[sm(e,s,n)],_=[a];if(c.length%2!=0)throw new le(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<c.length;F+=2)m.push(sm(e,c[F])),_.push(c[F+1]);const E=[],I=nn.empty();for(let F=m.length-1;F>=0;--F)if(!X0(E,m[F])){const B=m[F];let G=_[F];G=dr(G);const X=f.Lu(B);if(G instanceof uu)E.push(B);else{const q=cu(G,X);q!=null&&(E.push(B),I.set(B,q))}}const k=new xn(E);return new Cg(I,k,f.fieldTransforms)}function cu(i,e){if(kg(i=dr(i)))return Vg("Unsupported field value:",e,i),K0(i,e);if(i instanceof jh)return function(s,a){if(!Pg(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const c=[];let f=0;for(const m of s){let _=cu(m,a.ku(f));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),f++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=dr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return LE(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ft.fromDate(s);return{timestampValue:jl(a.serializer,c)}}if(s instanceof ft){const c=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:jl(a.serializer,c)}}if(s instanceof bh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bs)return{bytesValue:Ym(a.serializer,s._byteString)};if(s instanceof rn){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.qu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ph(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof $h)return function(f,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:f.toArray().map(_=>{if(typeof _!="number")throw m.qu("VectorValues must only contain numeric values.");return Ah(m.serializer,_)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${Bh(s)}`)}(i,e)}function K0(i,e){const n={};return Rm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(i,(s,a)=>{const c=cu(a,e.Ou(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function kg(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ft||i instanceof bh||i instanceof Bs||i instanceof rn||i instanceof jh||i instanceof $h)}function Vg(i,e,n){if(!kg(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=Bh(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function sm(i,e,n){if((e=dr(e))instanceof lu)return e._internalPath;if(typeof e=="string")return Hh(i,e);throw Wl("Field path arguments must be of type string or ",i,!1,void 0,n)}const G0=new RegExp("[~\\*/\\[\\]]");function Hh(i,e,n){if(e.search(G0)>=0)throw Wl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new lu(...e.split("."))._internalPath}catch{throw Wl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Wl(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(c||f)&&(_+=" (found",c&&(_+=` in field ${s}`),f&&(_+=` in document ${a}`),_+=")"),new le(Q.INVALID_ARGUMENT,m+i+_)}function X0(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y0 extends xg{data(){return super.data()}}function Ng(i,e){return typeof e=="string"?Hh(i,e):e instanceof lu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new le(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z0{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Zr(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(f=>nt(f.doubleValue));return new $h(c)}convertGeoPoint(e){return new bh(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Gl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Jo(e));default:return null}}convertTimestamp(e){const n=Gr(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ke.fromString(e);Oe(rg(s));const a=new Zo(s.get(1),s.get(3)),c=new he(s.popFirst(5));return a.isEqual(n)||mr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dg extends xg{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ng("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Nl extends Dg{data(e={}){return super.data(e)}}class eT{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Ho(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Nl(this._firestore,this._userDataWriter,s.key,s,new Ho(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map(m=>{const _=new Nl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ho(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:_,oldIndex:-1,newIndex:f++}})}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const _=new Nl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ho(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let E=-1,I=-1;return m.type!==0&&(E=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),I=f.indexOf(m.doc.key)),{type:tT(m.type),doc:_,oldIndex:E,newIndex:I}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tT(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}class Lg extends Z0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function nT(i,e,n,...s){i=Ds(i,rn);const a=Ds(i.firestore,Hl),c=H0(a);let f;return f=typeof(e=dr(e))=="string"||e instanceof lu?Q0(c,"updateDoc",i._key,e,n,s):W0(c,"updateDoc",i._key,e),iT(a,[f.toMutation(i._key,fr.exists(!0))])}function rT(i,...e){var n,s,a;i=dr(i);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||im(e[f])||(c=e[f],f++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(im(e[f])){const k=e[f];e[f]=(n=k.next)===null||n===void 0?void 0:n.bind(k),e[f+1]=(s=k.error)===null||s===void 0?void 0:s.bind(k),e[f+2]=(a=k.complete)===null||a===void 0?void 0:a.bind(k)}let _,E,I;if(i instanceof rn)E=Ds(i.firestore,Hl),I=Sh(i._key.path),_={next:k=>{e[f]&&e[f](sT(E,i,k))},error:e[f+1],complete:e[f+2]};else{const k=Ds(i,au);E=Ds(k.firestore,Hl),I=k._query;const F=new Lg(E);_={next:B=>{e[f]&&e[f](new eT(E,F,k,B))},error:e[f+1],complete:e[f+2]},J0(i._query)}return function(F,B,G,X){const q=new D0(X),ge=new p0(B,q,G);return F.asyncQueue.enqueueAndForget(async()=>c0(await Jp(F),ge)),()=>{q.eu(),F.asyncQueue.enqueueAndForget(async()=>h0(await Jp(F),ge))}}(Rg(E),I,m,_)}function iT(i,e){return function(s,a){const c=new Vi;return s.asyncQueue.enqueueAndForget(async()=>S0(await O0(s),a,c)),c.promise}(Rg(i),e)}function sT(i,e,n){const s=n.docs.get(e._key),a=new Lg(i);return new Dg(i,a,e._key,s,new Ho(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){bs=a})(Mv),Ml(new Xo("firestore",(s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Hl(new Kv(s.getProvider("auth-internal")),new Jv(s.getProvider("app-check-internal")),function(E,I){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new le(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(E.options.projectId,I)}(f,a),f);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),xs(vp,"4.7.6",e),xs(vp,"4.7.6","esm2017")})();var oT="firebase",aT="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(oT,aT,"app");const lT={apiKey:"AIzaSyDFMfhCIy8M5gOwGEg4tVNFbR4mV9mPrXw",authDomain:"insta-reels-clone-c41a9.firebaseapp.com",projectId:"insta-reels-clone-c41a9",storageBucket:"insta-reels-clone-c41a9.firebasestorage.app",messagingSenderId:"712373936525",appId:"1:712373936525:web:363f61c6a7c3ca69ac5dc4",measurementId:"G-XTSXG2ZXSJ"},uT=mm(lT),om=j0(uT),cT=()=>{const[i,e]=mn.useState([]);mn.useEffect(()=>{const s=z0(om,"reels"),a=rT(s,c=>{e(c.docs.map(f=>({id:f.id,...f.data()})))});return()=>a()},[]);const n=async(s,a,c)=>{const f=B0(om,"reels",s);try{const m=!c,_=m?a+1:a-1;await nT(f,{likes:_,isLiked:m})}catch(m){console.error("Error updating likes and isLiked status: ",m)}};return _e.jsx("div",{className:"grid h-screen place-items-center bg-black",children:_e.jsx("div",{className:"relative h-[70vh] bg-white rounded-2xl overflow-scroll max-w-96 max-h-screen snap-y snap-mandatory video",children:i.map(s=>_e.jsx(m_,{id:s.id,isLiked:s.isLiked,channel:s.channel,avatarSrc:s.avatarSrc,song:s.song,likes:s.likes,comments:s.comments,url:s.url,targetLink:s.targetLink,targetProduct:s.targetProduct,handleLike:n},s.id))})})};function hT(){return _e.jsx(_e.Fragment,{children:_e.jsx(cT,{})})}Hy.createRoot(document.getElementById("root")).render(_e.jsx(mn.StrictMode,{children:_e.jsx(hT,{})}));
